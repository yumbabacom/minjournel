(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{445:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(5155),a=n(2115),o=n(7383),s=n(6874),l=n.n(s);function i(){let[e,t]=(0,a.useState)(null),[n,s]=(0,a.useState)([]),[i,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[g,m]=(0,a.useState)({name:"Test Account",balance:"10000",tag:"personal"});(0,a.useEffect)(()=>{let e=o.A.get("auth-token")||localStorage.getItem("auth-token"),n=localStorage.getItem("user");if(u(e||"No token found"),n)try{let e=JSON.parse(n);t(e)}catch(e){console.error("Error parsing user data:",e)}c(!1)},[]);let x=async()=>{if(!(null==e?void 0:e.id)&&!(null==e?void 0:e._id))return void p("No user ID found");let t=(null==e?void 0:e.id)||(null==e?void 0:e._id);p("Fetching accounts...");try{let e=o.A.get("auth-token")||localStorage.getItem("auth-token"),n=await fetch("/api/accounts?userId=".concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}),r=await n.json();p(JSON.stringify(r,null,2)),n.ok&&s(r.accounts||[])}catch(e){p("Error: "+e.message)}},v=async()=>{if(!(null==e?void 0:e.id)&&!(null==e?void 0:e._id))return void p("No user ID found");let t=(null==e?void 0:e.id)||(null==e?void 0:e._id);p("Creating account...");try{let e=o.A.get("auth-token")||localStorage.getItem("auth-token"),n=await fetch("/api/accounts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({userId:t,...g})}),r=await n.json();p(JSON.stringify(r,null,2)),n.ok&&x()}catch(e){p("Error: "+e.message)}},f=async t=>{if(!(null==e?void 0:e.id)&&!(null==e?void 0:e._id))return void p("No user ID found");let n=(null==e?void 0:e.id)||(null==e?void 0:e._id);p("Deleting account ".concat(t,"..."));try{let e=o.A.get("auth-token")||localStorage.getItem("auth-token"),r=await fetch("/api/accounts?accountId=".concat(t,"&userId=").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}),a=await r.json();p(JSON.stringify(a,null,2)),r.ok&&x()}catch(e){p("Error: "+e.message)}},b=async()=>{p("Testing health check...");try{let e=await fetch("/api/accounts?health=true"),t=await e.json();p(JSON.stringify(t,null,2))}catch(e){p("Error: "+e.message)}};return(0,r.jsxs)("div",{className:"container mx-auto p-6 max-w-6xl",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)(l(),{href:"/dashboard",className:"text-blue-600 hover:underline flex items-center",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]}),(0,r.jsx)("h1",{className:"text-2xl font-bold mt-4",children:"Account Debugging Tool"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Use this page to test account operations"})]}),i?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Authentication Info"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"User ID:"})," ",(null==e?void 0:e.id)||(null==e?void 0:e._id)||"Not found"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Email:"})," ",(null==e?void 0:e.email)||"Not found"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Auth Token:"}),(0,r.jsx)("div",{className:"text-xs bg-gray-100 p-2 rounded mt-1 overflow-x-auto",children:d?d.length>20?"".concat(d.substring(0,20),"..."):d:"Not found"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Test Operations"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("button",{onClick:b,className:"w-full py-2 px-4 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200",children:"Test Health Check"}),(0,r.jsx)("button",{onClick:x,className:"w-full py-2 px-4 bg-green-100 text-green-700 rounded-lg hover:bg-green-200",children:"Fetch Accounts"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h3",{className:"text-md font-medium",children:"Create New Account"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)("input",{type:"text",placeholder:"Account Name",value:g.name,onChange:e=>m({...g,name:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded"}),(0,r.jsx)("input",{type:"number",placeholder:"Balance",value:g.balance,onChange:e=>m({...g,balance:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded"})]}),(0,r.jsxs)("select",{value:g.tag,onChange:e=>m({...g,tag:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded",children:[(0,r.jsx)("option",{value:"personal",children:"Personal"}),(0,r.jsx)("option",{value:"funded",children:"Funded"}),(0,r.jsx)("option",{value:"demo",children:"Demo"}),(0,r.jsx)("option",{value:"forex",children:"Forex"}),(0,r.jsx)("option",{value:"crypto",children:"Crypto"})]}),(0,r.jsx)("button",{onClick:v,className:"w-full py-2 px-4 bg-purple-100 text-purple-700 rounded-lg hover:bg-purple-200",children:"Create Account"})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"API Response"}),(0,r.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-xs overflow-x-auto max-h-60 overflow-y-auto",children:h||"No response yet"})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Accounts List"}),0===n.length?(0,r.jsx)("p",{className:"text-gray-500",children:"No accounts found"}):(0,r.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,r.jsxs)("div",{className:"p-3 border border-gray-200 rounded flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["$",parseFloat(e.balance).toFixed(2)]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.tag," â€¢ ID: ",e._id]})]}),(0,r.jsx)("button",{onClick:()=>f(e._id),className:"py-1 px-3 bg-red-100 text-red-700 rounded hover:bg-red-200 text-sm",children:"Delete"})]},e._id))})]})]})]})]})}},7383:(e,t,n)=>{"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}n.d(t,{A:()=>a});var a=function e(t,n){function a(e,a,o){if("undefined"!=typeof document){"number"==typeof(o=r({},n,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var l in o)o[l]&&(s+="; "+l,!0!==o[l]&&(s+="="+o[l].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+s}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},a=0;a<n.length;a++){var o=n[a].split("="),s=o.slice(1).join("=");try{var l=decodeURIComponent(o[0]);if(r[l]=t.read(s,l),e===l)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){a(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},9443:(e,t,n)=>{Promise.resolve().then(n.bind(n,445))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,441,684,358],()=>t(9443)),_N_E=e.O()}]);