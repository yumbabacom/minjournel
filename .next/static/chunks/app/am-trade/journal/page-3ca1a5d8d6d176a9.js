(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[854],{229:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(5155),a=s(2115),l=s(5695),n=s(7383),i=s(5387);function o(){var e;let t=(0,l.useRouter)(),[s,o]=(0,a.useState)(null),[c,x]=(0,a.useState)(!0),[m,u]=(0,a.useState)([]),[h,p]=(0,a.useState)([]),[g,b]=(0,a.useState)([]),[j,f]=(0,a.useState)(null),[v,y]=(0,a.useState)(""),[N,w]=(0,a.useState)("all"),[k,P]=(0,a.useState)("newest"),[L,C]=(0,a.useState)(!1),[S,A]=(0,a.useState)(!1),[D,M]=(0,a.useState)(!1),[T,R]=(0,a.useState)(!1),[E,B]=(0,a.useState)(null),[F,U]=(0,a.useState)(!1),[I,z]=(0,a.useState)({}),[W,H]=(0,a.useState)({}),[V,J]=(0,a.useState)({}),[O,_]=(0,a.useState)({}),[G,X]=(0,a.useState)(!1),[Y,Z]=(0,a.useState)({name:"",balance:"",tag:"personal"});(0,a.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);o(t),x(!1);return}let s=n.A.get("auth-token")||localStorage.getItem("auth-token");if(!s)return void t.push("/login");let r=await fetch("/api/user",{headers:{Authorization:"Bearer ".concat(s)}});if(r.ok){let e=await r.json();o(e),localStorage.setItem("user",JSON.stringify(e)),await q(e)}else t.push("/login")}catch(e){console.error("Error fetching user data:",e),t.push("/login")}finally{x(!1)}})()},[t]),(0,a.useEffect)(()=>{((null==s?void 0:s.id)||(null==s?void 0:s._id))&&(q(s),Q())},[s]),(0,a.useEffect)(()=>{j&&m.length>0&&$()},[j,m,v,N,k]);let q=async e=>{try{let t=(null==e?void 0:e.id)||(null==e?void 0:e._id);if(!t)return void console.error("User ID not found");let s=n.A.get("auth-token")||localStorage.getItem("auth-token");if(!s)return void console.error("Authentication token is missing");let r=await fetch("/api/accounts?userId=".concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});if(r.ok){let e=await r.json();if(e.accounts&&Array.isArray(e.accounts)){b(e.accounts);let t=localStorage.getItem("currentAccountId");if(t&&e.accounts.find(e=>String(e.id||e._id)===t))f(t);else if(e.accounts.length>0){let t=e.accounts[0].id||e.accounts[0]._id;f(t),localStorage.setItem("currentAccountId",String(t))}}}}catch(e){console.error("Error fetching accounts:",e)}},Q=async()=>{try{let e=n.A.get("auth-token")||localStorage.getItem("auth-token");if(!e)return void console.error("Authentication token is missing");if(!(null==s?void 0:s.id)&&!(null==s?void 0:s._id))return void console.error("User ID not found");let t=(null==s?void 0:s.id)||(null==s?void 0:s._id),r=await fetch("/api/am-trades?userId=".concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json();e.trades&&Array.isArray(e.trades)&&u(e.trades)}else console.error("Failed to fetch AM trades")}catch(e){console.error("Error fetching trades:",e)}finally{x(!1)}},$=()=>{let e=m.filter(e=>{if(String(e.accountId||e.account)!==j)return!1;if(v){var t,s,r,a;let l=v.toLowerCase();if(!((null==(t=e.tradingPair)?void 0:t.toLowerCase().includes(l))||(null==(s=e.setup)?void 0:s.toLowerCase().includes(l))||(null==(r=e.strategy)?void 0:r.toLowerCase().includes(l))||(null==(a=e.notes)?void 0:a.toLowerCase().includes(l))))return!1}return("all"===N||("pending"!==N||!e.status)&&("win"!==N||"win"===e.status)&&("loss"!==N||"loss"===e.status))&&!0});e.sort((e,t)=>{switch(k){case"newest":return new Date(t.dateTime||t.createdAt)-new Date(e.dateTime||e.createdAt);case"oldest":return new Date(e.dateTime||e.createdAt)-new Date(t.dateTime||t.createdAt);case"profit":return(t.actualProfit||0)-(e.actualProfit||0);case"loss":return(e.actualProfit||0)-(t.actualProfit||0);case"pair":return(e.tradingPair||"").localeCompare(t.tradingPair||"");default:return 0}}),p(e)},K=async()=>{if(Y.name&&Y.balance)try{let e=n.A.get("auth-token"),t=await fetch("/api/accounts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({name:Y.name,balance:parseFloat(Y.balance),tag:Y.tag})});if(t.ok){let e=await t.json();b(t=>[...t,e]),X(!1),Z({name:"",balance:"",tag:"personal"});let s=String(e.id||e._id);f(s),localStorage.setItem("currentAccountId",s)}}catch(e){console.error("Error adding account:",e)}},ee=async e=>{try{let t=n.A.get("auth-token");if((await fetch("/api/accounts/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok&&(b(t=>t.filter(t=>(t.id||t._id)!==e)),String(j)===String(e))){let t=g.filter(t=>t.id!==e&&t._id!==e);if(t.length>0){let e=t[0].id||t[0]._id;f(e),localStorage.setItem("currentAccountId",String(e))}}}catch(e){console.error("Error deleting account:",e)}},et=e=>{B(e),C(!0)},es=e=>{B(e),H({dateTime:e.dateTime||new Date().toISOString(),manualDateTime:e.manualDateTime||!1,weekday:e.weekday||"",month:e.month||"",quarter:e.quarter||"",accountSize:e.accountSize||0,direction:e.direction||"",tradingPair:e.tradingPair||"",entryPrice:e.entryPrice||"",takeProfit:e.takeProfit||"",stopLoss:e.stopLoss||"",riskPercent:e.riskPercent||"2",setup:e.setup||"",htfFramework:e.htfFramework||"",strategy:e.strategy||"",dailyProfile:e.dailyProfile||"",entryCandle:e.entryCandle||"",entryTime:e.entryTime||"",entryTimeFrame:e.entryTimeFrame||"",entryConfluence:e.entryConfluence||"",duration:e.duration||"",plannedRR:e.plannedRR||"",analysis:e.analysis||"",notes:e.notes||"",riskManagementLessons:e.riskManagementLessons||"",tags:e.tags||"",screenshot:e.screenshot||null,status:e.status||null,actualEntry:e.actualEntry||null,actualExit:e.actualExit||null,actualProfit:e.actualProfit||null,exitReason:e.exitReason||null,exitNotes:e.exitNotes||""});let t=eg({accountSize:e.accountSize||0,direction:e.direction||"",tradingPair:e.tradingPair||"",entryPrice:e.entryPrice||"",takeProfit:e.takeProfit||"",stopLoss:e.stopLoss||"",riskPercent:e.riskPercent||"2"});J(e.calculatedResults||t),z({}),A(!0)},er=e=>{B(e),_({status:e.status||"",actualEntry:e.actualEntry||"",actualExit:e.actualExit||"",actualProfit:e.actualProfit||"",exitReason:e.exitReason||"",exitNotes:e.exitNotes||""}),z({}),M(!0)},ea=e=>{B(e),R(!0)},el=async()=>{if(E){U(!0);try{let e=n.A.get("auth-token");(await fetch("/api/am-trades?tradeId=".concat(E._id,"&userId=").concat((null==s?void 0:s.id)||(null==s?void 0:s._id)),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}})).ok?(u(e=>e.filter(e=>e._id!==E._id)),R(!1),B(null),alert("Trade deleted successfully!")):alert("Failed to delete trade. Please try again.")}catch(e){console.error("Error deleting trade:",e),alert("Error deleting trade. Please check your connection and try again.")}finally{U(!1)}}},en=async()=>{if(!E)return;let e={};if(W.tradingPair||(e.tradingPair="Trading pair is required"),W.entryPrice||(e.entryPrice="Entry price is required"),W.takeProfit||(e.takeProfit="Take profit is required"),W.stopLoss||(e.stopLoss="Stop loss is required"),Object.keys(e).length>0)return void z(e);U(!0);try{let e=n.A.get("auth-token");(await fetch("/api/am-trades",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({tradeId:E._id,userId:(null==s?void 0:s.id)||(null==s?void 0:s._id),...W,calculatedResults:V})})).ok?(u(e=>e.map(e=>e._id===E._id?{...e,...W,calculatedResults:V}:e)),A(!1),B(null),H({}),J({}),alert("Trade updated successfully!")):alert("Failed to update trade. Please try again.")}catch(e){console.error("Error updating trade:",e),alert("Error updating trade. Please check your connection and try again.")}finally{U(!1)}},ei=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e||0),eo=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),ed=e=>{switch(e){case"win":return"bg-green-100 text-green-800 border-green-200";case"loss":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ec=e=>"long"===e?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200",ex=e=>{if(!e)return;let t=new Date(e),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],r=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],a="Q".concat(Math.floor(t.getMonth()/3)+1);H(t=>({...t,dateTime:e,weekday:s,month:r,quarter:a}))},em={forex:[{pair:"EUR/USD",name:"Euro/US Dollar"},{pair:"GBP/USD",name:"British Pound/US Dollar"},{pair:"USD/JPY",name:"US Dollar/Japanese Yen"},{pair:"USD/CHF",name:"US Dollar/Swiss Franc"},{pair:"AUD/USD",name:"Australian Dollar/US Dollar"},{pair:"USD/CAD",name:"US Dollar/Canadian Dollar"},{pair:"NZD/USD",name:"New Zealand Dollar/US Dollar"},{pair:"EUR/GBP",name:"Euro/British Pound"},{pair:"EUR/JPY",name:"Euro/Japanese Yen"},{pair:"GBP/JPY",name:"British Pound/Japanese Yen"},{pair:"AUD/JPY",name:"Australian Dollar/Japanese Yen"},{pair:"CAD/JPY",name:"Canadian Dollar/Japanese Yen"},{pair:"CHF/JPY",name:"Swiss Franc/Japanese Yen"},{pair:"NZD/JPY",name:"New Zealand Dollar/Japanese Yen"},{pair:"EUR/CHF",name:"Euro/Swiss Franc"},{pair:"GBP/CHF",name:"British Pound/Swiss Franc"},{pair:"AUD/CHF",name:"Australian Dollar/Swiss Franc"},{pair:"CAD/CHF",name:"Canadian Dollar/Swiss Franc"},{pair:"NZD/CHF",name:"New Zealand Dollar/Swiss Franc"},{pair:"EUR/AUD",name:"Euro/Australian Dollar"},{pair:"GBP/AUD",name:"British Pound/Australian Dollar"},{pair:"EUR/CAD",name:"Euro/Canadian Dollar"},{pair:"GBP/CAD",name:"British Pound/Canadian Dollar"},{pair:"AUD/CAD",name:"Australian Dollar/Canadian Dollar"},{pair:"EUR/NZD",name:"Euro/New Zealand Dollar"},{pair:"GBP/NZD",name:"British Pound/New Zealand Dollar"},{pair:"AUD/NZD",name:"Australian Dollar/New Zealand Dollar"},{pair:"CAD/NZD",name:"Canadian Dollar/New Zealand Dollar"}],commodities:[{pair:"XAUUSD",name:"Gold/US Dollar"},{pair:"XAGUSD",name:"Silver/US Dollar"},{pair:"XBRUSD",name:"Brent Oil/US Dollar"},{pair:"XTIUSD",name:"WTI Oil/US Dollar"},{pair:"XAUEUR",name:"Gold/Euro"},{pair:"XAUJPY",name:"Gold/Japanese Yen"},{pair:"XAUGBP",name:"Gold/British Pound"},{pair:"XAUAUD",name:"Gold/Australian Dollar"},{pair:"XAUCAD",name:"Gold/Canadian Dollar"},{pair:"XAUCHF",name:"Gold/Swiss Franc"}],crypto:[{pair:"BTC/USD",name:"Bitcoin/US Dollar"},{pair:"ETH/USD",name:"Ethereum/US Dollar"},{pair:"LTC/USD",name:"Litecoin/US Dollar"},{pair:"XRP/USD",name:"Ripple/US Dollar"},{pair:"ADA/USD",name:"Cardano/US Dollar"},{pair:"DOT/USD",name:"Polkadot/US Dollar"},{pair:"LINK/USD",name:"Chainlink/US Dollar"},{pair:"BCH/USD",name:"Bitcoin Cash/US Dollar"},{pair:"XLM/USD",name:"Stellar/US Dollar"},{pair:"UNI/USD",name:"Uniswap/US Dollar"}]},eu=e=>{for(let[t,s]of Object.entries(em)){let r=s.find(t=>t.pair===e);if(r)return{...r,category:t}}return null},eh=e=>{if(!e)return 0;let{category:t,pair:s}=e;switch(t){case"forex":if(s.includes("JPY"))return 1e3;return 10;case"crypto":return 1;case"commodities":if(s.includes("XAU"))return 100;if(s.includes("XAG"))return 50;if(s.includes("XTI")||s.includes("XBR"))return 100;return 10;default:return 10}},ep=(e,t,s)=>{if(!e||!t||!s)return 0;let{category:r,pair:a}=e,l=Math.abs(t-s);switch(r){case"forex":if(a.includes("JPY"))return 100*l;return 1e4*l;case"crypto":return l;case"commodities":if(a.includes("XAU"))return 10*l;if(a.includes("XAG"))return 100*l;return a.includes("XTI")||a.includes("XBR"),100*l;default:return 1e4*l}},eg=e=>{let t=parseFloat(e.entryPrice)||0,s=parseFloat(e.takeProfit)||0,r=parseFloat(e.stopLoss)||0,a=parseFloat(e.accountSize)||0,l=parseFloat(e.riskPercent)||2;if(!a||!t||!r||!s||!e.tradingPair)return{riskAmount:0,lotSize:0,potentialProfit:0,potentialLoss:0,profitPips:0,lossPips:0,riskRewardRatio:0};let n=eu(e.tradingPair);if(!n)return{riskAmount:0,lotSize:0,potentialProfit:0,potentialLoss:0,profitPips:0,lossPips:0,riskRewardRatio:0};let i=a*l/100,o=ep(n,t,r),d=ep(n,t,s),c=eh(n),x=o>0?i/(o*c):0,m=d*c*x,u=m>0?m/i:0;return{riskAmount:parseFloat(i.toFixed(2)),lotSize:parseFloat(Math.max(0,x).toFixed(4)),potentialProfit:parseFloat(Math.max(0,m).toFixed(2)),potentialLoss:parseFloat(i.toFixed(2)),profitPips:parseFloat(d.toFixed(1)),lossPips:parseFloat(o.toFixed(1)),riskRewardRatio:parseFloat(u.toFixed(2))}};return c?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50/30 to-purple-50/30",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-blue-600 border-t-transparent"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-purple-50/30 flex",children:[(0,r.jsx)(i.A,{user:s,currentAccountId:j,accounts:g,onAccountSwitch:e=>{f(e),localStorage.setItem("currentAccountId",e)},onAddAccount:()=>X(!0),onEditAccount:e=>{console.log("Edit account:",e)},onDeleteAccount:ee,onLogout:()=>{n.A.remove("auth-token"),localStorage.removeItem("auth-token"),localStorage.removeItem("user"),localStorage.removeItem("isAMTradeMode"),t.push("/login")},onUpdateUser:e=>o(e)}),(0,r.jsx)("main",{className:"flex-1 lg:ml-64 p-3 sm:p-6 lg:p-8",children:(0,r.jsxs)("div",{className:"max-w-8xl mx-auto",children:[(0,r.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 via-blue-800 to-purple-800 bg-clip-text text-transparent",children:"AM Trade Journal"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1 sm:mt-2 text-sm sm:text-base",children:"Track and analyze your Asian Market trading performance"})]}),(0,r.jsxs)("button",{onClick:()=>t.push("/am-trade/add-am-trade"),className:"px-4 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:via-purple-700 hover:to-indigo-700 transition-all duration-200 font-medium text-sm sm:text-base shadow-lg hover:shadow-xl flex items-center justify-center space-x-2 transform hover:scale-105 active:scale-95",children:[(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{children:"Add New Trade"})]})]})}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-blue-50/30 rounded-2xl sm:rounded-3xl border border-gray-200/60 p-4 sm:p-6 lg:p-8 shadow-lg hover:shadow-xl transition-all duration-300 mb-6 sm:mb-8",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Filter"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"px-3 py-2.5 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white transition-all duration-200 shadow-sm hover:shadow-md text-sm sm:text-base min-w-[140px]",children:[(0,r.jsx)("option",{value:"all",children:"All Trades"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"win",children:"Wins"}),(0,r.jsx)("option",{value:"loss",children:"Losses"})]}),(0,r.jsx)("div",{className:"absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 9l-7 7-7-7"})})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:k,onChange:e=>P(e.target.value),className:"px-3 py-2.5 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white transition-all duration-200 shadow-sm hover:shadow-md text-sm sm:text-base min-w-[140px]",children:[(0,r.jsx)("option",{value:"newest",children:"Newest First"}),(0,r.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,r.jsx)("option",{value:"profit",children:"Highest Profit"}),(0,r.jsx)("option",{value:"loss",children:"Highest Loss"}),(0,r.jsx)("option",{value:"pair",children:"Trading Pair"})]}),(0,r.jsx)("div",{className:"absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 9l-7 7-7-7"})})})]})]})]}),(0,r.jsxs)("div",{className:"flex-1 lg:max-w-md",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Trades"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,r.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),placeholder:"Search by pair, strategy, setup...",className:"w-full pl-9 sm:pl-12 pr-4 py-2.5 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 shadow-sm hover:shadow-md text-sm sm:text-base"}),v&&(0,r.jsx)("button",{onClick:()=>y(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:h.length}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Trades"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:h.filter(e=>"win"===e.status).length}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Wins"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-red-600",children:h.filter(e=>"loss"===e.status).length}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Losses"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-2xl sm:text-3xl font-bold text-blue-600",children:[h.length>0&&Math.round(h.filter(e=>"win"===e.status).length/h.filter(e=>e.status).length*100)||0,"%"]}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Win Rate"})]})]})})]}),h.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6",children:h.map(e=>{var t,s;return(0,r.jsxs)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-blue-50/30 rounded-2xl sm:rounded-3xl border border-gray-200/60 p-4 sm:p-6 shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-[1.02]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("span",{className:"text-white text-sm sm:text-base font-bold",children:(null==(t=e.tradingPair)?void 0:t.split("/")[0])||"N/A"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-base sm:text-lg font-bold text-gray-900",children:e.tradingPair}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:eo(e.dateTime||e.createdAt)})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"inline-flex px-2 py-1 rounded-lg text-xs font-medium border ".concat(ec(e.direction)),children:(null==(s=e.direction)?void 0:s.toUpperCase())||"N/A"}),(0,r.jsx)("span",{className:"inline-flex px-2 py-1 rounded-lg text-xs font-medium border ".concat(ed(e.status)),children:e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"Pending"})]})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"bg-white/50 rounded-xl p-3 border border-gray-200/50",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Price"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e.entryPrice||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white/50 rounded-xl p-3 border border-gray-200/50",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Take Profit"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:e.takeProfit||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white/50 rounded-xl p-3 border border-gray-200/50",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Stop Loss"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:e.stopLoss||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white/50 rounded-xl p-3 border border-gray-200/50",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"P&L"}),(0,r.jsx)("p",{className:"text-sm font-semibold ".concat((e.actualProfit||0)>0?"text-green-600":0>(e.actualProfit||0)?"text-red-600":"text-gray-600"),children:ei(e.actualProfit||0)})]})]}),(e.strategy||e.setup)&&(0,r.jsxs)("div",{className:"bg-white/50 rounded-xl p-3 border border-gray-200/50",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Strategy & Setup"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.strategy||e.setup||"N/A"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>et(e),className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"View Details",children:(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,r.jsx)("button",{onClick:()=>es(e),className:"p-2 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"Edit Trade",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("button",{onClick:()=>er(e),className:"p-2 text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"Update Status",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,r.jsx)("button",{onClick:()=>ea(e),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"Delete Trade",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.weekday||"N/A"})]})]},e._id||e.id)})}):(0,r.jsxs)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-blue-50/30 rounded-2xl sm:rounded-3xl border border-gray-200/60 p-8 sm:p-12 shadow-lg text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-6 bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"No AM Trades Found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6 text-sm sm:text-base",children:v||"all"!==N?"No trades match your current filters. Try adjusting your search or filter criteria.":"Start building your AM trading journal by adding your first morning session trade."}),(0,r.jsxs)("button",{onClick:()=>t.push("/am-trade/add-am-trade"),className:"px-6 py-3 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:via-purple-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 flex items-center space-x-2 mx-auto",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{children:"Add Your First AM Trade"})]})]})]})}),G&&(0,r.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-gray-900/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md transform transition-all",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Account"}),(0,r.jsx)("button",{onClick:()=>{X(!1),Z({name:"",balance:"",tag:"personal"})},className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"px-6 py-4 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name"}),(0,r.jsx)("input",{type:"text",value:Y.name,onChange:e=>Z({...Y,name:e.target.value}),placeholder:"e.g., My AM Trading Account",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Initial Balance"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,r.jsx)("input",{type:"number",value:Y.balance,onChange:e=>Z({...Y,balance:e.target.value}),placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Account Type"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2",children:[{value:"personal",label:"Personal",color:"bg-blue-600"},{value:"business",label:"Business",color:"bg-green-600"},{value:"demo",label:"Demo",color:"bg-purple-600"},{value:"forex",label:"Forex",color:"bg-orange-600"},{value:"crypto",label:"Crypto",color:"bg-indigo-600"}].map(e=>(0,r.jsxs)("button",{onClick:()=>Z({...Y,tag:e.value}),className:"flex items-center space-x-3 p-3 rounded-lg border-2 transition-all ".concat(Y.tag===e.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(e.color)}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e.label})]},e.value))})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat({personal:"bg-blue-600",business:"bg-green-600",demo:"bg-purple-600",forex:"bg-orange-600",crypto:"bg-indigo-600"}[Y.tag]||"bg-gray-600")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:Y.name||"Account Name"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["$",Y.balance?parseFloat(Y.balance).toLocaleString():"0.00"," • ",{personal:"Personal",business:"Business",demo:"Demo",forex:"Forex",crypto:"Crypto"}[Y.tag]||"Personal"]})]})]})]})]}),(0,r.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{X(!1),Z({name:"",balance:"",tag:"personal"})},className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{onClick:K,disabled:!Y.name||!Y.balance,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{children:"Add Account"})]})]})})]})}),L&&E&&(0,r.jsx)("div",{className:"fixed inset-0 backdrop-blur-md bg-gray-900/60 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-2xl w-full max-w-4xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden transform transition-all duration-300",children:[(0,r.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 via-purple-50 to-indigo-50",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900",children:"Trade Details"}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:[E.tradingPair," • ",eo(E.dateTime||E.createdAt)]})]}),(0,r.jsx)("button",{onClick:()=>C(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-white/50 transition-all duration-200 self-end sm:self-auto transform hover:scale-110",children:(0,r.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[70vh] sm:max-h-[60vh]",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Date & Time Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Date & Time"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:eo(E.dateTime||E.createdAt)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Weekday"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.weekday||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Month"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.month||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Quarter"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.quarter||"N/A"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-green-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Basic Trade Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Trading Pair"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-blue-600",children:E.tradingPair||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Direction"}),(0,r.jsx)("span",{className:"inline-flex px-2 py-1 rounded-lg text-xs font-medium border ".concat(ec(E.direction)),children:(null==(e=E.direction)?void 0:e.toUpperCase())||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Account Size"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:ei(E.accountSize)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Price"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-blue-600",children:E.entryPrice||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Take Profit"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:E.takeProfit||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Stop Loss"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:E.stopLoss||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk Percent"}),(0,r.jsxs)("p",{className:"text-sm font-semibold",children:[E.riskPercent||"2","%"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),(0,r.jsx)("span",{className:"inline-flex px-2 py-1 rounded-lg text-xs font-medium border ".concat(ed(E.status)),children:E.status?E.status.charAt(0).toUpperCase()+E.status.slice(1):"Pending"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Actual P&L"}),(0,r.jsx)("p",{className:"text-sm font-semibold ".concat((E.actualProfit||0)>0?"text-green-600":0>(E.actualProfit||0)?"text-red-600":"text-gray-600"),children:ei(E.actualProfit||0)})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-purple-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"AM Trade Methodology"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Setup"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.setup||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"HTF Framework"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.htfFramework||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Strategy"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.strategy||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Daily Profile"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.dailyProfile||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Candle"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.entryCandle||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Time"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.entryTime||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Timeframe"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.entryTimeFrame||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Confluence"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.entryConfluence||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Duration"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.duration||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Planned R:R"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.plannedRR||"N/A"})]})]})]}),E.calculatedResults&&(0,r.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-4 border border-yellow-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-yellow-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Calculated Results"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk Amount"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:ei(E.calculatedResults.riskAmount||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Lot Size"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:E.calculatedResults.lotSize||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Potential Profit"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:ei(E.calculatedResults.potentialProfit||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Potential Loss"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:ei(E.calculatedResults.potentialLoss||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Profit Pips"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:E.calculatedResults.profitPips||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Loss Pips"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:E.calculatedResults.lossPips||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk:Reward"}),(0,r.jsxs)("p",{className:"text-sm font-semibold text-blue-600",children:["1:",E.calculatedResults.riskRewardRatio||0]})]})]})]}),(E.notes||E.analysis||E.riskManagementLessons)&&(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Notes & Analysis"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[E.analysis&&(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Trade Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:E.analysis})]}),E.notes&&(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Trade Notes"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:E.notes})]}),E.riskManagementLessons&&(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Risk Management Lessons"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:E.riskManagementLessons})]})]})]}),E.tags&&(0,r.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-4 border border-indigo-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-indigo-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Tags"]}),(0,r.jsx)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:(0,r.jsx)("p",{className:"text-sm text-gray-600",children:E.tags})})]})]})}),(0,r.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-t border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>C(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200",children:"Close"}),(0,r.jsxs)("button",{onClick:()=>{C(!1),es(E)},className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200 flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,r.jsx)("span",{children:"Edit Trade"})]})]})})]})}),S&&E&&(0,r.jsx)("div",{className:"fixed inset-0 backdrop-blur-md bg-gray-900/60 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-2xl w-full max-w-6xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden transform transition-all duration-300",children:[(0,r.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 bg-gradient-to-r from-green-50 via-emerald-50 to-teal-50",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900",children:"Edit Trade"}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:[E.tradingPair," • ",eo(E.dateTime||E.createdAt)]})]}),(0,r.jsx)("button",{onClick:()=>A(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-white/50 transition-all duration-200 self-end sm:self-auto transform hover:scale-110",children:(0,r.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[70vh] sm:max-h-[60vh]",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Basic Trade Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Pair *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:W.tradingPair||"",onChange:e=>{let t={...W,tradingPair:e.target.value};H(t),J(eg(t))},className:"w-full px-3 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ".concat(I.tradingPair?"border-red-300 bg-red-50":"border-gray-300"),children:[(0,r.jsx)("option",{value:"",children:"Select Trading Pair"}),Object.entries(em).map(e=>{let[t,s]=e;return(0,r.jsx)("optgroup",{label:t.charAt(0).toUpperCase()+t.slice(1),children:s.map(e=>(0,r.jsxs)("option",{value:e.pair,children:[e.pair," - ",e.name]},e.pair))},t)})]}),I.tradingPair&&(0,r.jsx)("p",{className:"text-red-600 text-xs mt-1",children:I.tradingPair})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direction"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{value:W.direction||"",onChange:e=>H({...W,direction:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Auto-detect"}),(0,r.jsx)("option",{value:"long",children:"Long (Buy)"}),(0,r.jsx)("option",{value:"short",children:"Short (Sell)"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Size"}),(0,r.jsx)("input",{type:"number",value:W.accountSize||"",onChange:e=>{let t={...W,accountSize:e.target.value};H(t),J(eg(t))},placeholder:"Enter account size",className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Price *"}),(0,r.jsx)("input",{type:"number",step:"any",value:W.entryPrice||"",onChange:e=>{let t={...W,entryPrice:e.target.value};if(H(t),t.entryPrice&&t.takeProfit){let e=parseFloat(t.entryPrice),s=parseFloat(t.takeProfit);e&&s&&(t.direction=s>e?"long":"short",H(t))}J(eg(t))},placeholder:"Enter entry price",className:"w-full px-3 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ".concat(I.entryPrice?"border-red-300 bg-red-50":"border-gray-300")}),I.entryPrice&&(0,r.jsx)("p",{className:"text-red-600 text-xs mt-1",children:I.entryPrice})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Take Profit *"}),(0,r.jsx)("input",{type:"number",step:"any",value:W.takeProfit||"",onChange:e=>{let t={...W,takeProfit:e.target.value};if(H(t),t.entryPrice&&t.takeProfit){let e=parseFloat(t.entryPrice),s=parseFloat(t.takeProfit);e&&s&&(t.direction=s>e?"long":"short",H(t))}J(eg(t))},placeholder:"Enter take profit",className:"w-full px-3 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ".concat(I.takeProfit?"border-red-300 bg-red-50":"border-gray-300")}),I.takeProfit&&(0,r.jsx)("p",{className:"text-red-600 text-xs mt-1",children:I.takeProfit})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stop Loss *"}),(0,r.jsx)("input",{type:"number",step:"any",value:W.stopLoss||"",onChange:e=>{let t={...W,stopLoss:e.target.value};H(t),J(eg(t))},placeholder:"Enter stop loss",className:"w-full px-3 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ".concat(I.stopLoss?"border-red-300 bg-red-50":"border-gray-300")}),I.stopLoss&&(0,r.jsx)("p",{className:"text-red-600 text-xs mt-1",children:I.stopLoss})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-indigo-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Date & Time Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time"}),(0,r.jsx)("input",{type:"datetime-local",value:W.dateTime?new Date(W.dateTime).toISOString().slice(0,16):"",onChange:e=>ex(e.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weekday"}),(0,r.jsxs)("select",{value:W.weekday||"",onChange:e=>H({...W,weekday:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select Weekday"}),(0,r.jsx)("option",{value:"Monday",children:"Monday"}),(0,r.jsx)("option",{value:"Tuesday",children:"Tuesday"}),(0,r.jsx)("option",{value:"Wednesday",children:"Wednesday"}),(0,r.jsx)("option",{value:"Thursday",children:"Thursday"}),(0,r.jsx)("option",{value:"Friday",children:"Friday"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),(0,r.jsxs)("select",{value:W.month||"",onChange:e=>H({...W,month:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select Month"}),(0,r.jsx)("option",{value:"January",children:"January"}),(0,r.jsx)("option",{value:"February",children:"February"}),(0,r.jsx)("option",{value:"March",children:"March"}),(0,r.jsx)("option",{value:"April",children:"April"}),(0,r.jsx)("option",{value:"May",children:"May"}),(0,r.jsx)("option",{value:"June",children:"June"}),(0,r.jsx)("option",{value:"July",children:"July"}),(0,r.jsx)("option",{value:"August",children:"August"}),(0,r.jsx)("option",{value:"September",children:"September"}),(0,r.jsx)("option",{value:"October",children:"October"}),(0,r.jsx)("option",{value:"November",children:"November"}),(0,r.jsx)("option",{value:"December",children:"December"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quarter"}),(0,r.jsxs)("select",{value:W.quarter||"",onChange:e=>H({...W,quarter:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select Quarter"}),(0,r.jsx)("option",{value:"Q1",children:"Q1 (Jan-Mar)"}),(0,r.jsx)("option",{value:"Q2",children:"Q2 (Apr-Jun)"}),(0,r.jsx)("option",{value:"Q3",children:"Q3 (Jul-Sep)"}),(0,r.jsx)("option",{value:"Q4",children:"Q4 (Oct-Dec)"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-purple-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"AM Trade Methodology"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Setup"}),(0,r.jsxs)("select",{value:W.setup||"",onChange:e=>H({...W,setup:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select setup"}),(0,r.jsx)("option",{value:"Continuation Day",children:"Continuation Day"}),(0,r.jsx)("option",{value:"Reversal Day",children:"Reversal Day"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HTF Framework"}),(0,r.jsxs)("select",{value:W.htfFramework||"",onChange:e=>H({...W,htfFramework:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select HTF framework"}),(0,r.jsx)("option",{value:"Manipulation",children:"Manipulation"}),(0,r.jsx)("option",{value:"Divergence",children:"Divergence"}),(0,r.jsx)("option",{value:"Opposing Candle",children:"Opposing Candle"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Strategy"}),(0,r.jsx)("input",{type:"text",value:W.strategy||"",onChange:e=>H({...W,strategy:e.target.value}),placeholder:"e.g., Breakout, Support/Resistance, Trend Following",className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Profile"}),(0,r.jsxs)("select",{value:W.dailyProfile||"",onChange:e=>H({...W,dailyProfile:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select daily profile"}),(0,r.jsx)("option",{value:"18:00 Reversal",children:"18:00 Reversal"}),(0,r.jsx)("option",{value:"01:00 Reversal",children:"01:00 Reversal"}),(0,r.jsx)("option",{value:"08:00 Reversal",children:"08:00 Reversal"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Candle"}),(0,r.jsxs)("select",{value:W.entryCandle||"",onChange:e=>H({...W,entryCandle:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select entry candle"}),(0,r.jsx)("option",{value:"08:00 Candle",children:"08:00 Candle"}),(0,r.jsx)("option",{value:"01:00 Candle",children:"01:00 Candle"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Time"}),(0,r.jsxs)("select",{value:W.entryTime||"",onChange:e=>H({...W,entryTime:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select entry time"}),(0,r.jsx)("option",{value:"9:30-9:59",children:"9:30-9:59"}),(0,r.jsx)("option",{value:"7:00-7:59",children:"7:00-7:59"}),(0,r.jsx)("option",{value:"4:00-4:59",children:"4:00-4:59"}),(0,r.jsx)("option",{value:"2:00-2:59",children:"2:00-2:59"}),(0,r.jsx)("option",{value:"8:00-8:29",children:"8:00-8:29"}),(0,r.jsx)("option",{value:"12:00-12:59",children:"12:00-12:59"}),(0,r.jsx)("option",{value:"3:00-3:59",children:"3:00-3:59"}),(0,r.jsx)("option",{value:"6:00-6:59",children:"6:00-6:59"}),(0,r.jsx)("option",{value:"11:00-11:59",children:"11:00-11:59"}),(0,r.jsx)("option",{value:"10:00-10:59",children:"10:00-10:59"}),(0,r.jsx)("option",{value:"5:00-5:59",children:"5:00-5:59"}),(0,r.jsx)("option",{value:"9:00-9:29",children:"9:00-9:29"}),(0,r.jsx)("option",{value:"1:00-1:59",children:"1:00-1:59"}),(0,r.jsx)("option",{value:"14:00-14:59",children:"14:00-14:59"}),(0,r.jsx)("option",{value:"13:00-13:59",children:"13:00-13:59"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Timeframe"}),(0,r.jsxs)("select",{value:W.entryTimeFrame||"",onChange:e=>H({...W,entryTimeFrame:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select time frame"}),(0,r.jsx)("option",{value:"1 minute",children:"1 minute"}),(0,r.jsx)("option",{value:"< 5 minutes",children:"< 5 minutes"}),(0,r.jsx)("option",{value:"5 minutes",children:"5 minutes"}),(0,r.jsx)("option",{value:"15 minutes",children:"15 minutes"}),(0,r.jsx)("option",{value:"1 hour",children:"1 hour"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Confluence"}),(0,r.jsxs)("select",{value:W.entryConfluence||"",onChange:e=>H({...W,entryConfluence:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select confluence"}),(0,r.jsx)("option",{value:"Short-term Swing",children:"Short-term Swing"}),(0,r.jsx)("option",{value:"Opposing Candle",children:"Opposing Candle"}),(0,r.jsx)("option",{value:"Volatility Driver",children:"Volatility Driver"}),(0,r.jsx)("option",{value:"Divergence",children:"Divergence"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),(0,r.jsx)("input",{type:"text",value:W.duration||"",onChange:e=>H({...W,duration:e.target.value}),placeholder:"e.g. 45 minutes",className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Percent"}),(0,r.jsxs)("select",{value:W.riskPercent||"2%",onChange:e=>{let t={...W,riskPercent:e.target.value};H(t),J(eg(t))},className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select risk %"}),(0,r.jsx)("option",{value:"0.25%",children:"0.25% - Conservative"}),(0,r.jsx)("option",{value:"0.5%",children:"0.5% - Moderate"}),(0,r.jsx)("option",{value:"1%",children:"1% - Standard"}),(0,r.jsx)("option",{value:"2%",children:"2% - Aggressive"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Planned R:R"}),(0,r.jsxs)("select",{value:W.plannedRR||"",onChange:e=>H({...W,plannedRR:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select RR"}),(0,r.jsx)("option",{value:"2R",children:"2R - Conservative"}),(0,r.jsx)("option",{value:"3R",children:"3R - Balanced"}),(0,r.jsx)("option",{value:"4R",children:"4R - Aggressive"}),(0,r.jsx)("option",{value:"5R",children:"5R - High Risk"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Analysis & Notes"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Analysis"}),(0,r.jsx)("textarea",{value:W.analysis||"",onChange:e=>H({...W,analysis:e.target.value}),placeholder:"Detailed analysis of the trade setup, market conditions, technical analysis...",rows:4,className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Notes"}),(0,r.jsx)("textarea",{value:W.notes||"",onChange:e=>H({...W,notes:e.target.value}),placeholder:"General notes, observations, feelings during the trade...",rows:3,className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Management Lessons"}),(0,r.jsx)("textarea",{value:W.riskManagementLessons||"",onChange:e=>H({...W,riskManagementLessons:e.target.value}),placeholder:"What did you learn about risk management from this trade?",rows:3,className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,r.jsx)("input",{type:"text",value:W.tags||"",onChange:e=>H({...W,tags:e.target.value}),placeholder:"e.g., breakout, news, high-probability, mistake",className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]})]}),V&&Object.keys(V).length>0&&(0,r.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-4 border border-yellow-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-yellow-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Live Calculated Results"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk Amount"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:ei(V.riskAmount||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Lot Size"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:V.lotSize||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Potential Profit"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:ei(V.potentialProfit||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Potential Loss"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:ei(V.potentialLoss||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Profit Pips"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:V.profitPips||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Loss Pips"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:V.lossPips||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk:Reward"}),(0,r.jsxs)("p",{className:"text-sm font-semibold text-blue-600",children:["1:",V.riskRewardRatio||0]})]})]})]})]})}),(0,r.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-t border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>A(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200",disabled:F,children:"Cancel"}),(0,r.jsx)("button",{onClick:en,disabled:F,className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center space-x-2",children:F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Saving..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 13l4 4L19 7"})}),(0,r.jsx)("span",{children:"Save Changes"})]})})]})})]})}),D&&E&&(0,r.jsx)(d,{trade:E,accounts:g,onClose:()=>{M(!1),B(null),_({})},onStatusUpdated:(e,t)=>{u(t=>t.map(t=>t._id===e._id?e:t)),t&&b(e=>e.map(e=>e.id===t.id||e._id===t._id?t:e)),M(!1),B(null),_({})}}),!1,T&&E&&(0,r.jsx)("div",{className:"fixed inset-0 backdrop-blur-md bg-gray-900/60 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md transform transition-all duration-300",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Trade"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]})}),(0,r.jsxs)("div",{className:"px-6 py-4",children:[(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this trade? This will permanently remove:"}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Trading Pair:"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:E.tradingPair})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Date:"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:eo(E.dateTime||E.createdAt)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"P&L:"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat((E.actualProfit||0)>0?"text-green-600":0>(E.actualProfit||0)?"text-red-600":"text-gray-600"),children:ei(E.actualProfit||0)})]})]})]}),(0,r.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-2xl",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>R(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200",disabled:F,children:"Cancel"}),(0,r.jsx)("button",{onClick:el,disabled:F,className:"px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center space-x-2",children:F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Deleting..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,r.jsx)("span",{children:"Delete Trade"})]})})]})})]})})]})}function d(e){var t,s,l,i,o,d,c,x,m,u,h,p,g,b;let{trade:j,accounts:f,onClose:v,onStatusUpdated:y}=e,[N,w]=(0,a.useState)("win"===j.status||"loss"===j.status?j.status:"win"),[k,P]=(0,a.useState)(!1),[L,C]=(0,a.useState)("status"),S=e=>null==e||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),[A,D]=(0,a.useState)({actualEntry:j.actualEntry||j.entryPrice||"",actualExit:j.actualExit||"",stopLoss:j.stopLoss||"",takeProfit:j.takeProfit||"",exitReason:j.exitReason||"",notes:j.notes||"",actualProfit:j.actualProfit||"",exitType:j.actualExit?"price":"other",manualPL:j.actualProfit||"",exitDescription:j.exitDescription||"",closingImage:null}),M=e=>{let t=A.actualExit===j.takeProfit||A.actualExit===j.stopLoss;(!A.actualExit&&!A.manualPL||t||F)&&("win"===e&&j.takeProfit?(D(e=>({...e,actualExit:j.takeProfit,exitType:"price"})),U("win")):"loss"===e&&j.stopLoss&&(D(e=>({...e,actualExit:j.stopLoss,exitType:"price"})),U("loss")))},[T,R]=(0,a.useState)({actualPL:0,pips:0,riskRewardRatio:0,accountImpact:0}),[E,B]=(0,a.useState)({previewPL:0,previewPips:0,previewRiskReward:0,previewAccountImpact:0}),[F,U]=(0,a.useState)(null),I=f.find(e=>e.id===j.accountId||e._id===j.accountId);console.log("Account finding debug:",{tradeAccountId:j.accountId,availableAccounts:f.map(e=>({id:e.id||e._id,name:e.name})),foundAccount:I?{id:I.id||I._id,name:I.name,balance:I.balance}:null});let z=e=>{var t;let s,r=parseFloat(e.actualEntry)||0,a=parseFloat(e.actualExit)||0,l=parseFloat(e.stopLoss)||0,n=parseFloat(e.takeProfit)||0,i=parseFloat(e.manualPL)||0;if("other"===e.exitType){let e=(null==I?void 0:I.balance)||1e4;return{actualPL:i,pips:0,riskRewardRatio:0,accountImpact:parseFloat((i?i/e*100:0).toFixed(2))}}if(!r||!a)return{actualPL:0,pips:0,riskRewardRatio:0,accountImpact:0};let o=1e4*Math.abs(a-r);s="long"===j.direction?a-r:r-a;let d=1e4*s*10*((null==(t=j.calculatedResults)?void 0:t.lotSize)||.1),c=0;if(l&&n&&r){let e=1e4*Math.abs(r-l);c=1e4*Math.abs(n-r)/e}let x=d/((null==I?void 0:I.balance)||1e4)*100;return{actualPL:parseFloat(d.toFixed(2)),pips:parseFloat(o.toFixed(1)),riskRewardRatio:parseFloat(c.toFixed(2)),accountImpact:parseFloat(x.toFixed(2))}};(0,a.useEffect)(()=>{let e=z(A);R(e),"price"===A.exitType&&e.actualPL!==parseFloat(A.actualProfit||0)?D(t=>({...t,actualProfit:e.actualPL.toString()})):"other"===A.exitType&&A.manualPL!==A.actualProfit&&D(e=>({...e,actualProfit:A.manualPL}))},[A.actualEntry,A.actualExit,A.stopLoss,A.takeProfit,A.exitType,A.manualPL]);let W=async e=>{e.preventDefault(),P(!0);try{let e=n.A.get("auth-token")||localStorage.getItem("auth-token"),t=localStorage.getItem("user"),s=t?JSON.parse(t):null,r=(null==s?void 0:s.id)||(null==s?void 0:s._id),a=[];A.closingImage?a.push(A.closingImage):j.closingImages&&j.closingImages.length>0&&a.push(...j.closingImages);let l={status:N,actualEntry:A.actualEntry?parseFloat(A.actualEntry):null,actualExit:"price"===A.exitType&&A.actualExit?parseFloat(A.actualExit):null,stopLoss:A.stopLoss?parseFloat(A.stopLoss):j.stopLoss,takeProfit:A.takeProfit?parseFloat(A.takeProfit):j.takeProfit,exitReason:A.exitReason,notes:A.notes,actualProfit:T.actualPL,exitType:A.exitType,exitDescription:"other"===A.exitType?A.exitDescription:null,closingImages:a,whatWentWell:A.whatWentWell,improvements:A.improvements,lessons:A.lessons,calculatedResults:{...j.calculatedResults,actualPL:T.actualPL,pips:T.pips,riskRewardRatio:T.riskRewardRatio,accountImpact:T.accountImpact}},i=await fetch("/api/am-trades",{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({tradeId:j._id,userId:r,...l})}),o=await i.json();if(i.ok&&o.success){let t=null;if(0!==T.actualPL&&I){let s=I.balance+T.actualPL;console.log("Updating account balance:",{currentBalance:I.balance,actualPL:T.actualPL,newBalance:s,accountId:I.id||I._id});let a=await fetch("/api/accounts",{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({accountId:I.id||I._id,userId:r,updates:{balance:s}})});if(a.ok)t={...I,balance:s},console.log("Account balance updated successfully:",t);else{let e=await a.json();console.error("Failed to update account balance:",e)}}else console.log("No balance update needed:",{actualPL:T.actualPL,hasCurrentAccount:!!I});y({...j,...l},t)}else alert("Failed to update AM trade status: "+(o.message||"Unknown error"))}catch(e){console.error("Error updating AM trade status:",e),alert("Error updating AM trade status: "+e.message)}finally{P(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl border border-gray-100",children:[(0,r.jsxs)("div",{className:"relative p-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Update AM Trade Status"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,r.jsx)("span",{className:"text-gray-600 font-semibold",children:j.tradingPair}),(0,r.jsx)("span",{className:"text-gray-400",children:"•"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:["long"===j.direction?(0,r.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}):(0,r.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),(0,r.jsx)("span",{className:"text-gray-600 font-medium",children:null==(t=j.direction)?void 0:t.toUpperCase()})]}),(0,r.jsx)("span",{className:"text-gray-400",children:"•"}),(0,r.jsx)("div",{className:"flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium ".concat("win"===j.status?"bg-green-100 text-green-700":"loss"===j.status?"bg-red-100 text-red-700":"active"===j.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:(0,r.jsxs)("span",{children:["Current: ",(null==(s=j.status)?void 0:s.charAt(0).toUpperCase())+(null==(l=j.status)?void 0:l.slice(1))||"Pending"]})})]})]})]}),(0,r.jsx)("button",{onClick:v,className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-white/80 rounded-2xl transition-all duration-200",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 to-emerald-600"})]}),(0,r.jsx)("div",{className:"px-8 border-b border-gray-200",children:(0,r.jsx)("div",{className:"flex space-x-8",children:[{id:"status",label:"Trade Status",icon:"\uD83D\uDCCA"},{id:"execution",label:"Execution Details",icon:"⚡"},{id:"analysis",label:"Post-Trade Analysis",icon:"\uD83D\uDCC8"}].map(e=>(0,r.jsxs)("button",{onClick:()=>C(e.id),className:"py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 ".concat(L===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})}),(0,r.jsxs)("div",{className:"flex-1 p-8 overflow-y-auto",children:["status"===L&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-2xl p-6 border border-gray-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Select Trade Outcome"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{onClick:()=>{w("win"),M("win")},className:"relative p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 transform hover:scale-105 ".concat("win"===N?"border-green-500 bg-gradient-to-br from-green-50 to-emerald-50 shadow-lg":"border-gray-200 bg-white hover:border-green-300 hover:shadow-md"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("win"===N?"bg-green-500":"bg-gray-300"),children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"Winning Trade"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Trade closed in profit"})]})]}),"win"===N&&(0,r.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),j.takeProfit&&(0,r.jsxs)("div",{className:"bg-white/70 rounded-lg p-3 border border-green-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Target Price"}),(0,r.jsx)("p",{className:"text-lg font-bold text-green-600",children:j.takeProfit})]})]}),(0,r.jsxs)("div",{onClick:()=>{w("loss"),M("loss")},className:"relative p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 transform hover:scale-105 ".concat("loss"===N?"border-red-500 bg-gradient-to-br from-red-50 to-rose-50 shadow-lg":"border-gray-200 bg-white hover:border-red-300 hover:shadow-md"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("loss"===N?"bg-red-500":"bg-gray-300"),children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"Losing Trade"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Trade closed in loss"})]})]}),"loss"===N&&(0,r.jsx)("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),j.stopLoss&&(0,r.jsxs)("div",{className:"bg-white/70 rounded-lg p-3 border border-red-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Stop Loss"}),(0,r.jsx)("p",{className:"text-lg font-bold text-red-600",children:j.stopLoss})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Expected Results Preview"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Expected P&L"}),(0,r.jsx)("p",{className:"text-xl font-bold ".concat("win"===N?"text-green-600":"text-red-600"),children:S("win"===N?(null==(i=j.calculatedResults)?void 0:i.potentialProfit)||0:-((null==(o=j.calculatedResults)?void 0:o.potentialLoss)||0))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Expected Pips"}),(0,r.jsx)("p",{className:"text-xl font-bold ".concat("win"===N?"text-green-600":"text-red-600"),children:"win"===N?"+".concat((null==(d=j.calculatedResults)?void 0:d.profitPips)||0):"-".concat((null==(c=j.calculatedResults)?void 0:c.lossPips)||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Risk:Reward"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:["1:",(null==(x=j.calculatedResults)?void 0:x.riskRewardRatio)||0]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Account Impact"}),(0,r.jsxs)("p",{className:"text-xl font-bold ".concat("win"===N?"text-green-600":"text-red-600"),children:["win"===N?"+":"-",(((null==(m=j.calculatedResults)?void 0:m.potentialProfit)||(null==(u=j.calculatedResults)?void 0:u.potentialLoss)||0)/((null==I?void 0:I.balance)||1e4)*100).toFixed(2),"%"]})]})]})]})]}),"execution"===L&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-2xl p-6 border border-gray-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"How was the trade executed?"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{onClick:()=>D(e=>({...e,exitType:"price"})),className:"p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 ".concat("price"===A.exitType?"border-purple-500 bg-gradient-to-br from-purple-50 to-indigo-50 shadow-lg":"border-gray-200 bg-white hover:border-purple-300 hover:shadow-md"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("price"===A.exitType?"bg-purple-500":"bg-gray-300"),children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"Price-based Exit"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Specify exact exit price"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Use this when you know the exact price at which the trade was closed."})]}),(0,r.jsxs)("div",{onClick:()=>D(e=>({...e,exitType:"other"})),className:"p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 ".concat("other"===A.exitType?"border-orange-500 bg-gradient-to-br from-orange-50 to-yellow-50 shadow-lg":"border-gray-200 bg-white hover:border-orange-300 hover:shadow-md"),children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat("other"===A.exitType?"bg-orange-500":"bg-gray-300"),children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"Manual P&L Entry"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Enter profit/loss directly"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Use this for complex exits, partial closes, or when you only know the final P&L."})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Execution Details"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Actual Entry Price",(0,r.jsx)("span",{className:"text-gray-500 ml-1",children:"(Optional)"})]}),(0,r.jsx)("input",{type:"number",step:"any",value:A.actualEntry,onChange:e=>{let t={...A,actualEntry:e.target.value};D(t),R(z(t))},placeholder:"Planned: ".concat(j.entryPrice||"N/A"),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to use planned entry price"})]}),"price"===A.exitType?(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Actual Exit Price *",F&&(0,r.jsxs)("span",{className:"text-blue-600 text-xs ml-2",children:["(Auto-filled from ","win"===F?"Take Profit":"Stop Loss",")"]})]}),(0,r.jsx)("input",{type:"number",step:"any",value:A.actualExit,onChange:e=>{let t={...A,actualExit:e.target.value};D(t),R(z(t)),U(null)},placeholder:"win"===N?"Target: ".concat(j.takeProfit||"N/A"):"Stop: ".concat(j.stopLoss||"N/A"),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Profit/Loss *"}),(0,r.jsx)("input",{type:"number",step:"any",value:A.manualPL,onChange:e=>{let t={...A,manualPL:e.target.value};D(t),R(z(t))},placeholder:"Enter final P&L amount",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Positive for profit, negative for loss"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exit Reason"}),(0,r.jsxs)("select",{value:A.exitReason,onChange:e=>D(t=>({...t,exitReason:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select reason..."}),(0,r.jsx)("option",{value:"take-profit-hit",children:"Take Profit Hit"}),(0,r.jsx)("option",{value:"stop-loss-hit",children:"Stop Loss Hit"}),(0,r.jsx)("option",{value:"manual-close-profit",children:"Manual Close (Profit)"}),(0,r.jsx)("option",{value:"manual-close-loss",children:"Manual Close (Loss)"}),(0,r.jsx)("option",{value:"break-even",children:"Break Even Close"}),(0,r.jsx)("option",{value:"partial-close",children:"Partial Close"}),(0,r.jsx)("option",{value:"news-event",children:"News Event"}),(0,r.jsx)("option",{value:"time-based",children:"Time-Based Exit"}),(0,r.jsx)("option",{value:"technical-signal",children:"Technical Signal"}),(0,r.jsx)("option",{value:"risk-management",children:"Risk Management"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exit Description"}),(0,r.jsx)("textarea",{value:A.exitDescription,onChange:e=>D(t=>({...t,exitDescription:e.target.value})),placeholder:"Describe what happened during the exit...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]})]}),(0,r.jsxs)("div",{className:"mt-8 p-6 bg-white rounded-xl border border-blue-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Live Calculation Results"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Actual P&L"}),(0,r.jsx)("p",{className:"text-xl font-bold ".concat(T.actualPL>0?"text-green-600":T.actualPL<0?"text-red-600":"text-gray-600"),children:S(T.actualPL)})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Pips"}),(0,r.jsxs)("p",{className:"text-xl font-bold ".concat(T.actualPL>0?"text-green-600":T.actualPL<0?"text-red-600":"text-gray-600"),children:[T.actualPL>0?"+":"",T.pips]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk:Reward"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:["1:",T.riskRewardRatio]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Account Impact"}),(0,r.jsxs)("p",{className:"text-xl font-bold ".concat(T.accountImpact>0?"text-green-600":T.accountImpact<0?"text-red-600":"text-gray-600"),children:[T.accountImpact>0?"+":"",T.accountImpact,"%"]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Closing Screenshot",(0,r.jsx)("span",{className:"text-sm font-normal text-gray-600 ml-2",children:"(Optional)"})]}),A.closingImage?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:A.closingImage,alt:"Closing screenshot",className:"w-full max-w-md mx-auto rounded-xl border border-green-200"}),(0,r.jsx)("button",{onClick:()=>{D(e=>({...e,closingImage:null}))},className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors duration-200",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,r.jsxs)("div",{className:"border-2 border-dashed border-green-300 rounded-xl p-8 text-center",children:[(0,r.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Upload a screenshot of your trade closure"}),(0,r.jsxs)("label",{className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-xl cursor-pointer hover:bg-green-700 transition-colors duration-200",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Choose Image",(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];if(t){if(t.size>5242880)return void alert("Image size should be less than 5MB");let e=new FileReader;e.onload=e=>{D(t=>({...t,closingImage:e.target.result}))},e.readAsDataURL(t)}},className:"hidden"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"PNG, JPG up to 5MB"})]})]})]}),"analysis"===L&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-2xl p-6 border border-gray-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Post-Trade Analysis & Notes"]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Notes & Observations"}),(0,r.jsx)("textarea",{value:A.notes,onChange:e=>D(t=>({...t,notes:e.target.value})),placeholder:"What happened during this trade? Market conditions, emotions, key observations...",rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["What Went Well?",(0,r.jsx)("span",{className:"text-green-600 ml-1",children:"✓"})]}),(0,r.jsx)("textarea",{value:A.whatWentWell||"",onChange:e=>D(t=>({...t,whatWentWell:e.target.value})),placeholder:"What aspects of this trade were executed well? Good decisions, proper risk management, etc.",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["What Could Be Improved?",(0,r.jsx)("span",{className:"text-orange-600 ml-1",children:"⚠"})]}),(0,r.jsx)("textarea",{value:A.improvements||"",onChange:e=>D(t=>({...t,improvements:e.target.value})),placeholder:"What could have been done better? Entry timing, exit strategy, risk management, etc.",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Key Lessons Learned",(0,r.jsx)("span",{className:"text-blue-600 ml-1",children:"\uD83D\uDCA1"})]}),(0,r.jsx)("textarea",{value:A.lessons||"",onChange:e=>D(t=>({...t,lessons:e.target.value})),placeholder:"What are the key takeaways from this trade? How will this influence future trades?",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Final Performance Summary"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Planned vs Actual"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Planned P&L:"}),(0,r.jsx)("span",{className:"text-sm font-medium text-green-600",children:S((null==(h=j.calculatedResults)?void 0:h.potentialProfit)||0)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Actual P&L:"}),(0,r.jsx)("span",{className:"text-sm font-medium ".concat(T.actualPL>0?"text-green-600":T.actualPL<0?"text-red-600":"text-gray-600"),children:S(T.actualPL)})]}),(0,r.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Difference:"}),(0,r.jsx)("span",{className:"text-sm font-bold ".concat(T.actualPL-((null==(p=j.calculatedResults)?void 0:p.potentialProfit)||0)>0?"text-green-600":T.actualPL-((null==(g=j.calculatedResults)?void 0:g.potentialProfit)||0)<0?"text-red-600":"text-gray-600"),children:S(T.actualPL-((null==(b=j.calculatedResults)?void 0:b.potentialProfit)||0))})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Account Impact"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Previous Balance:"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:S((null==I?void 0:I.balance)||0)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"P&L Impact:"}),(0,r.jsxs)("span",{className:"text-sm font-medium ".concat(T.actualPL>0?"text-green-600":T.actualPL<0?"text-red-600":"text-gray-600"),children:[T.actualPL>0?"+":"",S(T.actualPL)]})]}),(0,r.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"New Balance:"}),(0,r.jsx)("span",{className:"text-sm font-bold text-blue-600",children:S(((null==I?void 0:I.balance)||0)+T.actualPL)})]})]})]})]})]})]})]}),(0,r.jsx)("div",{className:"px-8 py-6 border-t border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("span",{children:["Last updated: ",new Date(j.updatedAt||j.createdAt).toLocaleDateString()]})]})}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:v,className:"px-6 py-3 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200 font-medium",disabled:k,children:"Cancel"}),(0,r.jsx)("button",{onClick:W,disabled:k||!N,className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl flex items-center space-x-2",children:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Updating..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,r.jsx)("span",{children:"Update AM Trade Status"})]})})]})]})})]})})}},850:(e,t,s)=>{Promise.resolve().then(s.bind(s,229))},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},7383:(e,t,s)=>{"use strict";function r(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)e[r]=s[r]}return e}s.d(t,{A:()=>a});var a=function e(t,s){function a(e,a,l){if("undefined"!=typeof document){"number"==typeof(l=r({},s,l)).expires&&(l.expires=new Date(Date.now()+864e5*l.expires)),l.expires&&(l.expires=l.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var i in l)l[i]&&(n+="; "+i,!0!==l[i]&&(n+="="+l[i].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+n}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var s=document.cookie?document.cookie.split("; "):[],r={},a=0;a<s.length;a++){var l=s[a].split("="),n=l.slice(1).join("=");try{var i=decodeURIComponent(l[0]);if(r[i]=t.read(n,i),e===i)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){a(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},e=>{var t=t=>e(e.s=t);e.O(0,[387,441,684,358],()=>t(850)),_N_E=e.O()}]);