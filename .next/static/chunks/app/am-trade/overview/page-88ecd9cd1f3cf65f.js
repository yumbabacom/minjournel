(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{6225:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(5155),s=a(2115),l=a(5695),o=a(7383),n=a(5387),i=a(4065),d=a(2502);function c(){let e=(0,l.useRouter)(),[t,a]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0),[x,m]=(0,s.useState)([]),[u,g]=(0,s.useState)(null),[h,b]=(0,s.useState)(!1),[p,f]=(0,s.useState)({name:"",balance:"",tag:"personal"}),[v,j]=(0,s.useState)([]),[y,N]=(0,s.useState)([]),[w,k]=(0,s.useState)("all"),[A,S]=(0,s.useState)("all"),[C,P]=(0,s.useState)("all"),[L,T]=(0,s.useState)("all"),M=async()=>{try{let e=o.A.get("auth-token")||localStorage.getItem("auth-token");if(!e||!(null==t?void 0:t.id)&&!(null==t?void 0:t._id))return;let a=(null==t?void 0:t.id)||(null==t?void 0:t._id),r=await fetch("/api/am-trades?userId=".concat(a),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(r.ok){let e=await r.json();e.trades&&Array.isArray(e.trades)&&j(e.trades)}}catch(e){console.error("Error fetching AM trades:",e)}};(0,s.useEffect)(()=>{if(!u||!v.length)return void N([]);let e=v.filter(e=>String(e.accountId||e.account)===String(u));if("all"!==w){let t=new Date,a="7d"===w?7:"30d"===w?30:90,r=new Date(t.getTime()-24*a*36e5);e=e.filter(e=>new Date(e.dateTime||e.createdAt)>=r)}"all"!==A&&(e=e.filter(e=>"pending"===A?!e.status||"pending"===e.status:e.status===A)),"all"!==C&&(e=e.filter(e=>e.tradingPair===C)),"all"!==L&&(e=e.filter(e=>e.strategy===L)),N(e)},[v,u,w,A,C,L]),(0,s.useEffect)(()=>{(async()=>{try{let t=localStorage.getItem("user");if(t){let e=JSON.parse(t);a(e),c(!1);return}let r=o.A.get("auth-token")||localStorage.getItem("auth-token");if(!r)return void e.push("/login");let s=await fetch("/api/user",{headers:{Authorization:"Bearer ".concat(r)}});if(s.ok){let e=await s.json();a(e),localStorage.setItem("user",JSON.stringify(e)),await E(e)}else e.push("/login")}catch(t){console.error("Error fetching user data:",t),e.push("/login")}finally{c(!1)}})()},[e]),(0,s.useEffect)(()=>{((null==t?void 0:t.id)||(null==t?void 0:t._id))&&(E(t),M())},[t]),(0,s.useEffect)(()=>{u&&t&&M()},[u]);let F=(0,s.useMemo)(()=>{if(!y.length)return{totalTrades:0,winRate:0,totalProfit:0,avgWin:0,avgLoss:0,bestTrade:0,worstTrade:0,activePositions:0,profitFactor:0,sharpeRatio:0,maxDrawdown:0,winStreak:0,lossStreak:0};let e=y.filter(e=>e.status&&"pending"!==e.status),t=e.filter(e=>"win"===e.status),a=e.filter(e=>"loss"===e.status),r=y.filter(e=>!e.status||"pending"===e.status),s=e.reduce((e,t)=>e+(t.actualProfit||0),0),l=t.reduce((e,t)=>e+(t.actualProfit||0),0),o=Math.abs(a.reduce((e,t)=>e+(t.actualProfit||0),0)),n=e.length>0?t.length/e.length*100:0,i=t.length>0?l/t.length:0,d=a.length>0?o/a.length:0,c=e.map(e=>e.actualProfit||0),x=c.length>0?Math.max(...c):0,m=c.length>0?Math.min(...c):0,u=0,g=0,h=0,b=0;return e.forEach(e=>{"win"===e.status?(u++,g=0,h=Math.max(h,u)):"loss"===e.status&&(g++,u=0,b=Math.max(b,g))}),{totalTrades:y.length,winRate:parseFloat(n.toFixed(1)),totalProfit:parseFloat(s.toFixed(2)),avgWin:parseFloat(i.toFixed(2)),avgLoss:parseFloat(d.toFixed(2)),bestTrade:parseFloat(x.toFixed(2)),worstTrade:parseFloat(m.toFixed(2)),activePositions:r.length,profitFactor:parseFloat((o>0?l/o:l>0?1/0:0).toFixed(2)),winStreak:h,lossStreak:b}},[y]),B=(0,s.useMemo)(()=>[...new Set(v.map(e=>e.tradingPair).filter(Boolean))].sort(),[v]),W=(0,s.useMemo)(()=>[...new Set(v.map(e=>e.strategy).filter(Boolean))].sort(),[v]),I=e=>null==e||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),D=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",z=e=>({personal:"bg-blue-600",business:"bg-green-600",demo:"bg-purple-600",forex:"bg-orange-600",crypto:"bg-indigo-600"})[e]||"bg-gray-600",E=async e=>{try{let t=(null==e?void 0:e.id)||(null==e?void 0:e._id);if(!t)return void console.error("User ID not found");let a=o.A.get("auth-token")||localStorage.getItem("auth-token");if(!a)return void console.error("Authentication token is missing");let r=await fetch("/api/accounts?userId=".concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});if(r.ok){let e=await r.json();if(e.accounts&&Array.isArray(e.accounts)){m(e.accounts);let t=localStorage.getItem("currentAccountId");if(t&&e.accounts.find(e=>String(e.id||e._id)===t))g(t);else if(e.accounts.length>0){let t=e.accounts[0].id||e.accounts[0]._id;g(t),localStorage.setItem("currentAccountId",String(t))}}}}catch(e){console.error("Error fetching accounts:",e)}},_=async()=>{if(!p.name||!p.balance)return;let e=(null==t?void 0:t.id)||(null==t?void 0:t._id);if(!e)return void alert("User not found. Please login again.");try{let a=o.A.get("auth-token")||localStorage.getItem("auth-token");if(!a)return void alert("Authentication token is missing. Please login again.");let r=await fetch("/api/accounts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({userId:e,...p})});if(r.ok){let e=await r.json(),a={id:e.accountId||e._id||Date.now().toString(),...p,balance:parseFloat(p.balance),color:z(p.tag),isActive:0===x.length};m([...x,a]),0===x.length&&(g(a.id),localStorage.setItem("currentAccountId",a.id)),f({name:"",balance:"",tag:"personal"}),b(!1),await E(t)}else{let e=await r.json();console.error("Failed to create account:",e),alert("Failed to create account. Please try again.")}}catch(e){console.error("Error adding account:",e),alert("Error adding account. Please try again.")}},R=async(e,t)=>{try{let a=o.A.get("auth-token")||localStorage.getItem("auth-token"),r=await fetch("/api/accounts/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(t)});if(r.ok){let t=await r.json();m(a=>a.map(a=>a.id===e||a._id===e?t:a))}}catch(e){console.error("Error updating account:",e)}},V=async e=>{try{let t=o.A.get("auth-token")||localStorage.getItem("auth-token");if((await fetch("/api/accounts/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok&&(m(t=>t.filter(t=>t.id!==e&&t._id!==e)),String(u)===String(e))){let t=x.filter(t=>t.id!==e&&t._id!==e);if(t.length>0){let e=t[0].id||t[0]._id;g(e),localStorage.setItem("currentAccountId",String(e))}}}catch(e){console.error("Error deleting account:",e)}};return d?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-blue-600 border-t-transparent"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,r.jsx)(n.A,{user:t,currentAccountId:u,accounts:x,onAccountSwitch:e=>{g(e),localStorage.setItem("currentAccountId",String(e))},onAddAccount:()=>b(!0),onEditAccount:R,onDeleteAccount:V,onLogout:()=>{o.A.remove("auth-token"),localStorage.removeItem("auth-token"),localStorage.removeItem("user"),localStorage.removeItem("isAMTradeMode"),e.push("/login")},onUpdateUser:e=>a(e)}),(0,r.jsx)("main",{className:"flex-1 ml-64 p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"AM Trade Overview"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Your morning trading session dashboard"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-medium",children:"AM Session Active"}),(0,r.jsx)("button",{onClick:()=>e.push("/am-trade/add-am-trade"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add AM Trade"})]})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-blue-50/30 rounded-2xl sm:rounded-3xl border border-gray-200/60 p-4 sm:p-6 lg:p-8 shadow-lg hover:shadow-xl transition-all duration-300 mb-6 sm:mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Period"}),(0,r.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"px-3 py-2.5 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white transition-all duration-200 shadow-sm hover:shadow-md text-sm sm:text-base min-w-[140px]",children:[(0,r.jsx)("option",{value:"all",children:"All Time"}),(0,r.jsx)("option",{value:"7d",children:"Last 7 Days"}),(0,r.jsx)("option",{value:"30d",children:"Last 30 Days"}),(0,r.jsx)("option",{value:"90d",children:"Last 90 Days"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,r.jsxs)("select",{value:A,onChange:e=>S(e.target.value),className:"px-3 py-2.5 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white transition-all duration-200 shadow-sm hover:shadow-md text-sm sm:text-base min-w-[140px]",children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"win",children:"Wins"}),(0,r.jsx)("option",{value:"loss",children:"Losses"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Pair"}),(0,r.jsxs)("select",{value:C,onChange:e=>P(e.target.value),className:"px-3 py-2.5 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white transition-all duration-200 shadow-sm hover:shadow-md text-sm sm:text-base min-w-[140px]",children:[(0,r.jsx)("option",{value:"all",children:"All Pairs"}),B.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Strategy"}),(0,r.jsxs)("select",{value:L,onChange:e=>T(e.target.value),className:"px-3 py-2.5 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white transition-all duration-200 shadow-sm hover:shadow-md text-sm sm:text-base min-w-[140px]",children:[(0,r.jsx)("option",{value:"all",children:"All Strategies"}),W.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]})]}),(0,r.jsx)("button",{onClick:()=>{k("all"),S("all"),P("all"),T("all")},className:"px-4 py-2 text-gray-600 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200 text-sm font-medium",children:"Reset Filters"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-white via-blue-50/30 to-indigo-50/30 p-6 rounded-2xl border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total AM Trades"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:F.totalTrades}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[F.activePositions," active"]})]}),(0,r.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl shadow-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-white via-green-50/30 to-emerald-50/30 p-6 rounded-2xl border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Win Rate"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:[F.winRate,"%"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Profit Factor: ",F.profitFactor]})]}),(0,r.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl shadow-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-white via-purple-50/30 to-violet-50/30 p-6 rounded-2xl border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Total P&L"}),(0,r.jsx)("p",{className:"text-3xl font-bold mt-1 ".concat(F.totalProfit>0?"text-green-600":F.totalProfit<0?"text-red-600":"text-gray-900"),children:I(F.totalProfit)}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Best: ",I(F.bestTrade)]})]}),(0,r.jsx)("div",{className:"p-3 rounded-xl shadow-lg ".concat(F.totalProfit>0?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-red-500 to-rose-600"),children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-white via-orange-50/30 to-amber-50/30 p-6 rounded-2xl border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Avg Win/Loss"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,r.jsx)("span",{className:"text-lg font-bold text-green-600",children:I(F.avgWin)}),(0,r.jsx)("span",{className:"text-gray-400",children:"/"}),(0,r.jsx)("span",{className:"text-lg font-bold text-red-600",children:I(F.avgLoss)})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Win Streak: ",F.winStreak]})]}),(0,r.jsx)("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-amber-600 rounded-xl shadow-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-blue-50/30 p-6 rounded-2xl border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"P&L Performance"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Cumulative P&L"})]})]}),(0,r.jsx)("div",{className:"h-80",children:y.length>0?(0,r.jsx)(i.N1,{data:{labels:y.filter(e=>e.status&&"pending"!==e.status).sort((e,t)=>new Date(e.dateTime||e.createdAt)-new Date(t.dateTime||t.createdAt)).map((e,t)=>"Trade ".concat(t+1)),datasets:[{label:"Cumulative P&L",data:y.filter(e=>e.status&&"pending"!==e.status).sort((e,t)=>new Date(e.dateTime||e.createdAt)-new Date(t.dateTime||t.createdAt)).reduce((e,t,a)=>{let r=0===a?t.actualProfit||0:e[a-1]+(t.actualProfit||0);return e.push(r),e},[]),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"rgb(34, 197, 94)",pointBorderColor:"white",pointBorderWidth:2,pointRadius:5,pointHoverRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(34, 197, 94, 0.5)",borderWidth:1,cornerRadius:8,displayColors:!1,callbacks:{label:function(e){return"P&L: ".concat(I(e.parsed.y))}}}},scales:{x:{grid:{display:!1},ticks:{color:"#6B7280",font:{size:12}}},y:{grid:{color:"rgba(0, 0, 0, 0.05)"},ticks:{color:"#6B7280",font:{size:12},callback:function(e){return I(e)}}}},interaction:{intersect:!1,mode:"index"}}}):(0,r.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,r.jsx)("p",{className:"text-gray-500 font-medium",children:"No trade data available"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Add some AM trades to see performance charts"})]})})})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-purple-50/30 p-6 rounded-2xl border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Win/Loss Distribution"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Wins"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Losses"})]})]})]}),(0,r.jsx)("div",{className:"h-80",children:y.length>0?(0,r.jsx)(i.nu,{data:{labels:["Wins","Losses","Pending"],datasets:[{data:[y.filter(e=>"win"===e.status).length,y.filter(e=>"loss"===e.status).length,y.filter(e=>!e.status||"pending"===e.status).length],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)","rgba(156, 163, 175, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(156, 163, 175)"],borderWidth:3,hoverBackgroundColor:["rgba(34, 197, 94, 0.9)","rgba(239, 68, 68, 0.9)","rgba(156, 163, 175, 0.9)"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,font:{size:14,weight:"500"}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"white",bodyColor:"white",borderColor:"rgba(156, 163, 175, 0.5)",borderWidth:1,cornerRadius:8,callbacks:{label:function(e){let t=e.dataset.data.reduce((e,t)=>e+t,0),a=(e.parsed/t*100).toFixed(1);return"".concat(e.label,": ").concat(e.parsed," (").concat(a,"%)")}}}},cutout:"60%"}}):(0,r.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),(0,r.jsx)("p",{className:"text-gray-500 font-medium",children:"No trade data available"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Add some AM trades to see distribution"})]})})})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-indigo-50/30 rounded-2xl border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300 mb-8",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200/60",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Recent AM Trades"}),(0,r.jsx)("button",{onClick:()=>e.push("/am-trade/journal"),className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 text-sm font-medium shadow-lg hover:shadow-xl",children:"View All"})]})}),(0,r.jsx)("div",{className:"p-6",children:y.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[y.sort((e,t)=>new Date(t.dateTime||t.createdAt)-new Date(e.dateTime||e.createdAt)).slice(0,5).map(e=>{var t;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-xl border border-gray-200/60 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat("win"===e.status?"bg-green-500":"loss"===e.status?"bg-red-500":"bg-gray-400")}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:e.tradingPair}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-lg text-xs font-medium ".concat("long"===e.direction?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:null==(t=e.direction)?void 0:t.toUpperCase()})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-1",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:D(e.dateTime||e.createdAt)}),e.strategy&&(0,r.jsx)("span",{className:"text-sm text-gray-500",children:e.strategy})]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-lg font-bold ".concat(e.actualProfit>0?"text-green-600":e.actualProfit<0?"text-red-600":"text-gray-600"),children:e.actualProfit?I(e.actualProfit):"Pending"}),e.status&&(0,r.jsx)("div",{className:"text-xs font-medium mt-1 ".concat("win"===e.status?"text-green-600":"loss"===e.status?"text-red-600":"text-gray-600"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})]},e._id)}),y.length>5&&(0,r.jsx)("div",{className:"text-center pt-4",children:(0,r.jsxs)("button",{onClick:()=>e.push("/am-trade/journal"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:["View ",y.length-5," more trades →"]})})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,r.jsx)("p",{className:"text-gray-500 mb-2 font-medium",children:"No AM trades found"}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mb-6",children:"Start your morning trading session to see analytics"}),(0,r.jsx)("button",{onClick:()=>e.push("/am-trade/add-am-trade"),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl",children:"Add Your First AM Trade"})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-green-50/30 p-6 rounded-2xl border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"AM Session Performance"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded-xl border border-gray-200/60",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Average Win"}),(0,r.jsx)("span",{className:"font-bold text-green-600",children:I(F.avgWin)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded-xl border border-gray-200/60",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Average Loss"}),(0,r.jsx)("span",{className:"font-bold text-red-600",children:I(F.avgLoss)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded-xl border border-gray-200/60",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Best Trade"}),(0,r.jsx)("span",{className:"font-bold text-green-600",children:I(F.bestTrade)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded-xl border border-gray-200/60",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Worst Trade"}),(0,r.jsx)("span",{className:"font-bold text-red-600",children:I(F.worstTrade)})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded-xl border border-gray-200/60",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Profit Factor"}),(0,r.jsx)("span",{className:"font-bold ".concat(F.profitFactor>1?"text-green-600":"text-red-600"),children:F.profitFactor===1/0?"∞":F.profitFactor})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-white rounded-xl border border-gray-200/60",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Win Streak"}),(0,r.jsx)("span",{className:"font-bold text-blue-600",children:F.winStreak})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-blue-50/30 p-6 rounded-2xl border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Quick Actions"]}),(0,r.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,r.jsxs)("button",{onClick:()=>e.push("/am-trade/add-am-trade"),className:"w-full flex items-center space-x-3 p-4 text-left bg-gradient-to-r from-blue-50 to-indigo-50 hover:from-blue-100 hover:to-indigo-100 rounded-xl transition-all duration-200 border border-blue-200/60 hover:border-blue-300/60",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})})}),(0,r.jsx)("span",{className:"font-semibold text-blue-700",children:"Add New AM Trade"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/am-trade/journal"),className:"w-full flex items-center space-x-3 p-4 text-left bg-gradient-to-r from-gray-50 to-slate-50 hover:from-gray-100 hover:to-slate-100 rounded-xl transition-all duration-200 border border-gray-200/60 hover:border-gray-300/60",children:[(0,r.jsx)("div",{className:"p-2 bg-gradient-to-r from-gray-600 to-slate-600 rounded-lg",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.832 18.477 19.246 18 17.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),(0,r.jsx)("span",{className:"font-semibold text-gray-700",children:"View AM Journal"})]})]}),B.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top Trading Pairs"}),(0,r.jsx)("div",{className:"space-y-2",children:B.slice(0,5).map(e=>{let t=y.filter(t=>t.tradingPair===e),a=t.reduce((e,t)=>e+(t.actualProfit||0),0),s=t.filter(e=>"win"===e.status).length/t.length*100;return(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200/60",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[t.length," trades • ",s.toFixed(0),"% win rate"]})]}),(0,r.jsx)("span",{className:"font-bold text-sm ".concat(a>0?"text-green-600":a<0?"text-red-600":"text-gray-600"),children:I(a)})]},e)})})]})]})]})]})}),h&&(0,r.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-gray-900/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md transform transition-all",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Account"}),(0,r.jsx)("button",{onClick:()=>{b(!1),f({name:"",balance:"",tag:"personal"})},className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"px-6 py-4 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name"}),(0,r.jsx)("input",{type:"text",value:p.name,onChange:e=>f({...p,name:e.target.value}),placeholder:"e.g., My AM Trading Account",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Initial Balance"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,r.jsx)("input",{type:"number",value:p.balance,onChange:e=>f({...p,balance:e.target.value}),placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Account Type"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2",children:[{value:"personal",label:"Personal",color:"bg-blue-600"},{value:"business",label:"Business",color:"bg-green-600"},{value:"demo",label:"Demo",color:"bg-purple-600"},{value:"forex",label:"Forex",color:"bg-orange-600"},{value:"crypto",label:"Crypto",color:"bg-indigo-600"}].map(e=>(0,r.jsxs)("button",{onClick:()=>f({...p,tag:e.value}),className:"flex items-center space-x-3 p-3 rounded-lg border-2 transition-all ".concat(p.tag===e.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,r.jsx)("div",{className:"w-4 h-4 rounded-full ".concat(e.color)}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e.label})]},e.value))})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(z(p.tag))}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:p.name||"Account Name"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["$",p.balance?parseFloat(p.balance).toLocaleString():"0.00"," • ",{personal:"Personal",business:"Business",demo:"Demo",forex:"Forex",crypto:"Crypto"}[p.tag]||"Personal"]})]})]})]})]}),(0,r.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{b(!1),f({name:"",balance:"",tag:"personal"})},className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{onClick:_,disabled:!p.name||!p.balance,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{children:"Add Account"})]})]})})]})})]})}d.t1.register(d.PP,d.kc,d.FN,d.No,d.E8,d.Bs,d.hE,d.m_,d.s$,d.dN)},9846:(e,t,a)=>{Promise.resolve().then(a.bind(a,6225))}},e=>{var t=t=>e(e.s=t);e.O(0,[647,135,387,441,684,358],()=>t(9846)),_N_E=e.O()}]);