(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[822],{1240:(e,t,s)=>{Promise.resolve().then(s.bind(s,3395))},3395:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(5155),r=s(2115),l=s(5695),n=s(7383),o=s(5387);function i(){var e,t,s,i,u,m,h,p,g,j,b;let v=(0,l.useRouter)(),[f,y]=(0,r.useState)(null),[N,w]=(0,r.useState)([]),[k,L]=(0,r.useState)([]),[P,C]=(0,r.useState)(!0),[M,S]=(0,r.useState)("all"),[A,F]=(0,r.useState)(""),[E,B]=(0,r.useState)("newest"),[T,R]=(0,r.useState)("cards"),[z,W]=(0,r.useState)(null),[I,D]=(0,r.useState)(!1),[U,V]=(0,r.useState)(!1),[H,_]=(0,r.useState)(!1),[O,$]=(0,r.useState)(!1),[G,J]=(0,r.useState)(null),[q,X]=(0,r.useState)(null),[Y,Q]=(0,r.useState)([]),[Z,K]=(0,r.useState)(!1),[ee,et]=(0,r.useState)([]),[es,ea]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=n.A.get("auth-token")||localStorage.getItem("auth-token"),t=localStorage.getItem("user");if(!e||!t)return void v.push("/login");try{let e=JSON.parse(t);y(e)}catch(e){console.error("Error parsing user data:",e),v.push("/login")}},[v]),(0,r.useEffect)(()=>{((null==f?void 0:f.id)||(null==f?void 0:f._id))&&(console.log("User loaded, fetching accounts and trades..."),er())},[f]),(0,r.useEffect)(()=>{f&&es&&ee.length>0&&(console.log("Account changed, fetching trades for account:",es),C(!0),en(f.id||f._id,es))},[es]),(0,r.useEffect)(()=>{eo()},[N,M,A,E]);let er=async()=>{try{let e=n.A.get("auth-token")||localStorage.getItem("auth-token"),t=(null==f?void 0:f.id)||(null==f?void 0:f._id);console.log("Fetching accounts for userId:",t);let s=await fetch("/api/accounts?userId=".concat(t),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(s.ok){let e=await s.json();if(console.log("Accounts response:",e),e.accounts&&e.accounts.length>0){et(e.accounts);let s=e.accounts[0].id||e.accounts[0]._id;ea(s),console.log("Setting default account:",s),await en(t,s)}else console.log("No accounts found in response, creating default account and fetching all trades"),await el(),await en(t,null)}else console.log("Failed to fetch accounts (status:",s.status,"), creating default and fetching all trades"),await el(),await en(t,null)}catch(t){console.error("Error in fetchAccountsAndTrades:",t);let e=(null==f?void 0:f.id)||(null==f?void 0:f._id);await en(e,null)}},el=async()=>{try{let e=n.A.get("auth-token")||localStorage.getItem("auth-token"),t=(null==f?void 0:f.id)||(null==f?void 0:f._id),s=await fetch("/api/accounts",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({userId:t,name:"Main Trading Account",balance:1e4,tag:"personal"})}),a=await s.json();if(s.ok&&a.success){let e=a.account;et([e]),ea(e.id||e._id),console.log("Created default account:",e)}else console.error("Failed to create default account:",a.message)}catch(e){console.error("Error creating default account:",e)}},en=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{let s=n.A.get("auth-token")||localStorage.getItem("auth-token"),a="/api/trades?userId=".concat(e);t&&(a+="&accountId=".concat(t)),console.log("Fetching trades from:",a);let r=await fetch(a,{headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"}}),l=await r.json();console.log("Trades response:",l),l.trades?(w(l.trades),console.log("Set trades:",l.trades.length,"trades")):(console.log("No trades in response"),w([]))}catch(e){console.error("Error fetching trades:",e),w([])}finally{C(!1)}},eo=()=>{let e=N;"all"!==M&&(e=e.filter(e=>e.status===M)),A&&(e=e.filter(e=>{var t,s,a;return(null==(t=e.tradingPair)?void 0:t.toLowerCase().includes(A.toLowerCase()))||(null==(s=e.tags)?void 0:s.toLowerCase().includes(A.toLowerCase()))||(null==(a=e.analysis)?void 0:a.toLowerCase().includes(A.toLowerCase()))})),L(e=e.sort((e,t)=>{var s,a,r,l;switch(E){case"newest":return new Date(t.createdAt)-new Date(e.createdAt);case"oldest":return new Date(e.createdAt)-new Date(t.createdAt);case"profit":return((null==(s=t.calculations)?void 0:s.potentialProfit)||0)-((null==(a=e.calculations)?void 0:a.potentialProfit)||0);case"risk":return((null==(r=t.calculations)?void 0:r.riskAmount)||0)-((null==(l=e.calculations)?void 0:l.riskAmount)||0);default:return 0}}))},ei=e=>{switch(e){case"planning":return"bg-blue-100 text-blue-800";case"open":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},ed=e=>"LONG"===e?"text-green-600":"text-red-600",ec=async e=>{if(ee.length<=1)return void alert("Cannot delete the last account");if(confirm("Are you sure you want to delete this account?"))try{let t=n.A.get("auth-token")||localStorage.getItem("auth-token");if((await fetch("/api/accounts?id=".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).ok){if(et(t=>t.filter(t=>(t.id||t._id)!==e)),es===e){let t=ee.filter(t=>(t.id||t._id)!==e);t.length>0&&ea(t[0].id||t[0]._id)}}else alert("Failed to delete account")}catch(e){console.error("Error deleting account:",e),alert("Error deleting account")}},ex=e=>{W(e),D(!0)},eu=async e=>{if(confirm("Are you sure you want to delete this trade?"))try{let t=n.A.get("auth-token")||localStorage.getItem("auth-token"),s=await fetch("/api/trades?id=".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),a=await s.json();s.ok&&a.success?(w(t=>t.filter(t=>t._id!==e)),console.log("Trade deleted successfully")):(console.error("Failed to delete trade:",a.message),alert("Failed to delete trade: "+a.message))}catch(e){console.error("Error deleting trade:",e),alert("Error deleting trade: "+e.message)}},em=e=>{J(e),_(!0)},eh=e=>{X(e),$(!0)};if(P)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading trades..."})]})});let ep=(()=>{console.log("=== TRADE STATS DEBUG ==="),console.log("Current Account ID:",es),console.log("Total trades in state:",N.length),console.log("All trades:",N.map(e=>({id:e._id,pair:e.tradingPair,accountId:e.accountId,status:e.status})));let e=N.filter(e=>{let t=e.accountId===es||e.accountId===(null==es?void 0:es.toString());return console.log("Trade ".concat(e._id," (").concat(e.tradingPair,"): accountId=").concat(e.accountId,", currentAccountId=").concat(es,", matches=").concat(t)),t});console.log("Filtered account trades:",e.length),console.log("Account trades:",e.map(e=>({id:e._id,pair:e.tradingPair,status:e.status,actualProfit:e.actualProfit})));let t=e.length,s=e.filter(e=>"planning"===e.status).length,a=e.filter(e=>"active"===e.status).length,r=e.filter(e=>"win"===e.status).length,l=e.filter(e=>"loss"===e.status).length,n=r+l,o=e.reduce((e,t)=>{var s;return e+((null==(s=t.calculations)?void 0:s.riskAmount)||0)},0),i=e.reduce((e,t)=>{var s;return e+((null==(s=t.calculations)?void 0:s.potentialProfit)||0)},0),d=e.filter(e=>"win"===e.status||"loss"===e.status).reduce((e,t)=>{var s;return e+(t.actualProfit||(null==(s=t.calculations)?void 0:s.actualPL)||0)},0),c=n>0?r/n*100:0,x=e.filter(e=>"win"===e.status).reduce((e,t)=>{var s;return e+(t.actualProfit||(null==(s=t.calculations)?void 0:s.actualPL)||0)},0),u=e.filter(e=>"loss"===e.status).reduce((e,t)=>{var s;return e+Math.abs(t.actualProfit||(null==(s=t.calculations)?void 0:s.actualPL)||0)},0),m=u>0?x/u:999*(x>0),h=ee.find(e=>(e.id||e._id)===es);console.log("Current account found:",h),console.log("All accounts:",ee.map(e=>({id:e.id||e._id,name:e.name,balance:e.balance})));let p=(null==h?void 0:h.balance)||0,g=(null==h?void 0:h.initialBalance)||(null==h?void 0:h.balance)||1e4;console.log("Account balance:",p),console.log("Initial balance:",g);let j=g>0?(p-g)/g*100:0;return console.log("Calculated stats:",{total:t,planning:s,active:a,wins:r,losses:l,closed:n,actualPL:d,winRate:c.toFixed(1),profitFactor:999===m?"âˆž":m.toFixed(2),accountBalance:p,accountGrowth:j.toFixed(2)}),console.log("=== END TRADE STATS DEBUG ==="),{total:t,planning:s,active:a,wins:r,losses:l,closed:n,totalRisk:o,totalPotentialProfit:i,actualPL:d,winRate:c,avgWin:r>0?x/r:0,avgLoss:l>0?u/l:0,profitFactor:m,accountBalance:p,accountGrowth:j,accountName:(null==h?void 0:h.name)||"Unknown Account"}})();return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,a.jsx)(o.A,{user:f,currentAccountId:es,accounts:ee,onAccountSwitch:e=>{console.log("Switching to account:",e),ea(e)},onAddAccount:()=>{V(!0)},onEditAccount:(e,t)=>{et(s=>s.map(s=>(s.id||s._id)===e?{...s,...t}:s))},onDeleteAccount:ec,onLogout:()=>{n.A.remove("auth-token"),localStorage.removeItem("auth-token"),localStorage.removeItem("user"),v.push("/login")},onUpdateUser:e=>y(e)}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col ml-64",children:[(0,a.jsxs)("header",{className:"relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 border-b border-white/20 backdrop-blur-sm px-8 py-8 sticky top-0 z-40",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 to-indigo-600/5"}),(0,a.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.832 18.477 19.246 18 17.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Trading Journal"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,a.jsx)("p",{className:"text-gray-600 text-base font-medium",children:"Track and analyze your trading performance"}),es&&ee.length>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1.5 bg-white/70 backdrop-blur-sm rounded-xl border border-white/20 shadow-sm",children:[(0,a.jsx)("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm"}),(0,a.jsx)("span",{className:"text-sm text-green-700 font-semibold",children:(null==(e=ee.find(e=>(e.id||e._id)===es))?void 0:e.name)||"Unknown Account"})]}),(0,a.jsx)("div",{className:"px-3 py-1.5 bg-white/70 backdrop-blur-sm rounded-xl border border-white/20 shadow-sm",children:(0,a.jsxs)("span",{className:"text-sm text-gray-700 font-semibold",children:["$",(null==(s=ee.find(e=>(e.id||e._id)===es))||null==(t=s.balance)?void 0:t.toFixed(2))||"0.00"]})})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center bg-white/70 backdrop-blur-sm rounded-2xl p-1 border border-white/20 shadow-sm",children:[(0,a.jsxs)("button",{onClick:()=>R("cards"),className:"px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 flex items-center space-x-2 ".concat("cards"===T?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-white/50"),children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),(0,a.jsx)("span",{children:"Cards"})]}),(0,a.jsxs)("button",{onClick:()=>R("list"),className:"px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 flex items-center space-x-2 ".concat("list"===T?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-white/50"),children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),(0,a.jsx)("span",{children:"List"})]})]}),(0,a.jsxs)("button",{onClick:()=>v.push("/add-trade"),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl font-semibold flex items-center space-x-2 transform hover:scale-105",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,a.jsx)("span",{children:"Add Trade"})]})]})]})]}),(0,a.jsx)("main",{className:"flex-1 p-8 overflow-y-auto bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"relative bg-white/80 backdrop-blur-xl rounded-3xl border border-white/20 shadow-xl shadow-blue-500/5 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 via-transparent to-indigo-50/30 pointer-events-none"}),(0,a.jsx)("div",{className:"relative p-8 border-b border-gray-100/50 bg-gradient-to-r from-blue-50/50 to-indigo-50/50",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,a.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Performance Overview"}),(0,a.jsx)("p",{className:"text-gray-600 font-medium",children:"Your trading statistics and analytics at a glance"})]})]})}),(0,a.jsxs)("div",{className:"relative p-8",children:[(0,a.jsx)("div",{className:"mb-8 p-6 bg-gradient-to-br from-blue-50/80 via-indigo-50/60 to-purple-50/40 rounded-2xl border border-blue-200/30 shadow-lg backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16l-3-9m3 9l3-9"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-xl font-bold text-gray-900",children:ep.accountName}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 font-medium",children:["Current Balance: ",(0,a.jsxs)("span",{className:"font-bold text-gray-900",children:["$",ep.accountBalance.toFixed(2)]})]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold ".concat(ep.accountGrowth>=0?"text-green-600":"text-red-600"),children:[ep.accountGrowth>=0?"+":"",ep.accountGrowth.toFixed(2),"%"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Account Growth"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-2xl p-5 text-center border border-blue-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Total Trades"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:ep.total})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100/50 rounded-2xl p-5 text-center border border-yellow-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v6a2 2 0 002 2h2m0 0h2a2 2 0 002-2V7a2 2 0 00-2-2H9m0 0V3m0 2v2"})})}),(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Planning"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:ep.planning})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100/50 rounded-2xl p-5 text-center border border-indigo-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Active"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:ep.active})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100/50 rounded-2xl p-5 text-center border border-green-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Wins"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:ep.wins})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100/50 rounded-2xl p-5 text-center border border-red-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Losses"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:ep.losses})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100/50 rounded-2xl p-5 text-center border border-gray-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Closed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-600",children:ep.closed})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-br from-white via-green-50/30 to-emerald-50/20 rounded-2xl p-6 border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300 group",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Actual P&L"}),(0,a.jsxs)("p",{className:"text-3xl font-bold ".concat(ep.actualPL>=0?"text-green-600":"text-red-600"),children:["$",ep.actualPL>=0?"+":"",ep.actualPL.toFixed(2)]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Realized profit/loss"})]}),(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-".concat(ep.actualPL>=0?"green":"red","-500 to-").concat(ep.actualPL>=0?"emerald":"rose","-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300"),children:(0,a.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-white via-blue-50/30 to-indigo-50/20 rounded-2xl p-6 border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300 group",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Win Rate"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:[ep.winRate.toFixed(1),"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Success percentage"})]}),(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:(0,a.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-white via-purple-50/30 to-pink-50/20 rounded-2xl p-6 border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300 group",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Profit Factor"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:999===ep.profitFactor?"âˆž":ep.profitFactor.toFixed(2)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Profit/loss ratio"})]}),(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:(0,a.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-white via-orange-50/30 to-amber-50/20 rounded-2xl p-6 border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300 group",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Total Risk"}),(0,a.jsxs)("p",{className:"text-3xl font-bold text-orange-600",children:["$",ep.totalRisk.toFixed(0)]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Risk exposure"})]}),(0,a.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-500 to-amber-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:(0,a.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),ep.closed>0&&(0,a.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Performance"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Avg Win:"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:["$",ep.avgWin.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Avg Loss:"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-red-600",children:["$",ep.avgLoss.toFixed(2)]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Risk Management"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Potential Profit:"}),(0,a.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:["$",ep.totalPotentialProfit.toFixed(0)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Risk/Reward:"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-blue-600",children:ep.totalRisk>0?(ep.totalPotentialProfit/ep.totalRisk).toFixed(2):"0.00"})]})]})]})]})]})]}),(0,a.jsxs)("div",{className:"relative bg-white/80 backdrop-blur-xl rounded-3xl border border-white/20 shadow-xl shadow-blue-500/5 overflow-hidden p-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/30 via-transparent to-indigo-50/20 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-6",children:[(0,a.jsx)("div",{className:"flex-1 max-w-md",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,a.jsx)("input",{type:"text",value:A,onChange:e=>F(e.target.value),placeholder:"Search trades by pair, strategy, or notes...",className:"w-full pl-12 pr-4 py-4 border border-gray-200/50 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white/70 backdrop-blur-sm shadow-sm placeholder-gray-400 text-gray-900 font-medium"})]})}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:M,onChange:e=>S(e.target.value),className:"px-5 py-4 border border-gray-200/50 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white/70 backdrop-blur-sm transition-all duration-200 shadow-sm font-medium text-gray-900 appearance-none pr-10",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"planning",children:"Planning"}),(0,a.jsx)("option",{value:"open",children:"Open"}),(0,a.jsx)("option",{value:"closed",children:"Closed"})]}),(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:E,onChange:e=>B(e.target.value),className:"px-5 py-4 border border-gray-200/50 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white/70 backdrop-blur-sm transition-all duration-200 shadow-sm font-medium text-gray-900 appearance-none pr-10",children:[(0,a.jsx)("option",{value:"newest",children:"Newest First"}),(0,a.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,a.jsx)("option",{value:"profit",children:"Highest Profit"}),(0,a.jsx)("option",{value:"risk",children:"Highest Risk"})]}),(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})]}),0===k.length?(0,a.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-16 text-center",children:[(0,a.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No trades found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:0===N.length?"Start building your trading journal by adding your first trade.":"".concat(N.length," trades available, but none match your current filters.")}),(0,a.jsx)("button",{onClick:()=>v.push("/add-trade"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-xl hover:from-purple-700 hover:to-purple-800 transition-all duration-200 shadow-sm font-medium",children:"Add Your First Trade"})]}):"cards"===T?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(e=>{var t,s,r,l,n;return(0,a.jsxs)("div",{className:"relative bg-white/80 backdrop-blur-xl rounded-3xl border border-white/20 shadow-xl shadow-blue-500/5 overflow-hidden hover:shadow-2xl hover:shadow-blue-500/10 transition-all duration-300 group",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/30 via-transparent to-indigo-50/20 pointer-events-none"}),(0,a.jsxs)("div",{className:"relative p-6 bg-gradient-to-br from-blue-50/50 via-indigo-50/30 to-purple-50/20 border-b border-gray-100/50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full shadow-lg ".concat("long"===e.direction?"bg-gradient-to-r from-green-400 to-emerald-500":"bg-gradient-to-r from-red-400 to-rose-500")}),(0,a.jsx)("h3",{className:"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:e.tradingPair})]}),(0,a.jsx)("span",{className:"px-3 py-1.5 rounded-xl text-sm font-semibold shadow-sm ".concat(ei(e.status)),children:(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("planning"===e.status?"bg-yellow-400":"open"===e.status?"bg-blue-400":"bg-green-400")}),(0,a.jsx)("span",{children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center shadow-lg ".concat("long"===e.direction?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-red-500 to-rose-600"),children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"long"===e.direction?"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6":"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Direction"}),(0,a.jsx)("p",{className:"font-bold text-lg ".concat(ed(e.direction)),children:null==(t=e.direction)?void 0:t.toUpperCase()})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Entry Price"}),(0,a.jsx)("p",{className:"font-bold text-lg text-gray-900 font-mono",children:parseFloat(e.entryPrice).toFixed(5)})]})]})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Take Profit"}),(0,a.jsx)("p",{className:"font-semibold text-green-600",children:parseFloat(e.takeProfit).toFixed(5)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Stop Loss"}),(0,a.jsx)("p",{className:"font-semibold text-red-600",children:parseFloat(e.stopLoss).toFixed(5)})]})]}),e.calculations&&(0,a.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Risk Amount"}),(0,a.jsxs)("p",{className:"font-bold text-red-600",children:["$",null==(s=e.calculations.riskAmount)?void 0:s.toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Potential Profit"}),(0,a.jsxs)("p",{className:"font-bold text-green-600",children:["$",null==(r=e.calculations.potentialProfit)?void 0:r.toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Lot Size"}),(0,a.jsx)("p",{className:"font-bold text-blue-600",children:null==(l=e.calculations.lotSize)?void 0:l.toFixed(3)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Risk:Reward"}),(0,a.jsxs)("p",{className:"font-bold text-purple-600",children:["1:",null==(n=e.calculations.riskRewardRatio)?void 0:n.toFixed(2)]})]})]})}),e.tags&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.split(",").slice(0,3).map((e,t)=>(0,a.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full",children:e.trim()},t)),e.tags.split(",").length>3&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.tags.split(",").length-3," more"]})]})}),e.analysis&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Analysis"}),(0,a.jsx)("p",{className:"text-sm text-gray-800 line-clamp-3",children:e.analysis.length>100?e.analysis.substring(0,100)+"...":e.analysis})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,a.jsxs)("span",{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]}),(0,a.jsx)("span",{children:new Date(e.createdAt).toLocaleTimeString()})]}),(0,a.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,a.jsx)("button",{onClick:()=>ex(e),className:"p-2 text-purple-600 hover:bg-purple-100 rounded-lg transition-colors",title:"View Details",children:(0,a.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,a.jsx)("button",{onClick:()=>em(e),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Edit Trade",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)("button",{onClick:()=>eh(e),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Update Status",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsx)("button",{onClick:()=>eu(e._id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete Trade",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},e._id)})}):(0,a.jsx)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Pair"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Direction"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Entry"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"TP/SL"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Risk"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Profit"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:k.map(e=>{var t,s,r,l,n;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat("long"===e.direction?"bg-green-500":"bg-red-500")}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:e.tradingPair})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"font-medium ".concat(ed(e.direction)),children:null==(t=e.direction)?void 0:t.toUpperCase()})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:parseFloat(e.entryPrice).toFixed(5)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-green-600 font-mono",children:parseFloat(e.takeProfit).toFixed(5)}),(0,a.jsx)("div",{className:"text-red-600 font-mono",children:parseFloat(e.stopLoss).toFixed(5)})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-red-600",children:["$",(null==(r=e.calculations)||null==(s=r.riskAmount)?void 0:s.toFixed(2))||"0.00"]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["$",(null==(n=e.calculations)||null==(l=n.potentialProfit)?void 0:l.toFixed(2))||"0.00"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(ei(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>ex(e),className:"p-2 text-purple-600 hover:bg-purple-100 rounded-lg transition-colors",title:"View Details",children:(0,a.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,a.jsx)("button",{onClick:()=>em(e),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Edit Trade",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsx)("button",{onClick:()=>eh(e),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Update Status",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsx)("button",{onClick:()=>eu(e._id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete Trade",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e._id)})})]})})})]})})]}),I&&z&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-xl",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-purple-50 to-indigo-50",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-600 to-purple-700 rounded-2xl flex items-center justify-center",children:(0,a.jsxs)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Trade Details"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[z.tradingPair," - ",null==(i=z.direction)?void 0:i.toUpperCase()]})]})]}),(0,a.jsx)("button",{onClick:()=>D(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-white rounded-xl transition-all",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Trade Setup"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Trading Pair"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:z.tradingPair})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Direction"}),(0,a.jsx)("p",{className:"font-semibold ".concat(ed(z.direction)),children:null==(u=z.direction)?void 0:u.toUpperCase()})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Entry Price"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900 font-mono",children:parseFloat(z.entryPrice).toFixed(5)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Status"}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(ei(z.status)),children:z.status.charAt(0).toUpperCase()+z.status.slice(1)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Take Profit"}),(0,a.jsx)("p",{className:"font-semibold text-green-600 font-mono",children:parseFloat(z.takeProfit).toFixed(5)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Stop Loss"}),(0,a.jsx)("p",{className:"font-semibold text-red-600 font-mono",children:parseFloat(z.stopLoss).toFixed(5)})]}),z.strategy&&(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Strategy"}),(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:z.strategy})]})]})]}),z.calculations&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Risk Management"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Risk Amount"}),(0,a.jsxs)("p",{className:"font-semibold text-red-600",children:["$",null==(m=z.calculations.riskAmount)?void 0:m.toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Potential Profit"}),(0,a.jsxs)("p",{className:"font-semibold text-green-600",children:["$",null==(h=z.calculations.potentialProfit)?void 0:h.toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Lot Size"}),(0,a.jsx)("p",{className:"font-semibold text-blue-600",children:null==(p=z.calculations.lotSize)?void 0:p.toFixed(4)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Risk:Reward"}),(0,a.jsxs)("p",{className:"font-semibold text-purple-600",children:["1:",null==(g=z.calculations.riskRewardRatio)?void 0:g.toFixed(2)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Profit Pips"}),(0,a.jsx)("p",{className:"font-semibold text-green-600",children:null==(j=z.calculations.profitPips)?void 0:j.toFixed(1)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Loss Pips"}),(0,a.jsx)("p",{className:"font-semibold text-red-600",children:null==(b=z.calculations.lossPips)?void 0:b.toFixed(1)})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[z.analysis&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Analysis"}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:z.analysis})]}),z.notes&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Notes"}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:z.notes})]}),z.riskManagementLessons&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Risk Management Lessons"}),(0,a.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:z.riskManagementLessons})]}),z.tags&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:z.tags.split(",").map((e,t)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-sm rounded-full",children:e.trim()},t))})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Trade Timeline"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Created:"}),(0,a.jsx)("span",{className:"font-semibold",children:new Date(z.createdAt).toLocaleString()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Last Updated:"}),(0,a.jsx)("span",{className:"font-semibold",children:new Date(z.updatedAt).toLocaleString()})]})]})]})]})]})})]})}),H&&G&&(0,a.jsx)(d,{trade:G,accounts:ee,onClose:()=>{_(!1),J(null)},onTradeUpdated:e=>{w(t=>t.map(t=>t._id===e._id?e:t)),_(!1),J(null)}}),O&&q&&(0,a.jsx)(c,{trade:q,accounts:ee,onClose:()=>{$(!1),X(null)},onStatusUpdated:(e,t)=>{w(t=>t.map(t=>t._id===e._id?e:t)),t&&et(e=>e.map(e=>e.id===t.id||e._id===t._id?t:e)),$(!1),X(null)}}),U&&(0,a.jsx)(x,{onClose:()=>V(!1),onAccountAdded:e=>{et(t=>[...t,e]),V(!1)}})]})}function d(e){var t,s,l;let{trade:o,accounts:i,onClose:d,onTradeUpdated:c}=e;console.log("EditTradeModal - Trade data:",o),console.log("EditTradeModal - Strategy from trade:",o.strategy);let[x,u]=(0,r.useState)({tradingPair:o.tradingPair||"",entryPrice:o.entryPrice||"",takeProfit:o.takeProfit||"",stopLoss:o.stopLoss||"",direction:o.direction||"long",strategy:o.strategy||"",analysis:o.analysis||"",notes:o.notes||"",riskManagementLessons:o.riskManagementLessons||"",tags:o.tags||"",riskPerTrade:o.riskPerTrade||2,accountSize:o.accountSize||0,status:o.status||"planning",actualEntry:o.actualEntry||"",actualExit:o.actualExit||"",exitReason:o.exitReason||"",actualProfit:o.actualProfit||"",screenshot:null,closingImage:null}),[m,h]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null),[j,b]=(0,r.useState)(null),[v,f]=(0,r.useState)("setup"),[y,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)([]),[L,P]=(0,r.useState)(!1),[C,M]=(0,r.useState)({riskAmount:0,lotSize:0,potentialProfit:0,potentialLoss:0,profitPips:0,lossPips:0,riskRewardRatio:0}),S={forex:[{pair:"EUR/USD",name:"Euro/US Dollar"},{pair:"GBP/USD",name:"British Pound/US Dollar"},{pair:"USD/JPY",name:"US Dollar/Japanese Yen"},{pair:"USD/CHF",name:"US Dollar/Swiss Franc"},{pair:"AUD/USD",name:"Australian Dollar/US Dollar"},{pair:"USD/CAD",name:"US Dollar/Canadian Dollar"},{pair:"NZD/USD",name:"New Zealand Dollar/US Dollar"}],crypto:[{pair:"BTC/USD",name:"Bitcoin/US Dollar"},{pair:"ETH/USD",name:"Ethereum/US Dollar"},{pair:"LTC/USD",name:"Litecoin/US Dollar"},{pair:"XRP/USD",name:"Ripple/US Dollar"}],commodities:[{pair:"XAUUSD",name:"Gold/US Dollar"},{pair:"XAGUSD",name:"Silver/US Dollar"},{pair:"XTIUSD",name:"Oil/US Dollar"}]},A=e=>{let t=x.tags?x.tags.split(",").map(e=>e.trim()):[];if(!t.includes(e)){let s=[...t,e].join(", ");u(e=>({...e,tags:s}))}},F=async()=>{P(!0);try{let t=n.A.get("auth-token")||localStorage.getItem("auth-token"),s=localStorage.getItem("user");if(!t||!s){console.log("No auth token or user data found"),k([]);return}let a=JSON.parse(s),r=(null==a?void 0:a.id)||(null==a?void 0:a._id);if(!r){console.log("No user ID found"),k([]);return}console.log("Fetching strategies for user:",r);let l=await fetch("/api/strategies?userId=".concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}}),o=await l.json();if(console.log("Strategies API response:",o),l.ok&&o.success){var e;k(o.strategies||[]),console.log("Strategies loaded successfully:",(null==(e=o.strategies)?void 0:e.length)||0)}else console.error("Failed to fetch strategies:",o.message),k([])}catch(e){console.error("Error fetching strategies:",e),k([])}finally{P(!1)}},E=e=>{let t="string"==typeof e?e:e.name;u(e=>({...e,strategy:t})),N(!1)};(0,r.useEffect)(()=>{y&&F()},[y]);let B=e=>{let t=parseFloat(e.entryPrice)||0,s=parseFloat(e.takeProfit)||0,a=parseFloat(e.stopLoss)||0,r=parseFloat(e.accountSize)||0,l=parseFloat(e.riskPerTrade)||2;if(!r||!t||!a)return{riskAmount:0,lotSize:0,potentialProfit:0,potentialLoss:0,profitPips:0,lossPips:0,riskRewardRatio:0};let n=r*l/100,o=1e4*Math.abs(t-a),i=s?1e4*Math.abs(s-t):0,d=o>0?n/(10*o):0,c=10*i*d,x=c>0?c/n:0;return{riskAmount:parseFloat(n.toFixed(2)),lotSize:parseFloat(Math.max(0,d).toFixed(4)),potentialProfit:parseFloat(Math.max(0,c).toFixed(2)),potentialLoss:parseFloat(n.toFixed(2)),profitPips:parseFloat(i.toFixed(1)),lossPips:parseFloat(o.toFixed(1)),riskRewardRatio:parseFloat(x.toFixed(2))}},T=(e,t,s,a)=>{if(!e||!t||!a)return 0;let r=parseFloat(e),l=parseFloat(t),n=parseFloat(a);return isNaN(r)||isNaN(l)||isNaN(n)?0:parseFloat((1e4*("long"===s?l-r:r-l)*10*n).toFixed(2))};(0,r.useEffect)(()=>{let e=B(x);if(M(e),x.actualEntry&&x.actualExit){let t=T(x.actualEntry,x.actualExit,x.direction,e.lotSize);t!==parseFloat(x.actualProfit||0)&&u(e=>({...e,actualProfit:t.toString()}))}},[x.actualEntry,x.actualExit,x.direction,x.entryPrice,x.takeProfit,x.stopLoss,x.accountSize,x.riskPerTrade]);let R=async e=>{e.preventDefault(),h(!0);try{let e=n.A.get("auth-token")||localStorage.getItem("auth-token"),t=localStorage.getItem("user"),s=t?JSON.parse(t):null,a=(null==s?void 0:s.id)||(null==s?void 0:s._id),r=[];x.screenshot?r.push(x.screenshot):o.images&&o.images.length>0&&r.push(...o.images);let l=[];x.closingImage&&l.push(x.closingImage);let i={tradingPair:x.tradingPair,entryPrice:parseFloat(x.entryPrice)||0,takeProfit:parseFloat(x.takeProfit)||0,stopLoss:parseFloat(x.stopLoss)||0,direction:x.direction,strategy:x.strategy,analysis:x.analysis,notes:x.notes,riskManagementLessons:x.riskManagementLessons,tags:x.tags,riskPerTrade:parseFloat(x.riskPerTrade)||2,accountSize:parseFloat(x.accountSize)||0,status:x.status,actualEntry:x.actualEntry?parseFloat(x.actualEntry):null,actualExit:x.actualExit?parseFloat(x.actualExit):null,exitReason:x.exitReason,actualProfit:x.actualProfit?parseFloat(x.actualProfit):null,calculations:C,images:r,closingImages:l},d=await fetch("/api/trades",{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({tradeId:o._id,userId:a,...i})}),u=await d.json();d.ok&&u.success?c({...o,...i,updatedAt:new Date}):alert("Failed to update trade: "+(u.message||"Unknown error"))}catch(e){console.error("Error updating trade:",e),alert("Error updating trade: "+e.message)}finally{h(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-7xl h-[95vh] flex flex-col shadow-2xl border border-gray-100",children:[(0,a.jsxs)("div",{className:"relative p-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Edit Trade"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,a.jsx)("span",{className:"text-gray-600",children:o.tradingPair}),(0,a.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:["long"===o.direction?(0,a.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}):(0,a.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:null==(t=o.direction)?void 0:t.toUpperCase()})]}),(0,a.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium ".concat("win"===o.status?"bg-green-100 text-green-700":"loss"===o.status?"bg-red-100 text-red-700":"active"===o.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:["win"===o.status&&(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"loss"===o.status&&(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"active"===o.status&&(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"planning"===o.status&&(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,a.jsx)("span",{children:(null==(s=o.status)?void 0:s.charAt(0).toUpperCase())+(null==(l=o.status)?void 0:l.slice(1))})]})]})]})]}),(0,a.jsx)("button",{onClick:d,className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-white/80 rounded-2xl transition-all duration-200",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-indigo-600"})]}),(0,a.jsx)("div",{className:"px-8 pt-6 border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex space-x-8",children:[{id:"setup",name:"Trade Setup",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"execution",name:"Execution",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},{id:"analysis",name:"Analysis",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{id:"media",name:"Media",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})})}].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>f(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-all duration-200 ".concat(v===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.icon,(0,a.jsx)("span",{children:e.name})]},e.id))})}),(0,a.jsxs)("form",{onSubmit:R,className:"flex-1 flex flex-col min-h-0",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-8",children:["setup"===v&&(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Pair"}),(0,a.jsxs)("select",{value:x.tradingPair,onChange:e=>u(t=>({...t,tradingPair:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select Trading Pair"}),(0,a.jsx)("optgroup",{label:"Forex",children:S.forex.map(e=>(0,a.jsxs)("option",{value:e.pair,children:[e.pair," - ",e.name]},e.pair))}),(0,a.jsx)("optgroup",{label:"Crypto",children:S.crypto.map(e=>(0,a.jsxs)("option",{value:e.pair,children:[e.pair," - ",e.name]},e.pair))}),(0,a.jsx)("optgroup",{label:"Commodities",children:S.commodities.map(e=>(0,a.jsxs)("option",{value:e.pair,children:[e.pair," - ",e.name]},e.pair))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direction"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>u(e=>({...e,direction:"long"})),className:"px-4 py-3 rounded-xl border-2 font-medium transition-all duration-200 flex items-center justify-center space-x-2 ".concat("long"===x.direction?"border-green-500 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:border-green-300"),children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),(0,a.jsx)("span",{children:"Long"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>u(e=>({...e,direction:"short"})),className:"px-4 py-3 rounded-xl border-2 font-medium transition-all duration-200 flex items-center justify-center space-x-2 ".concat("short"===x.direction?"border-red-500 bg-red-50 text-red-700":"border-gray-300 text-gray-600 hover:border-red-300"),children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),(0,a.jsx)("span",{children:"Short"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,a.jsxs)("select",{value:x.status,onChange:e=>u(t=>({...t,status:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[(0,a.jsx)("option",{value:"planning",children:"Planning"}),(0,a.jsx)("option",{value:"active",children:"Active"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Use the status update button in the trade list to mark trades as win/loss"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Strategy"}),(0,a.jsx)("button",{type:"button",onClick:()=>N(!0),className:"w-full p-4 bg-gray-50 hover:bg-gray-100 border border-gray-300 hover:border-purple-300 rounded-xl text-left transition-all duration-200 group",children:x.strategy?(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-sm",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:x.strategy}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Selected Strategy (Auto-populated)"})]}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-purple-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"font-semibold text-gray-700",children:"Select Strategy"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Choose from your saved strategies"})]}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-purple-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Price Levels"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Price"}),(0,a.jsx)("input",{type:"number",step:"0.00001",value:x.entryPrice,onChange:e=>u(t=>({...t,entryPrice:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 font-mono",required:!0,placeholder:"1.23456"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,a.jsx)("span",{children:"Take Profit"})]})}),(0,a.jsx)("input",{type:"number",step:"0.00001",value:x.takeProfit,onChange:e=>u(t=>({...t,takeProfit:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 font-mono",required:!0,placeholder:"1.25000"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,a.jsx)("span",{children:"Stop Loss"})]})}),(0,a.jsx)("input",{type:"number",step:"0.00001",value:x.stopLoss,onChange:e=>u(t=>({...t,stopLoss:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 font-mono",required:!0,placeholder:"1.22000"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Risk Management"})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Size"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:x.accountSize,onChange:e=>u(t=>({...t,accountSize:e.target.value})),className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200",required:!0,placeholder:"10000"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Percentage"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",step:"0.1",value:x.riskPerTrade,onChange:e=>u(t=>({...t,riskPerTrade:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200",required:!0,placeholder:"2"}),(0,a.jsx)("span",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Live Calculations"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Risk Amount"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-red-600",children:["$",C.riskAmount]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Potential Profit"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["$",C.potentialProfit]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Position Size"}),(0,a.jsx)("p",{className:"text-xl font-bold text-blue-600",children:C.lotSize})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Risk:Reward"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-purple-600",children:["1:",C.riskRewardRatio]})]})]})]})]})]})}),"execution"===v&&(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Actual Execution"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Entry"}),(0,a.jsx)("input",{type:"number",step:"0.00001",value:x.actualEntry,onChange:e=>u(t=>({...t,actualEntry:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 font-mono",placeholder:"Actual entry price"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Exit"}),(0,a.jsx)("input",{type:"number",step:"0.00001",value:x.actualExit,onChange:e=>u(t=>({...t,actualExit:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 font-mono",placeholder:"Actual exit price"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{children:"Final P&L"}),(0,a.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Auto-calculated"})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:x.actualProfit,readOnly:!0,className:"w-full pl-8 pr-12 py-3 border rounded-xl transition-all duration-200 font-semibold ".concat(parseFloat(x.actualProfit||0)>=0?"border-green-300 bg-green-50 text-green-700":"border-red-300 bg-red-50 text-red-700"),placeholder:"Auto-calculated from actual prices"}),(0,a.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}),x.actualEntry&&x.actualExit&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Calculated from: ",x.actualEntry," â†’ ",x.actualExit," (",x.direction,")"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exit Reason"}),(0,a.jsxs)("select",{value:x.exitReason,onChange:e=>u(t=>({...t,exitReason:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200",children:[(0,a.jsx)("option",{value:"",children:"Select reason"}),(0,a.jsx)("option",{value:"take-profit",children:"Take Profit Hit"}),(0,a.jsx)("option",{value:"stop-loss",children:"Stop Loss Hit"}),(0,a.jsx)("option",{value:"manual-close",children:"Manual Close"}),(0,a.jsx)("option",{value:"trailing-stop",children:"Trailing Stop"}),(0,a.jsx)("option",{value:"news-event",children:"News Event"}),(0,a.jsx)("option",{value:"time-based",children:"Time Based"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Metrics"})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Planned vs Actual"}),(0,a.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Comparison"})]}),(0,a.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Entry:"}),(0,a.jsxs)("span",{className:"text-sm font-mono",children:[x.entryPrice," â†’ ",x.actualEntry||"N/A"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:"Exit:"}),(0,a.jsxs)("span",{className:"text-sm font-mono",children:[x.takeProfit," â†’ ",x.actualExit||"N/A"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"P&L:"}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Planned: $",C.potentialProfit]}),(0,a.jsxs)("div",{className:"text-sm font-bold ".concat(parseFloat(x.actualProfit||0)>=0?"text-green-600":"text-red-600"),children:["Actual: $",x.actualProfit||"0.00"]})]})]})]})]})})]})]})}),"analysis"===v&&(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Trade Analysis"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Market Analysis"}),(0,a.jsx)("textarea",{value:x.analysis,onChange:e=>u(t=>({...t,analysis:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200 resize-none",rows:5,placeholder:"Describe your market analysis, setup reasoning, confluence factors, technical indicators used..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Trade Notes"}),(0,a.jsx)("textarea",{value:x.notes,onChange:e=>u(t=>({...t,notes:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200 resize-none",rows:4,placeholder:"Additional observations, market conditions, emotions, execution notes..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Risk Management Lessons"}),(0,a.jsx)("textarea",{value:x.riskManagementLessons,onChange:e=>u(t=>({...t,riskManagementLessons:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200 resize-none",rows:3,placeholder:"What did you learn about risk management from this trade? What would you do differently?"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Trade Tags"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Custom Tags"}),(0,a.jsx)("input",{type:"text",value:x.tags,onChange:e=>u(t=>({...t,tags:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Enter comma-separated tags (e.g., breakout, trend-following, scalping)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:["scalping","swing-trade","day-trade","breakout","trend-following","support-resistance","news-trade","technical-analysis","momentum","reversal","continuation","pullback","bounce","channel"].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>A(e),className:"px-3 py-2 bg-indigo-50 text-indigo-700 text-sm rounded-xl hover:bg-indigo-100 transition-all duration-200 border border-indigo-200 flex items-center space-x-1",children:[(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),(0,a.jsx)("span",{children:e})]},e))})]})]})]})]})}),"media"===v&&(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Entry Screenshot"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center hover:border-green-400 hover:bg-green-25 transition-all duration-300 group",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];if(t){u(e=>({...e,screenshot:t}));let e=new FileReader;e.onload=e=>g(e.target.result),e.readAsDataURL(t)}},className:"hidden",id:"entry-screenshot-upload"}),(0,a.jsx)("label",{htmlFor:"entry-screenshot-upload",className:"cursor-pointer",children:p?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("img",{src:p,alt:"Entry screenshot",className:"max-w-full h-64 object-cover rounded-2xl mx-auto shadow-lg"}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-green-600 font-semibold",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,a.jsx)("span",{children:"Change Entry Image"})]})]}):o.images&&o.images.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-gray-500",children:[(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,a.jsx)("p",{className:"text-sm font-medium",children:"Existing entry image"})]}),(0,a.jsxs)("div",{className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Replace Entry Image"]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-400 mb-6",children:(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900 mb-2",children:"Upload Entry Screenshot"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"PNG, JPG, GIF up to 10MB"}),(0,a.jsxs)("div",{className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Choose File"]})]})})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Closing Screenshot"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center hover:border-red-400 hover:bg-red-25 transition-all duration-300 group",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];if(t){u(e=>({...e,closingImage:t}));let e=new FileReader;e.onload=e=>b(e.target.result),e.readAsDataURL(t)}},className:"hidden",id:"closing-screenshot-upload"}),(0,a.jsx)("label",{htmlFor:"closing-screenshot-upload",className:"cursor-pointer",children:j?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("img",{src:j,alt:"Closing screenshot",className:"max-w-full h-64 object-cover rounded-2xl mx-auto shadow-lg"}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-red-600 font-semibold",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,a.jsx)("span",{children:"Change Closing Image"})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-400 mb-6",children:(0,a.jsx)("svg",{className:"w-16 h-16 mx-auto group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,a.jsx)("p",{className:"text-xl font-bold text-gray-900 mb-2",children:"Upload Closing Screenshot"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"PNG, JPG, GIF up to 10MB"}),(0,a.jsxs)("div",{className:"inline-flex items-center px-6 py-3 bg-red-600 text-white rounded-xl font-semibold hover:bg-red-700 transition-colors",children:[(0,a.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Choose File"]})]})})]})]})]})})]})}),(0,a.jsx)("div",{className:"bg-white border-t border-gray-200 p-6 mt-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsxs)("span",{children:["Last updated: ",new Date(o.updatedAt||o.createdAt).toLocaleDateString()]})]})}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:d,className:"px-6 py-3 text-gray-700 bg-gray-100 rounded-xl hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:m,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,a.jsx)("span",{children:"Updating..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,a.jsx)("span",{children:"Update Trade"})]})})]})]})})]}),y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden shadow-xl",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Strategy"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Choose from your saved trading strategies"})]}),(0,a.jsx)("button",{onClick:()=>N(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsx)("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:L?(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),(0,a.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading strategies..."})]}):w.length>0?(0,a.jsx)("div",{className:"space-y-2",children:w.map(e=>(0,a.jsx)("button",{onClick:()=>E(e),className:"w-full p-4 text-left border border-gray-100 rounded-xl hover:border-purple-200 hover:bg-purple-50/50 transition-all duration-200 group",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-purple-600 rounded-xl flex items-center justify-center shadow-sm",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.description||"No description"})]})]}),(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-purple-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},e._id||e.id))}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No strategies found"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Create strategies in the add-trade page to see them here"})]})})]})})]})})}function c(e){var t,s,l,o,i,d;let{trade:c,accounts:x,onClose:u,onStatusUpdated:m}=e,[h,p]=(0,r.useState)("win"===c.status||"loss"===c.status?c.status:"win"),[g,j]=(0,r.useState)(!1),[b,v]=(0,r.useState)("status"),[f,y]=(0,r.useState)({actualEntry:c.actualEntry||c.entryPrice||"",actualExit:c.actualExit||"",stopLoss:c.stopLoss||"",takeProfit:c.takeProfit||"",exitReason:c.exitReason||"",notes:c.notes||"",actualProfit:c.actualProfit||"",exitType:c.actualExit?"price":"other",manualPL:c.actualProfit||"",exitDescription:c.exitDescription||"",closingImage:null}),N=e=>{let t=f.actualExit===c.takeProfit||f.actualExit===c.stopLoss;(!f.actualExit&&!f.manualPL||t||C)&&("win"===e&&c.takeProfit?(y(e=>({...e,actualExit:c.takeProfit,exitType:"price"})),M("win")):"loss"===e&&c.stopLoss&&(y(e=>({...e,actualExit:c.stopLoss,exitType:"price"})),M("loss")))},[w,k]=(0,r.useState)({actualPL:0,pips:0,riskRewardRatio:0,accountImpact:0}),[L,P]=(0,r.useState)({previewPL:0,previewPips:0,previewRiskReward:0,previewAccountImpact:0}),[C,M]=(0,r.useState)(null),S=x.find(e=>e.id===c.accountId||e._id===c.accountId),A=e=>{var t;let s,a=parseFloat(e.actualEntry)||0,r=parseFloat(e.actualExit)||0,l=parseFloat(e.stopLoss)||0,n=parseFloat(e.takeProfit)||0,o=parseFloat(e.manualPL)||0;if("other"===e.exitType){let e=(null==S?void 0:S.balance)||1e4;return{actualPL:o,pips:0,riskRewardRatio:0,accountImpact:parseFloat((o?o/e*100:0).toFixed(2))}}if(!a||!r)return{actualPL:0,pips:0,riskRewardRatio:0,accountImpact:0};let i=1e4*Math.abs(r-a);s="long"===c.direction?r-a:a-r;let d=1e4*s*10*((null==(t=c.calculations)?void 0:t.lotSize)||.1),x=0;if(l&&n&&a){let e=1e4*Math.abs(a-l);x=1e4*Math.abs(n-a)/e}let u=d/((null==S?void 0:S.balance)||1e4)*100;return{actualPL:parseFloat(d.toFixed(2)),pips:parseFloat(i.toFixed(1)),riskRewardRatio:parseFloat(x.toFixed(2)),accountImpact:parseFloat(u.toFixed(2))}},F=()=>{var e;let t,s;if(!h||"win"!==h&&"loss"!==h)return{previewPL:0,previewPips:0,previewRiskReward:0,previewAccountImpact:0};let a=parseFloat(c.entryPrice)||0,r=parseFloat(c.takeProfit)||0,l=parseFloat(c.stopLoss)||0,n=(null==(e=c.calculations)?void 0:e.lotSize)||.1,o=(null==S?void 0:S.balance)||1e4;if(!a||!r||!l)return{previewPL:0,previewPips:0,previewRiskReward:0,previewAccountImpact:0};"win"===h?(t=1e4*Math.abs(r-a),s="long"===c.direction?r-a:a-r):(t=1e4*Math.abs(l-a),s="long"===c.direction?l-a:a-l);let i=1e4*s*10*n,d=i/o*100,x=1e4*Math.abs(a-l),u=1e4*Math.abs(r-a);return{previewPL:parseFloat(i.toFixed(2)),previewPips:parseFloat(t.toFixed(1)),previewRiskReward:parseFloat((u/x).toFixed(2)),previewAccountImpact:parseFloat(d.toFixed(2))}};(0,r.useEffect)(()=>{let e=A(f);k(e),"price"===f.exitType&&e.actualPL!==parseFloat(f.actualProfit||0)?y(t=>({...t,actualProfit:e.actualPL.toString()})):"other"===f.exitType&&f.manualPL!==f.actualProfit&&y(e=>({...e,actualProfit:f.manualPL}))},[f.actualEntry,f.actualExit,f.stopLoss,f.takeProfit,f.exitType,f.manualPL]),(0,r.useEffect)(()=>{P(F())},[h,c.entryPrice,c.takeProfit,c.stopLoss,c.direction,c.calculations,S]);let E=async e=>{e.preventDefault(),j(!0);try{let e=n.A.get("auth-token")||localStorage.getItem("auth-token"),t=localStorage.getItem("user"),s=t?JSON.parse(t):null,a=(null==s?void 0:s.id)||(null==s?void 0:s._id),r=[];f.closingImage?r.push(f.closingImage):c.closingImages&&c.closingImages.length>0&&r.push(...c.closingImages);let l={status:h,actualEntry:f.actualEntry?parseFloat(f.actualEntry):null,actualExit:"price"===f.exitType&&f.actualExit?parseFloat(f.actualExit):null,stopLoss:f.stopLoss?parseFloat(f.stopLoss):c.stopLoss,takeProfit:f.takeProfit?parseFloat(f.takeProfit):c.takeProfit,exitReason:f.exitReason,notes:f.notes,actualProfit:w.actualPL,exitType:f.exitType,exitDescription:"other"===f.exitType?f.exitDescription:null,closingImages:r,calculations:{...c.calculations,actualPL:w.actualPL,pips:w.pips,riskRewardRatio:w.riskRewardRatio,accountImpact:w.accountImpact}},o=await fetch("/api/trades",{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({tradeId:c._id,userId:a,...l})}),i=await o.json();if(o.ok&&i.success){let t=null;if(0!==w.actualPL&&S){let s=S.balance+w.actualPL;(await fetch("/api/accounts",{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({accountId:S.id||S._id,userId:a,updates:{balance:s}})})).ok&&(t={...S,balance:s})}m({...c,...l},t)}else alert("Failed to update trade status: "+(i.message||"Unknown error"))}catch(e){console.error("Error updating trade status:",e),alert("Error updating trade status: "+e.message)}finally{j(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl border border-gray-100",children:[(0,a.jsxs)("div",{className:"relative p-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Update Trade Status"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,a.jsx)("span",{className:"text-gray-600 font-semibold",children:c.tradingPair}),(0,a.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:["long"===c.direction?(0,a.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}):(0,a.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),(0,a.jsx)("span",{className:"text-gray-600 font-medium",children:null==(t=c.direction)?void 0:t.toUpperCase()})]}),(0,a.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,a.jsx)("div",{className:"flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium ".concat("win"===c.status?"bg-green-100 text-green-700":"loss"===c.status?"bg-red-100 text-red-700":"active"===c.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"),children:(0,a.jsxs)("span",{children:["Current: ",(null==(s=c.status)?void 0:s.charAt(0).toUpperCase())+(null==(l=c.status)?void 0:l.slice(1))]})})]})]})]}),(0,a.jsx)("button",{onClick:u,className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-white/80 rounded-2xl transition-all duration-200",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 to-emerald-600"})]}),(0,a.jsx)("div",{className:"px-8 pt-6 border-b border-gray-200",children:(0,a.jsx)("nav",{className:"flex space-x-8",children:[{id:"status",name:"Status & Outcome",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"execution",name:"Execution Details",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},{id:"analysis",name:"Analysis & Notes",icon:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>v(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-all duration-200 ".concat(b===e.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e.icon,(0,a.jsx)("span",{children:e.name})]},e.id))})}),(0,a.jsxs)("form",{onSubmit:E,className:"flex-1 flex flex-col min-h-0",children:[(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-8",children:["status"===b&&(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Trade Outcome"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{p("win"),N("win")},className:"p-6 rounded-2xl border-2 font-medium transition-all duration-200 flex flex-col items-center space-y-3 ".concat("win"===h?"border-green-500 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:border-green-300 hover:bg-green-50"),children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat("win"===h?"bg-green-500":"bg-gray-300"),children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Win"}),(0,a.jsx)("span",{className:"text-sm text-center",children:"Trade was profitable"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>{p("loss"),N("loss")},className:"p-6 rounded-2xl border-2 font-medium transition-all duration-200 flex flex-col items-center space-y-3 ".concat("loss"===h?"border-red-500 bg-red-50 text-red-700":"border-gray-300 text-gray-600 hover:border-red-300 hover:bg-red-50"),children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat("loss"===h?"bg-red-500":"bg-gray-300"),children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:"Loss"}),(0,a.jsx)("span",{className:"text-sm text-center",children:"Trade was not profitable"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exit Reason"}),(0,a.jsxs)("select",{value:f.exitReason,onChange:e=>y(t=>({...t,exitReason:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",children:[(0,a.jsx)("option",{value:"",children:"Select exit reason"}),(0,a.jsx)("option",{value:"take-profit-hit",children:"Take Profit Hit"}),(0,a.jsx)("option",{value:"stop-loss-hit",children:"Stop Loss Hit"}),(0,a.jsx)("option",{value:"manual-close",children:"Manual Close"}),(0,a.jsx)("option",{value:"trailing-stop",children:"Trailing Stop"}),(0,a.jsx)("option",{value:"market-close",children:"Market Close"}),(0,a.jsx)("option",{value:"risk-management",children:"Risk Management"}),(0,a.jsx)("option",{value:"strategy-signal",children:"Strategy Signal"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Metrics"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["P&L",0===w.actualPL&&0!==L.previewPL&&(0,a.jsx)("span",{className:"ml-1 text-xs text-blue-600",children:"(Preview)"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat((0!==w.actualPL?w.actualPL:L.previewPL)>=0?"text-green-600":"text-red-600"),children:["$",(0!==w.actualPL?w.actualPL:L.previewPL)>=0?"+":"","$",0!==w.actualPL?w.actualPL:L.previewPL]}),0===w.actualPL&&0!==L.previewPL&&(0,a.jsxs)("div",{className:"text-xs text-blue-500 mt-1",children:["Based on ","win"===h?"take profit":"stop loss"]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Pips",0===w.pips&&0!==L.previewPips&&(0,a.jsx)("span",{className:"ml-1 text-xs text-blue-600",children:"(Preview)"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:"price"===f.exitType?w.pips:0===w.pips&&0!==L.previewPips?L.previewPips:"N/A"}),"other"===f.exitType&&0===w.pips&&0===L.previewPips&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Requires exit price"}),0===w.pips&&0!==L.previewPips&&"other"!==f.exitType&&(0,a.jsxs)("div",{className:"text-xs text-blue-500 mt-1",children:["Based on ","win"===h?"TP":"SL"]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["R:R Ratio",0===w.riskRewardRatio&&0!==L.previewRiskReward&&(0,a.jsx)("span",{className:"ml-1 text-xs text-blue-600",children:"(Preview)"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:"price"===f.exitType&&w.riskRewardRatio>0?"1:".concat(w.riskRewardRatio):0===w.riskRewardRatio&&L.previewRiskReward>0?"1:".concat(L.previewRiskReward):"N/A"}),"other"===f.exitType&&0===w.riskRewardRatio&&0===L.previewRiskReward&&(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Requires exit price"}),0===w.riskRewardRatio&&0!==L.previewRiskReward&&"other"!==f.exitType&&(0,a.jsx)("div",{className:"text-xs text-blue-500 mt-1",children:"Based on planned levels"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Account Impact",0===w.accountImpact&&0!==L.previewAccountImpact&&(0,a.jsx)("span",{className:"ml-1 text-xs text-blue-600",children:"(Preview)"})]}),(0,a.jsxs)("div",{className:"text-2xl font-bold ".concat((0!==w.accountImpact?w.accountImpact:L.previewAccountImpact)>=0?"text-green-600":"text-red-600"),children:[(0!==w.accountImpact?w.accountImpact:L.previewAccountImpact)>=0?"+":"",0!==w.accountImpact?w.accountImpact:L.previewAccountImpact,"%"]}),0===w.accountImpact&&0!==L.previewAccountImpact&&(0,a.jsxs)("div",{className:"text-xs text-blue-500 mt-1",children:["Based on ","win"===h?"take profit":"stop loss"]})]})]}),S&&(0,a.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-xl",children:[(0,a.jsxs)("div",{className:"text-sm text-blue-700 mb-1",children:["Account: ",S.name,0===w.actualPL&&0!==L.previewPL&&(0,a.jsx)("span",{className:"ml-1 text-xs",children:"(Preview)"})]}),(0,a.jsxs)("div",{className:"text-lg font-semibold text-blue-900",children:["New Balance: $",(S.balance+(0!==w.actualPL?w.actualPL:L.previewPL)).toFixed(2)]}),0===w.actualPL&&0!==L.previewPL&&(0,a.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:["Expected if ","win"===h?"take profit hits":"stop loss hits"]})]})]})]})}),"execution"===b&&(0,a.jsx)("div",{className:"space-y-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Execution Prices"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Exit Information Type"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>y(e=>({...e,exitType:"price"})),className:"p-4 rounded-xl border-2 font-medium transition-all duration-200 flex flex-col items-center space-y-2 ".concat("price"===f.exitType?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-600 hover:border-blue-300 hover:bg-blue-50"),children:[(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Use Exit Price"}),(0,a.jsx)("span",{className:"text-xs text-center",children:"Enter actual exit price for automatic P&L calculation"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>y(e=>({...e,exitType:"other"})),className:"p-4 rounded-xl border-2 font-medium transition-all duration-200 flex flex-col items-center space-y-2 ".concat("other"===f.exitType?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 text-gray-600 hover:border-purple-300 hover:bg-purple-50"),children:[(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})}),(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Manual P&L"}),(0,a.jsx)("span",{className:"text-xs text-center",children:"Enter P&L manually without exit price"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{children:"Actual Entry"}),f.actualEntry===c.entryPrice&&(0,a.jsx)("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:"Auto-filled"})]})}),(0,a.jsx)("input",{type:"number",step:"0.00001",value:f.actualEntry,onChange:e=>y(t=>({...t,actualEntry:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 font-mono",placeholder:c.entryPrice||"1.23456"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Planned: ",c.entryPrice]}),f.actualEntry!==c.entryPrice&&c.entryPrice&&(0,a.jsx)("button",{type:"button",onClick:()=>y(e=>({...e,actualEntry:c.entryPrice})),className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Use planned price"})]})]}),"price"===f.exitType?(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-orange-500 rounded-full"}),(0,a.jsx)("span",{children:"Actual Exit Price"}),("win"===h&&f.actualExit===c.takeProfit||"loss"===h&&f.actualExit===c.stopLoss)&&(0,a.jsxs)("span",{className:"text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded-full",children:["Auto-filled from ","win"===h?"TP":"SL"]})]})}),(0,a.jsx)("input",{type:"number",step:"0.00001",value:f.actualExit,onChange:e=>{y(t=>({...t,actualExit:e.target.value})),e.target.value!==c.takeProfit&&e.target.value!==c.stopLoss&&M(null)},className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 font-mono",placeholder:"1.25000"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsxs)("div",{className:"flex space-x-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["TP: ",c.takeProfit]}),(0,a.jsxs)("span",{children:["SL: ",c.stopLoss]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[c.takeProfit&&f.actualExit!==c.takeProfit&&(0,a.jsx)("button",{type:"button",onClick:()=>{y(e=>({...e,actualExit:c.takeProfit})),M("win")},className:"text-xs text-green-600 hover:text-green-800 underline",children:"Use TP"}),c.stopLoss&&f.actualExit!==c.stopLoss&&(0,a.jsx)("button",{type:"button",onClick:()=>{y(e=>({...e,actualExit:c.stopLoss})),M("loss")},className:"text-xs text-red-600 hover:text-red-800 underline",children:"Use SL"})]})]})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,a.jsx)("span",{children:"Manual P&L Amount"})]})}),(0,a.jsx)("input",{type:"number",step:"0.01",value:f.manualPL,onChange:e=>y(t=>({...t,manualPL:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 font-mono",placeholder:"Enter profit/loss amount (e.g., 150.00 or -75.50)"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter positive for profit, negative for loss"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exit Description"}),(0,a.jsx)("textarea",{value:f.exitDescription,onChange:e=>y(t=>({...t,exitDescription:e.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 resize-none",placeholder:"Describe how the trade was closed (e.g., partial close, trailing stop, manual close due to news, etc.)"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,a.jsx)("span",{children:"Stop Loss"}),f.stopLoss===c.stopLoss&&(0,a.jsx)("span",{className:"text-xs text-red-600 bg-red-100 px-2 py-1 rounded-full",children:"Original"})]})}),(0,a.jsx)("input",{type:"number",step:"0.00001",value:f.stopLoss,onChange:e=>y(t=>({...t,stopLoss:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 font-mono",placeholder:c.stopLoss||"1.22000"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Original: ",c.stopLoss]}),f.stopLoss!==c.stopLoss&&c.stopLoss&&(0,a.jsx)("button",{type:"button",onClick:()=>y(e=>({...e,stopLoss:c.stopLoss})),className:"text-xs text-red-600 hover:text-red-800 underline",children:"Reset to original"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,a.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,a.jsx)("span",{children:"Take Profit"}),f.takeProfit===c.takeProfit&&(0,a.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"Original"})]})}),(0,a.jsx)("input",{type:"number",step:"0.00001",value:f.takeProfit,onChange:e=>y(t=>({...t,takeProfit:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 font-mono",placeholder:c.takeProfit||"1.25000"}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Original: ",c.takeProfit]}),f.takeProfit!==c.takeProfit&&c.takeProfit&&(0,a.jsx)("button",{type:"button",onClick:()=>y(e=>({...e,takeProfit:c.takeProfit})),className:"text-xs text-green-600 hover:text-green-800 underline",children:"Reset to original"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"price"===f.exitType?"Actual P&L (Auto-calculated)":"Actual P&L (Manual Entry)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"number",step:"0.01",value:f.actualProfit,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-50 font-mono text-lg font-semibold"}),(0,a.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,a.jsx)("span",{className:"text-sm font-medium ".concat(parseFloat(f.actualProfit||0)>=0?"text-green-600":"text-red-600"),children:parseFloat(f.actualProfit||0)>=0?"â†—":"â†˜"})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"price"===f.exitType?"Automatically calculated based on entry/exit prices":"Based on your manual P&L entry"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Original Trade Setup"})]}),(0,a.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Fill Options:"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{y(e=>({...e,actualEntry:c.entryPrice,actualExit:c.takeProfit,exitType:"price"})),M("win")},className:"px-3 py-2 bg-green-100 text-green-700 rounded-lg text-xs font-medium hover:bg-green-200 transition-colors",children:"Fill Win Scenario (TP Hit)"}),(0,a.jsx)("button",{type:"button",onClick:()=>{y(e=>({...e,actualEntry:c.entryPrice,actualExit:c.stopLoss,exitType:"price"})),M("loss")},className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg text-xs font-medium hover:bg-red-200 transition-colors",children:"Fill Loss Scenario (SL Hit)"}),(0,a.jsx)("button",{type:"button",onClick:()=>{y(e=>({...e,actualEntry:c.entryPrice,stopLoss:c.stopLoss,takeProfit:c.takeProfit})),M(null)},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium hover:bg-blue-200 transition-colors",children:"Reset All to Original"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Trading Pair"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:c.tradingPair})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Direction"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["long"===c.direction?(0,a.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}):(0,a.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),(0,a.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:null==(o=c.direction)?void 0:o.toUpperCase()})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Lot Size"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:(null==(i=c.calculations)?void 0:i.lotSize)||"N/A"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Risk Amount"}),(0,a.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:["$",(null==(d=c.calculations)?void 0:d.riskAmount)||"N/A"]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4",children:[(0,a.jsx)("div",{className:"text-sm text-blue-700 mb-1",children:"Strategy"}),(0,a.jsx)("div",{className:"text-lg font-semibold text-blue-900",children:c.strategy||"No strategy specified"})]})]})]})]})}),"analysis"===b&&(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Trade Notes"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),(0,a.jsx)("textarea",{value:f.notes,onChange:e=>y(t=>({...t,notes:e.target.value})),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all duration-200 resize-none",placeholder:"Add any additional notes about the trade execution, market conditions, or lessons learned..."})]}),c.tags&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Trade Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:c.tags.split(",").map((e,t)=>(0,a.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:e.trim()},t))})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Closing Chart"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[f.closingImage?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:f.closingImage,alt:"Closing chart",className:"w-full h-64 object-cover rounded-xl border border-gray-200"}),(0,a.jsx)("button",{type:"button",onClick:()=>{y(e=>({...e,closingImage:null}))},className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-purple-400 transition-colors",children:[(0,a.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("label",{htmlFor:"closing-image-upload",className:"cursor-pointer",children:[(0,a.jsx)("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Upload closing chart image"}),(0,a.jsx)("span",{className:"mt-1 block text-sm text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]}),(0,a.jsx)("input",{id:"closing-image-upload",type:"file",className:"hidden",accept:"image/*",onChange:e=>{let t=e.target.files[0];if(t){if(t.size>5242880)return void alert("Image size should be less than 5MB");let e=new FileReader;e.onload=e=>{y(t=>({...t,closingImage:e.target.result}))},e.readAsDataURL(t)}}})]}),(0,a.jsx)("button",{type:"button",onClick:()=>document.getElementById("closing-image-upload").click(),className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:"Choose Image"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Upload a screenshot of your chart at the time of closing the trade for future reference and analysis."}),c.closingImages&&c.closingImages.length>0&&!f.closingImage&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Existing Closing Images"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:c.closingImages.map((e,t)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e,alt:"Existing closing chart ".concat(t+1),className:"w-full h-24 object-cover rounded-lg border border-gray-200"}),(0,a.jsx)("button",{type:"button",onClick:()=>y(t=>({...t,closingImage:e})),className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all duration-200 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs font-medium opacity-0 hover:opacity-100 transition-opacity",children:"Use This Image"})})]},t))})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Original Trade Analysis"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Original Analysis"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:c.analysis||"No original analysis provided"})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Risk Management Lessons"}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:c.riskManagementLessons||"No risk management lessons recorded"})]})]})]})]})]})}),(0,a.jsx)("div",{className:"p-8 bg-gray-50 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("span",{className:"font-medium",children:"Account:"})," ",(null==S?void 0:S.name)||"Unknown Account",0!==w.actualPL&&(0,a.jsxs)("span",{className:"ml-4",children:[(0,a.jsx)("span",{className:"font-medium",children:"Balance Change:"}),(0,a.jsxs)("span",{className:"ml-1 font-semibold ".concat(w.actualPL>=0?"text-green-600":"text-red-600"),children:[w.actualPL>=0?"+":"","$",w.actualPL]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{type:"button",onClick:u,className:"px-6 py-3 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200 font-medium",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:g||!f.actualEntry||"price"===f.exitType&&!f.actualExit||"other"===f.exitType&&!f.manualPL,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 font-medium shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,a.jsx)("span",{children:"Updating..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,a.jsx)("span",{children:"Update Trade Status"})]})})]})]})})]})]})})}function x(e){let{onClose:t,onAccountAdded:s}=e,[l,o]=(0,r.useState)({name:"",balance:"",tag:"personal"}),[i,d]=(0,r.useState)(!1),c=async e=>{e.preventDefault(),d(!0);try{let e=n.A.get("auth-token")||localStorage.getItem("auth-token"),t=localStorage.getItem("user"),a=t?JSON.parse(t):null,r=(null==a?void 0:a.id)||(null==a?void 0:a._id),o=await fetch("/api/accounts",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({userId:r,name:l.name,balance:parseFloat(l.balance)||0,tag:l.tag})}),i=await o.json();o.ok&&i.success?s(i.account):alert("Failed to create account: "+(i.message||"Unknown error"))}catch(e){console.error("Error creating account:",e),alert("Error creating account: "+e.message)}finally{d(!1)}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-xl",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Account"}),(0,a.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,a.jsxs)("form",{onSubmit:c,className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name"}),(0,a.jsx)("input",{type:"text",value:l.name,onChange:e=>o(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"e.g., Main Trading Account",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Initial Balance"}),(0,a.jsx)("input",{type:"number",value:l.balance,onChange:e=>o(t=>({...t,balance:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"10000",step:"0.01"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type"}),(0,a.jsxs)("select",{value:l.tag,onChange:e=>o(t=>({...t,tag:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[(0,a.jsx)("option",{value:"personal",children:"Personal"}),(0,a.jsx)("option",{value:"funded",children:"Funded"}),(0,a.jsx)("option",{value:"demo",children:"Demo"}),(0,a.jsx)("option",{value:"forex",children:"Forex"}),(0,a.jsx)("option",{value:"crypto",children:"Crypto"})]})]}),(0,a.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:i?"Creating...":"Create Account"})]})]})]})})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},7383:(e,t,s)=>{"use strict";function a(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)e[a]=s[a]}return e}s.d(t,{A:()=>r});var r=function e(t,s){function r(e,r,l){if("undefined"!=typeof document){"number"==typeof(l=a({},s,l)).expires&&(l.expires=new Date(Date.now()+864e5*l.expires)),l.expires&&(l.expires=l.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var n="";for(var o in l)l[o]&&(n+="; "+o,!0!==l[o]&&(n+="="+l[o].split(";")[0]));return document.cookie=e+"="+t.write(r,e)+n}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var s=document.cookie?document.cookie.split("; "):[],a={},r=0;r<s.length;r++){var l=s[r].split("="),n=l.slice(1).join("=");try{var o=decodeURIComponent(l[0]);if(a[o]=t.read(n,o),e===o)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){r(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(s)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},e=>{var t=t=>e(e.s=t);e.O(0,[387,441,684,358],()=>t(1240)),_N_E=e.O()}]);