(()=>{var e={};e.id=854,e.ids=[854],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},991:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(687),a=s(3210),l=s(6189),n=s(5659),i=s(411);function o(){let e=(0,l.useRouter)(),[t,s]=(0,a.useState)(null),[o,c]=(0,a.useState)(!0),[x,m]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[b,j]=(0,a.useState)(null),[f,v]=(0,a.useState)(""),[y,N]=(0,a.useState)("all"),[w,k]=(0,a.useState)("newest"),[P,L]=(0,a.useState)(!1),[C,S]=(0,a.useState)(!1),[A,M]=(0,a.useState)(!1),[D,R]=(0,a.useState)(!1),[T,F]=(0,a.useState)(null),[E,B]=(0,a.useState)(!1),[U,z]=(0,a.useState)({}),[W,I]=(0,a.useState)({}),[$,H]=(0,a.useState)({}),[V,J]=(0,a.useState)({}),[_,O]=(0,a.useState)(!1),[G,X]=(0,a.useState)({name:"",balance:"",tag:"personal"}),Y=async()=>{if(G.name&&G.balance)try{let e=n.A.get("auth-token"),t=await fetch("/api/accounts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({name:G.name,balance:parseFloat(G.balance),tag:G.tag})});if(t.ok){let e=await t.json();g(t=>[...t,e]),O(!1),X({name:"",balance:"",tag:"personal"});let s=String(e.id||e._id);j(s),localStorage.setItem("currentAccountId",s)}}catch(e){console.error("Error adding account:",e)}},q=async e=>{try{let t=n.A.get("auth-token");if((await fetch(`/api/accounts/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&(g(t=>t.filter(t=>(t.id||t._id)!==e)),String(b)===String(e))){let t=p.filter(t=>t.id!==e&&t._id!==e);if(t.length>0){let e=t[0].id||t[0]._id;j(e),localStorage.setItem("currentAccountId",String(e))}}}catch(e){console.error("Error deleting account:",e)}},Z=e=>{F(e),L(!0)},Q=e=>{F(e),I({dateTime:e.dateTime||new Date().toISOString(),manualDateTime:e.manualDateTime||!1,weekday:e.weekday||"",month:e.month||"",quarter:e.quarter||"",accountSize:e.accountSize||0,direction:e.direction||"",tradingPair:e.tradingPair||"",entryPrice:e.entryPrice||"",takeProfit:e.takeProfit||"",stopLoss:e.stopLoss||"",riskPercent:e.riskPercent||"2",setup:e.setup||"",htfFramework:e.htfFramework||"",strategy:e.strategy||"",dailyProfile:e.dailyProfile||"",entryCandle:e.entryCandle||"",entryTime:e.entryTime||"",entryTimeFrame:e.entryTimeFrame||"",entryConfluence:e.entryConfluence||"",duration:e.duration||"",plannedRR:e.plannedRR||"",analysis:e.analysis||"",notes:e.notes||"",riskManagementLessons:e.riskManagementLessons||"",tags:e.tags||"",screenshot:e.screenshot||null,status:e.status||null,actualEntry:e.actualEntry||null,actualExit:e.actualExit||null,actualProfit:e.actualProfit||null,exitReason:e.exitReason||null,exitNotes:e.exitNotes||""});let t=em({accountSize:e.accountSize||0,direction:e.direction||"",tradingPair:e.tradingPair||"",entryPrice:e.entryPrice||"",takeProfit:e.takeProfit||"",stopLoss:e.stopLoss||"",riskPercent:e.riskPercent||"2"});H(e.calculatedResults||t),z({}),S(!0)},K=e=>{F(e),J({status:e.status||"",actualEntry:e.actualEntry||"",actualExit:e.actualExit||"",actualProfit:e.actualProfit||"",exitReason:e.exitReason||"",exitNotes:e.exitNotes||""}),z({}),M(!0)},ee=e=>{F(e),R(!0)},et=async()=>{if(T){B(!0);try{let e=n.A.get("auth-token");(await fetch(`/api/am-trades?tradeId=${T._id}&userId=${t?.id||t?._id}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}})).ok?(m(e=>e.filter(e=>e._id!==T._id)),R(!1),F(null),alert("Trade deleted successfully!")):alert("Failed to delete trade. Please try again.")}catch(e){console.error("Error deleting trade:",e),alert("Error deleting trade. Please check your connection and try again.")}finally{B(!1)}}},es=async()=>{if(!T)return;let e={};if(W.tradingPair||(e.tradingPair="Trading pair is required"),W.entryPrice||(e.entryPrice="Entry price is required"),W.takeProfit||(e.takeProfit="Take profit is required"),W.stopLoss||(e.stopLoss="Stop loss is required"),Object.keys(e).length>0)return void z(e);B(!0);try{let e=n.A.get("auth-token");(await fetch("/api/am-trades",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify({tradeId:T._id,userId:t?.id||t?._id,...W,calculatedResults:$})})).ok?(m(e=>e.map(e=>e._id===T._id?{...e,...W,calculatedResults:$}:e)),S(!1),F(null),I({}),H({}),alert("Trade updated successfully!")):alert("Failed to update trade. Please try again.")}catch(e){console.error("Error updating trade:",e),alert("Error updating trade. Please check your connection and try again.")}finally{B(!1)}},er=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e||0),ea=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),el=e=>{switch(e){case"win":return"bg-green-100 text-green-800 border-green-200";case"loss":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},en=e=>"long"===e?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200",ei=e=>{if(!e)return;let t=new Date(e),s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],r=["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],a=`Q${Math.floor(t.getMonth()/3)+1}`;I(t=>({...t,dateTime:e,weekday:s,month:r,quarter:a}))},eo={forex:[{pair:"EUR/USD",name:"Euro/US Dollar"},{pair:"GBP/USD",name:"British Pound/US Dollar"},{pair:"USD/JPY",name:"US Dollar/Japanese Yen"},{pair:"USD/CHF",name:"US Dollar/Swiss Franc"},{pair:"AUD/USD",name:"Australian Dollar/US Dollar"},{pair:"USD/CAD",name:"US Dollar/Canadian Dollar"},{pair:"NZD/USD",name:"New Zealand Dollar/US Dollar"},{pair:"EUR/GBP",name:"Euro/British Pound"},{pair:"EUR/JPY",name:"Euro/Japanese Yen"},{pair:"GBP/JPY",name:"British Pound/Japanese Yen"},{pair:"AUD/JPY",name:"Australian Dollar/Japanese Yen"},{pair:"CAD/JPY",name:"Canadian Dollar/Japanese Yen"},{pair:"CHF/JPY",name:"Swiss Franc/Japanese Yen"},{pair:"NZD/JPY",name:"New Zealand Dollar/Japanese Yen"},{pair:"EUR/CHF",name:"Euro/Swiss Franc"},{pair:"GBP/CHF",name:"British Pound/Swiss Franc"},{pair:"AUD/CHF",name:"Australian Dollar/Swiss Franc"},{pair:"CAD/CHF",name:"Canadian Dollar/Swiss Franc"},{pair:"NZD/CHF",name:"New Zealand Dollar/Swiss Franc"},{pair:"EUR/AUD",name:"Euro/Australian Dollar"},{pair:"GBP/AUD",name:"British Pound/Australian Dollar"},{pair:"EUR/CAD",name:"Euro/Canadian Dollar"},{pair:"GBP/CAD",name:"British Pound/Canadian Dollar"},{pair:"AUD/CAD",name:"Australian Dollar/Canadian Dollar"},{pair:"EUR/NZD",name:"Euro/New Zealand Dollar"},{pair:"GBP/NZD",name:"British Pound/New Zealand Dollar"},{pair:"AUD/NZD",name:"Australian Dollar/New Zealand Dollar"},{pair:"CAD/NZD",name:"Canadian Dollar/New Zealand Dollar"}],commodities:[{pair:"XAUUSD",name:"Gold/US Dollar"},{pair:"XAGUSD",name:"Silver/US Dollar"},{pair:"XBRUSD",name:"Brent Oil/US Dollar"},{pair:"XTIUSD",name:"WTI Oil/US Dollar"},{pair:"XAUEUR",name:"Gold/Euro"},{pair:"XAUJPY",name:"Gold/Japanese Yen"},{pair:"XAUGBP",name:"Gold/British Pound"},{pair:"XAUAUD",name:"Gold/Australian Dollar"},{pair:"XAUCAD",name:"Gold/Canadian Dollar"},{pair:"XAUCHF",name:"Gold/Swiss Franc"}],crypto:[{pair:"BTC/USD",name:"Bitcoin/US Dollar"},{pair:"ETH/USD",name:"Ethereum/US Dollar"},{pair:"LTC/USD",name:"Litecoin/US Dollar"},{pair:"XRP/USD",name:"Ripple/US Dollar"},{pair:"ADA/USD",name:"Cardano/US Dollar"},{pair:"DOT/USD",name:"Polkadot/US Dollar"},{pair:"LINK/USD",name:"Chainlink/US Dollar"},{pair:"BCH/USD",name:"Bitcoin Cash/US Dollar"},{pair:"XLM/USD",name:"Stellar/US Dollar"},{pair:"UNI/USD",name:"Uniswap/US Dollar"}]},ed=e=>{for(let[t,s]of Object.entries(eo)){let r=s.find(t=>t.pair===e);if(r)return{...r,category:t}}return null},ec=e=>{if(!e)return 0;let{category:t,pair:s}=e;switch(t){case"forex":if(s.includes("JPY"))return 1e3;return 10;case"crypto":return 1;case"commodities":if(s.includes("XAU"))return 100;if(s.includes("XAG"))return 50;if(s.includes("XTI")||s.includes("XBR"))return 100;return 10;default:return 10}},ex=(e,t,s)=>{if(!e||!t||!s)return 0;let{category:r,pair:a}=e,l=Math.abs(t-s);switch(r){case"forex":if(a.includes("JPY"))return 100*l;return 1e4*l;case"crypto":return l;case"commodities":if(a.includes("XAU"))return 10*l;if(a.includes("XAG"))return 100*l;return a.includes("XTI")||a.includes("XBR"),100*l;default:return 1e4*l}},em=e=>{let t=parseFloat(e.entryPrice)||0,s=parseFloat(e.takeProfit)||0,r=parseFloat(e.stopLoss)||0,a=parseFloat(e.accountSize)||0,l=parseFloat(e.riskPercent)||2;if(!a||!t||!r||!s||!e.tradingPair)return{riskAmount:0,lotSize:0,potentialProfit:0,potentialLoss:0,profitPips:0,lossPips:0,riskRewardRatio:0};let n=ed(e.tradingPair);if(!n)return{riskAmount:0,lotSize:0,potentialProfit:0,potentialLoss:0,profitPips:0,lossPips:0,riskRewardRatio:0};let i=a*l/100,o=ex(n,t,r),d=ex(n,t,s),c=ec(n),x=o>0?i/(o*c):0,m=d*c*x,u=m>0?m/i:0;return{riskAmount:parseFloat(i.toFixed(2)),lotSize:parseFloat(Math.max(0,x).toFixed(4)),potentialProfit:parseFloat(Math.max(0,m).toFixed(2)),potentialLoss:parseFloat(i.toFixed(2)),profitPips:parseFloat(d.toFixed(1)),lossPips:parseFloat(o.toFixed(1)),riskRewardRatio:parseFloat(u.toFixed(2))}};return o?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50/30 to-purple-50/30",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-blue-600 border-t-transparent"})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50/30 to-purple-50/30 flex",children:[(0,r.jsx)(i.A,{user:t,currentAccountId:b,accounts:p,onAccountSwitch:e=>{j(e),localStorage.setItem("currentAccountId",e)},onAddAccount:()=>O(!0),onEditAccount:e=>{console.log("Edit account:",e)},onDeleteAccount:q,onLogout:()=>{n.A.remove("auth-token"),localStorage.removeItem("auth-token"),localStorage.removeItem("user"),localStorage.removeItem("isAMTradeMode"),e.push("/login")},onUpdateUser:e=>s(e)}),(0,r.jsx)("main",{className:"flex-1 lg:ml-64 p-3 sm:p-6 lg:p-8",children:(0,r.jsxs)("div",{className:"max-w-8xl mx-auto",children:[(0,r.jsx)("div",{className:"mb-6 sm:mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-gray-900 via-blue-800 to-purple-800 bg-clip-text text-transparent",children:"AM Trade Journal"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1 sm:mt-2 text-sm sm:text-base",children:"Track and analyze your Asian Market trading performance"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/am-trade/add-am-trade"),className:"px-4 sm:px-6 py-2.5 sm:py-3 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:via-purple-700 hover:to-indigo-700 transition-all duration-200 font-medium text-sm sm:text-base shadow-lg hover:shadow-xl flex items-center justify-center space-x-2 transform hover:scale-105 active:scale-95",children:[(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{children:"Add New Trade"})]})]})}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-blue-50/30 rounded-2xl sm:rounded-3xl border border-gray-200/60 p-4 sm:p-6 lg:p-8 shadow-lg hover:shadow-xl transition-all duration-300 mb-6 sm:mb-8",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status Filter"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"px-3 py-2.5 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white transition-all duration-200 shadow-sm hover:shadow-md text-sm sm:text-base min-w-[140px]",children:[(0,r.jsx)("option",{value:"all",children:"All Trades"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"win",children:"Wins"}),(0,r.jsx)("option",{value:"loss",children:"Losses"})]}),(0,r.jsx)("div",{className:"absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 9l-7 7-7-7"})})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"px-3 py-2.5 sm:px-4 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none bg-white transition-all duration-200 shadow-sm hover:shadow-md text-sm sm:text-base min-w-[140px]",children:[(0,r.jsx)("option",{value:"newest",children:"Newest First"}),(0,r.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,r.jsx)("option",{value:"profit",children:"Highest Profit"}),(0,r.jsx)("option",{value:"loss",children:"Highest Loss"}),(0,r.jsx)("option",{value:"pair",children:"Trading Pair"})]}),(0,r.jsx)("div",{className:"absolute right-2 sm:right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,r.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 9l-7 7-7-7"})})})]})]})]}),(0,r.jsxs)("div",{className:"flex-1 lg:max-w-md",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Trades"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 sm:w-5 sm:h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,r.jsx)("input",{type:"text",value:f,onChange:e=>v(e.target.value),placeholder:"Search by pair, strategy, setup...",className:"w-full pl-9 sm:pl-12 pr-4 py-2.5 sm:py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 shadow-sm hover:shadow-md text-sm sm:text-base"}),f&&(0,r.jsx)("button",{onClick:()=>v(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:u.length}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Total Trades"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-green-600",children:u.filter(e=>"win"===e.status).length}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Wins"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-2xl sm:text-3xl font-bold text-red-600",children:u.filter(e=>"loss"===e.status).length}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Losses"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("p",{className:"text-2xl sm:text-3xl font-bold text-blue-600",children:[u.length>0&&Math.round(u.filter(e=>"win"===e.status).length/u.filter(e=>e.status).length*100)||0,"%"]}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:"Win Rate"})]})]})})]}),u.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 sm:gap-6",children:u.map(e=>(0,r.jsxs)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-blue-50/30 rounded-2xl sm:rounded-3xl border border-gray-200/60 p-4 sm:p-6 shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-[1.02]",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("span",{className:"text-white text-sm sm:text-base font-bold",children:e.tradingPair?.split("/")[0]||"N/A"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-base sm:text-lg font-bold text-gray-900",children:e.tradingPair}),(0,r.jsx)("p",{className:"text-xs sm:text-sm text-gray-600",children:ea(e.dateTime||e.createdAt)})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:`inline-flex px-2 py-1 rounded-lg text-xs font-medium border ${en(e.direction)}`,children:e.direction?.toUpperCase()||"N/A"}),(0,r.jsx)("span",{className:`inline-flex px-2 py-1 rounded-lg text-xs font-medium border ${el(e.status)}`,children:e.status?e.status.charAt(0).toUpperCase()+e.status.slice(1):"Pending"})]})]}),(0,r.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,r.jsxs)("div",{className:"bg-white/50 rounded-xl p-3 border border-gray-200/50",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Price"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e.entryPrice||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white/50 rounded-xl p-3 border border-gray-200/50",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Take Profit"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:e.takeProfit||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white/50 rounded-xl p-3 border border-gray-200/50",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Stop Loss"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:e.stopLoss||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white/50 rounded-xl p-3 border border-gray-200/50",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"P&L"}),(0,r.jsx)("p",{className:`text-sm font-semibold ${(e.actualProfit||0)>0?"text-green-600":0>(e.actualProfit||0)?"text-red-600":"text-gray-600"}`,children:er(e.actualProfit||0)})]})]}),(e.strategy||e.setup)&&(0,r.jsxs)("div",{className:"bg-white/50 rounded-xl p-3 border border-gray-200/50",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Strategy & Setup"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.strategy||e.setup||"N/A"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>Z(e),className:"p-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"View Details",children:(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,r.jsx)("button",{onClick:()=>Q(e),className:"p-2 text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"Edit Trade",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("button",{onClick:()=>K(e),className:"p-2 text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"Update Status",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,r.jsx)("button",{onClick:()=>ee(e),className:"p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-all duration-200 transform hover:scale-110",title:"Delete Trade",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:e.weekday||"N/A"})]})]},e._id||e.id))}):(0,r.jsxs)("div",{className:"bg-gradient-to-br from-white via-gray-50/50 to-blue-50/30 rounded-2xl sm:rounded-3xl border border-gray-200/60 p-8 sm:p-12 shadow-lg text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-6 bg-gradient-to-br from-blue-100 to-purple-100 rounded-2xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-8 h-8 sm:w-10 sm:h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-2",children:"No AM Trades Found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6 text-sm sm:text-base",children:f||"all"!==y?"No trades match your current filters. Try adjusting your search or filter criteria.":"Start building your AM trading journal by adding your first morning session trade."}),(0,r.jsxs)("button",{onClick:()=>e.push("/am-trade/add-am-trade"),className:"px-6 py-3 bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:via-purple-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl transform hover:scale-105 active:scale-95 flex items-center space-x-2 mx-auto",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{children:"Add Your First AM Trade"})]})]})]})}),_&&(0,r.jsx)("div",{className:"fixed inset-0 backdrop-blur-sm bg-gray-900/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md transform transition-all",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Add New Account"}),(0,r.jsx)("button",{onClick:()=>{O(!1),X({name:"",balance:"",tag:"personal"})},className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("div",{className:"px-6 py-4 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name"}),(0,r.jsx)("input",{type:"text",value:G.name,onChange:e=>X({...G,name:e.target.value}),placeholder:"e.g., My AM Trading Account",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Initial Balance"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,r.jsx)("input",{type:"number",value:G.balance,onChange:e=>X({...G,balance:e.target.value}),placeholder:"0.00",className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Account Type"}),(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2",children:[{value:"personal",label:"Personal",color:"bg-blue-600"},{value:"business",label:"Business",color:"bg-green-600"},{value:"demo",label:"Demo",color:"bg-purple-600"},{value:"forex",label:"Forex",color:"bg-orange-600"},{value:"crypto",label:"Crypto",color:"bg-indigo-600"}].map(e=>(0,r.jsxs)("button",{onClick:()=>X({...G,tag:e.value}),className:`flex items-center space-x-3 p-3 rounded-lg border-2 transition-all ${G.tag===e.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[(0,r.jsx)("div",{className:`w-4 h-4 rounded-full ${e.color}`}),(0,r.jsx)("span",{className:"font-medium text-gray-900",children:e.label})]},e.value))})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Preview"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:`w-3 h-3 rounded-full ${{personal:"bg-blue-600",business:"bg-green-600",demo:"bg-purple-600",forex:"bg-orange-600",crypto:"bg-indigo-600"}[G.tag]||"bg-gray-600"}`}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:G.name||"Account Name"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["$",G.balance?parseFloat(G.balance).toLocaleString():"0.00"," • ",{personal:"Personal",business:"Business",demo:"Demo",forex:"Forex",crypto:"Crypto"}[G.tag]||"Personal"]})]})]})]})]}),(0,r.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-xl",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{O(!1),X({name:"",balance:"",tag:"personal"})},className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{onClick:Y,disabled:!G.name||!G.balance,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})}),(0,r.jsx)("span",{children:"Add Account"})]})]})})]})}),P&&T&&(0,r.jsx)("div",{className:"fixed inset-0 backdrop-blur-md bg-gray-900/60 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-2xl w-full max-w-4xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden transform transition-all duration-300",children:[(0,r.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 via-purple-50 to-indigo-50",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900",children:"Trade Details"}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:[T.tradingPair," • ",ea(T.dateTime||T.createdAt)]})]}),(0,r.jsx)("button",{onClick:()=>L(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-white/50 transition-all duration-200 self-end sm:self-auto transform hover:scale-110",children:(0,r.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[70vh] sm:max-h-[60vh]",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Date & Time Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Date & Time"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:ea(T.dateTime||T.createdAt)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Weekday"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.weekday||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Month"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.month||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Quarter"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.quarter||"N/A"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-4 border border-green-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-green-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Basic Trade Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Trading Pair"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-blue-600",children:T.tradingPair||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Direction"}),(0,r.jsx)("span",{className:`inline-flex px-2 py-1 rounded-lg text-xs font-medium border ${en(T.direction)}`,children:T.direction?.toUpperCase()||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Account Size"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:er(T.accountSize)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Price"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-blue-600",children:T.entryPrice||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Take Profit"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:T.takeProfit||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Stop Loss"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:T.stopLoss||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk Percent"}),(0,r.jsxs)("p",{className:"text-sm font-semibold",children:[T.riskPercent||"2","%"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Status"}),(0,r.jsx)("span",{className:`inline-flex px-2 py-1 rounded-lg text-xs font-medium border ${el(T.status)}`,children:T.status?T.status.charAt(0).toUpperCase()+T.status.slice(1):"Pending"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Actual P&L"}),(0,r.jsx)("p",{className:`text-sm font-semibold ${(T.actualProfit||0)>0?"text-green-600":0>(T.actualProfit||0)?"text-red-600":"text-gray-600"}`,children:er(T.actualProfit||0)})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-4 border border-purple-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-purple-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"AM Trade Methodology"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Setup"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.setup||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"HTF Framework"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.htfFramework||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Strategy"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.strategy||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Daily Profile"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.dailyProfile||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Candle"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.entryCandle||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Time"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.entryTime||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Timeframe"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.entryTimeFrame||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Entry Confluence"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.entryConfluence||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Duration"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.duration||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Planned R:R"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.plannedRR||"N/A"})]})]})]}),T.calculatedResults&&(0,r.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-4 border border-yellow-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-yellow-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Calculated Results"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk Amount"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:er(T.calculatedResults.riskAmount||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Lot Size"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:T.calculatedResults.lotSize||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Potential Profit"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:er(T.calculatedResults.potentialProfit||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Potential Loss"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:er(T.calculatedResults.potentialLoss||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Profit Pips"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:T.calculatedResults.profitPips||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Loss Pips"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:T.calculatedResults.lossPips||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk:Reward"}),(0,r.jsxs)("p",{className:"text-sm font-semibold text-blue-600",children:["1:",T.calculatedResults.riskRewardRatio||0]})]})]})]}),(T.notes||T.analysis||T.riskManagementLessons)&&(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Notes & Analysis"]}),(0,r.jsxs)("div",{className:"space-y-4",children:[T.analysis&&(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Trade Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:T.analysis})]}),T.notes&&(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Trade Notes"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:T.notes})]}),T.riskManagementLessons&&(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Risk Management Lessons"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:T.riskManagementLessons})]})]})]}),T.tags&&(0,r.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-4 border border-indigo-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-indigo-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Tags"]}),(0,r.jsx)("div",{className:"bg-white rounded-lg p-3 shadow-sm",children:(0,r.jsx)("p",{className:"text-sm text-gray-600",children:T.tags})})]})]})}),(0,r.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-t border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>L(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200",children:"Close"}),(0,r.jsxs)("button",{onClick:()=>{L(!1),Q(T)},className:"px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200 flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,r.jsx)("span",{children:"Edit Trade"})]})]})})]})}),C&&T&&(0,r.jsx)("div",{className:"fixed inset-0 backdrop-blur-md bg-gray-900/60 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl sm:rounded-3xl shadow-2xl w-full max-w-6xl max-h-[95vh] sm:max-h-[90vh] overflow-hidden transform transition-all duration-300",children:[(0,r.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200 bg-gradient-to-r from-green-50 via-emerald-50 to-teal-50",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900",children:"Edit Trade"}),(0,r.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600",children:[T.tradingPair," • ",ea(T.dateTime||T.createdAt)]})]}),(0,r.jsx)("button",{onClick:()=>S(!1),className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-white/50 transition-all duration-200 self-end sm:self-auto transform hover:scale-110",children:(0,r.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[70vh] sm:max-h-[60vh]",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Basic Trade Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Pair *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:W.tradingPair||"",onChange:e=>{let t={...W,tradingPair:e.target.value};I(t),H(em(t))},className:`w-full px-3 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${U.tradingPair?"border-red-300 bg-red-50":"border-gray-300"}`,children:[(0,r.jsx)("option",{value:"",children:"Select Trading Pair"}),Object.entries(eo).map(([e,t])=>(0,r.jsx)("optgroup",{label:e.charAt(0).toUpperCase()+e.slice(1),children:t.map(e=>(0,r.jsxs)("option",{value:e.pair,children:[e.pair," - ",e.name]},e.pair))},e))]}),U.tradingPair&&(0,r.jsx)("p",{className:"text-red-600 text-xs mt-1",children:U.tradingPair})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direction"}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("select",{value:W.direction||"",onChange:e=>I({...W,direction:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Auto-detect"}),(0,r.jsx)("option",{value:"long",children:"Long (Buy)"}),(0,r.jsx)("option",{value:"short",children:"Short (Sell)"})]})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Size"}),(0,r.jsx)("input",{type:"number",value:W.accountSize||"",onChange:e=>{let t={...W,accountSize:e.target.value};I(t),H(em(t))},placeholder:"Enter account size",className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Price *"}),(0,r.jsx)("input",{type:"number",step:"any",value:W.entryPrice||"",onChange:e=>{let t={...W,entryPrice:e.target.value};if(I(t),t.entryPrice&&t.takeProfit){let e=parseFloat(t.entryPrice),s=parseFloat(t.takeProfit);e&&s&&(t.direction=s>e?"long":"short",I(t))}H(em(t))},placeholder:"Enter entry price",className:`w-full px-3 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${U.entryPrice?"border-red-300 bg-red-50":"border-gray-300"}`}),U.entryPrice&&(0,r.jsx)("p",{className:"text-red-600 text-xs mt-1",children:U.entryPrice})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Take Profit *"}),(0,r.jsx)("input",{type:"number",step:"any",value:W.takeProfit||"",onChange:e=>{let t={...W,takeProfit:e.target.value};if(I(t),t.entryPrice&&t.takeProfit){let e=parseFloat(t.entryPrice),s=parseFloat(t.takeProfit);e&&s&&(t.direction=s>e?"long":"short",I(t))}H(em(t))},placeholder:"Enter take profit",className:`w-full px-3 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${U.takeProfit?"border-red-300 bg-red-50":"border-gray-300"}`}),U.takeProfit&&(0,r.jsx)("p",{className:"text-red-600 text-xs mt-1",children:U.takeProfit})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stop Loss *"}),(0,r.jsx)("input",{type:"number",step:"any",value:W.stopLoss||"",onChange:e=>{let t={...W,stopLoss:e.target.value};I(t),H(em(t))},placeholder:"Enter stop loss",className:`w-full px-3 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 ${U.stopLoss?"border-red-300 bg-red-50":"border-gray-300"}`}),U.stopLoss&&(0,r.jsx)("p",{className:"text-red-600 text-xs mt-1",children:U.stopLoss})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-4 border border-indigo-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-indigo-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Date & Time Information"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time"}),(0,r.jsx)("input",{type:"datetime-local",value:W.dateTime?new Date(W.dateTime).toISOString().slice(0,16):"",onChange:e=>ei(e.target.value),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weekday"}),(0,r.jsxs)("select",{value:W.weekday||"",onChange:e=>I({...W,weekday:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select Weekday"}),(0,r.jsx)("option",{value:"Monday",children:"Monday"}),(0,r.jsx)("option",{value:"Tuesday",children:"Tuesday"}),(0,r.jsx)("option",{value:"Wednesday",children:"Wednesday"}),(0,r.jsx)("option",{value:"Thursday",children:"Thursday"}),(0,r.jsx)("option",{value:"Friday",children:"Friday"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Month"}),(0,r.jsxs)("select",{value:W.month||"",onChange:e=>I({...W,month:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select Month"}),(0,r.jsx)("option",{value:"January",children:"January"}),(0,r.jsx)("option",{value:"February",children:"February"}),(0,r.jsx)("option",{value:"March",children:"March"}),(0,r.jsx)("option",{value:"April",children:"April"}),(0,r.jsx)("option",{value:"May",children:"May"}),(0,r.jsx)("option",{value:"June",children:"June"}),(0,r.jsx)("option",{value:"July",children:"July"}),(0,r.jsx)("option",{value:"August",children:"August"}),(0,r.jsx)("option",{value:"September",children:"September"}),(0,r.jsx)("option",{value:"October",children:"October"}),(0,r.jsx)("option",{value:"November",children:"November"}),(0,r.jsx)("option",{value:"December",children:"December"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quarter"}),(0,r.jsxs)("select",{value:W.quarter||"",onChange:e=>I({...W,quarter:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select Quarter"}),(0,r.jsx)("option",{value:"Q1",children:"Q1 (Jan-Mar)"}),(0,r.jsx)("option",{value:"Q2",children:"Q2 (Apr-Jun)"}),(0,r.jsx)("option",{value:"Q3",children:"Q3 (Jul-Sep)"}),(0,r.jsx)("option",{value:"Q4",children:"Q4 (Oct-Dec)"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-purple-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"AM Trade Methodology"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Setup"}),(0,r.jsxs)("select",{value:W.setup||"",onChange:e=>I({...W,setup:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select setup"}),(0,r.jsx)("option",{value:"Continuation Day",children:"Continuation Day"}),(0,r.jsx)("option",{value:"Reversal Day",children:"Reversal Day"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"HTF Framework"}),(0,r.jsxs)("select",{value:W.htfFramework||"",onChange:e=>I({...W,htfFramework:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select HTF framework"}),(0,r.jsx)("option",{value:"Manipulation",children:"Manipulation"}),(0,r.jsx)("option",{value:"Divergence",children:"Divergence"}),(0,r.jsx)("option",{value:"Opposing Candle",children:"Opposing Candle"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Strategy"}),(0,r.jsx)("input",{type:"text",value:W.strategy||"",onChange:e=>I({...W,strategy:e.target.value}),placeholder:"e.g., Breakout, Support/Resistance, Trend Following",className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Daily Profile"}),(0,r.jsxs)("select",{value:W.dailyProfile||"",onChange:e=>I({...W,dailyProfile:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select daily profile"}),(0,r.jsx)("option",{value:"18:00 Reversal",children:"18:00 Reversal"}),(0,r.jsx)("option",{value:"01:00 Reversal",children:"01:00 Reversal"}),(0,r.jsx)("option",{value:"08:00 Reversal",children:"08:00 Reversal"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Candle"}),(0,r.jsxs)("select",{value:W.entryCandle||"",onChange:e=>I({...W,entryCandle:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select entry candle"}),(0,r.jsx)("option",{value:"08:00 Candle",children:"08:00 Candle"}),(0,r.jsx)("option",{value:"01:00 Candle",children:"01:00 Candle"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Time"}),(0,r.jsxs)("select",{value:W.entryTime||"",onChange:e=>I({...W,entryTime:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select entry time"}),(0,r.jsx)("option",{value:"9:30-9:59",children:"9:30-9:59"}),(0,r.jsx)("option",{value:"7:00-7:59",children:"7:00-7:59"}),(0,r.jsx)("option",{value:"4:00-4:59",children:"4:00-4:59"}),(0,r.jsx)("option",{value:"2:00-2:59",children:"2:00-2:59"}),(0,r.jsx)("option",{value:"8:00-8:29",children:"8:00-8:29"}),(0,r.jsx)("option",{value:"12:00-12:59",children:"12:00-12:59"}),(0,r.jsx)("option",{value:"3:00-3:59",children:"3:00-3:59"}),(0,r.jsx)("option",{value:"6:00-6:59",children:"6:00-6:59"}),(0,r.jsx)("option",{value:"11:00-11:59",children:"11:00-11:59"}),(0,r.jsx)("option",{value:"10:00-10:59",children:"10:00-10:59"}),(0,r.jsx)("option",{value:"5:00-5:59",children:"5:00-5:59"}),(0,r.jsx)("option",{value:"9:00-9:29",children:"9:00-9:29"}),(0,r.jsx)("option",{value:"1:00-1:59",children:"1:00-1:59"}),(0,r.jsx)("option",{value:"14:00-14:59",children:"14:00-14:59"}),(0,r.jsx)("option",{value:"13:00-13:59",children:"13:00-13:59"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Timeframe"}),(0,r.jsxs)("select",{value:W.entryTimeFrame||"",onChange:e=>I({...W,entryTimeFrame:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select time frame"}),(0,r.jsx)("option",{value:"1 minute",children:"1 minute"}),(0,r.jsx)("option",{value:"< 5 minutes",children:"< 5 minutes"}),(0,r.jsx)("option",{value:"5 minutes",children:"5 minutes"}),(0,r.jsx)("option",{value:"15 minutes",children:"15 minutes"}),(0,r.jsx)("option",{value:"1 hour",children:"1 hour"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Confluence"}),(0,r.jsxs)("select",{value:W.entryConfluence||"",onChange:e=>I({...W,entryConfluence:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select confluence"}),(0,r.jsx)("option",{value:"Short-term Swing",children:"Short-term Swing"}),(0,r.jsx)("option",{value:"Opposing Candle",children:"Opposing Candle"}),(0,r.jsx)("option",{value:"Volatility Driver",children:"Volatility Driver"}),(0,r.jsx)("option",{value:"Divergence",children:"Divergence"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),(0,r.jsx)("input",{type:"text",value:W.duration||"",onChange:e=>I({...W,duration:e.target.value}),placeholder:"e.g. 45 minutes",className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Percent"}),(0,r.jsxs)("select",{value:W.riskPercent||"2%",onChange:e=>{let t={...W,riskPercent:e.target.value};I(t),H(em(t))},className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select risk %"}),(0,r.jsx)("option",{value:"0.25%",children:"0.25% - Conservative"}),(0,r.jsx)("option",{value:"0.5%",children:"0.5% - Moderate"}),(0,r.jsx)("option",{value:"1%",children:"1% - Standard"}),(0,r.jsx)("option",{value:"2%",children:"2% - Aggressive"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Planned R:R"}),(0,r.jsxs)("select",{value:W.plannedRR||"",onChange:e=>I({...W,plannedRR:e.target.value}),className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select RR"}),(0,r.jsx)("option",{value:"2R",children:"2R - Conservative"}),(0,r.jsx)("option",{value:"3R",children:"3R - Balanced"}),(0,r.jsx)("option",{value:"4R",children:"4R - Aggressive"}),(0,r.jsx)("option",{value:"5R",children:"5R - High Risk"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Analysis & Notes"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Analysis"}),(0,r.jsx)("textarea",{value:W.analysis||"",onChange:e=>I({...W,analysis:e.target.value}),placeholder:"Detailed analysis of the trade setup, market conditions, technical analysis...",rows:4,className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Notes"}),(0,r.jsx)("textarea",{value:W.notes||"",onChange:e=>I({...W,notes:e.target.value}),placeholder:"General notes, observations, feelings during the trade...",rows:3,className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Management Lessons"}),(0,r.jsx)("textarea",{value:W.riskManagementLessons||"",onChange:e=>I({...W,riskManagementLessons:e.target.value}),placeholder:"What did you learn about risk management from this trade?",rows:3,className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,r.jsx)("input",{type:"text",value:W.tags||"",onChange:e=>I({...W,tags:e.target.value}),placeholder:"e.g., breakout, news, high-probability, mistake",className:"w-full px-3 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]})]})]}),$&&Object.keys($).length>0&&(0,r.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-4 border border-yellow-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-yellow-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Live Calculated Results"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk Amount"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:er($.riskAmount||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Lot Size"}),(0,r.jsx)("p",{className:"text-sm font-semibold",children:$.lotSize||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Potential Profit"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:er($.potentialProfit||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Potential Loss"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:er($.potentialLoss||0)})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Profit Pips"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-green-600",children:$.profitPips||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Loss Pips"}),(0,r.jsx)("p",{className:"text-sm font-semibold text-red-600",children:$.lossPips||0})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-3 shadow-sm text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk:Reward"}),(0,r.jsxs)("p",{className:"text-sm font-semibold text-blue-600",children:["1:",$.riskRewardRatio||0]})]})]})]})]})}),(0,r.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-t border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>S(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200",disabled:E,children:"Cancel"}),(0,r.jsx)("button",{onClick:es,disabled:E,className:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center space-x-2",children:E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Saving..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 13l4 4L19 7"})}),(0,r.jsx)("span",{children:"Save Changes"})]})})]})})]})}),A&&T&&(0,r.jsx)(d,{trade:T,accounts:p,onClose:()=>{M(!1),F(null),J({})},onStatusUpdated:(e,t)=>{m(t=>t.map(t=>t._id===e._id?e:t)),t&&g(e=>e.map(e=>e.id===t.id||e._id===t._id?t:e)),M(!1),F(null),J({})}}),!1,D&&T&&(0,r.jsx)("div",{className:"fixed inset-0 backdrop-blur-md bg-gray-900/60 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md transform transition-all duration-300",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Trade"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"This action cannot be undone"})]})]})}),(0,r.jsxs)("div",{className:"px-6 py-4",children:[(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:"Are you sure you want to delete this trade? This will permanently remove:"}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Trading Pair:"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:T.tradingPair})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Date:"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:ea(T.dateTime||T.createdAt)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"P&L:"}),(0,r.jsx)("span",{className:`text-sm font-medium ${(T.actualProfit||0)>0?"text-green-600":0>(T.actualProfit||0)?"text-red-600":"text-gray-600"}`,children:er(T.actualProfit||0)})]})]})]}),(0,r.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-2xl",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>R(!1),className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200",disabled:E,children:"Cancel"}),(0,r.jsx)("button",{onClick:et,disabled:E,className:"px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 flex items-center space-x-2",children:E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Deleting..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,r.jsx)("span",{children:"Delete Trade"})]})})]})})]})})]})}function d({trade:e,accounts:t,onClose:s,onStatusUpdated:l}){let[i,o]=(0,a.useState)("win"===e.status||"loss"===e.status?e.status:"win"),[d,c]=(0,a.useState)(!1),[x,m]=(0,a.useState)("status"),u=e=>null==e||isNaN(e)?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),[h,p]=(0,a.useState)({actualEntry:e.actualEntry||e.entryPrice||"",actualExit:e.actualExit||"",stopLoss:e.stopLoss||"",takeProfit:e.takeProfit||"",exitReason:e.exitReason||"",notes:e.notes||"",actualProfit:e.actualProfit||"",exitType:e.actualExit?"price":"other",manualPL:e.actualProfit||"",exitDescription:e.exitDescription||"",closingImage:null}),g=t=>{let s=h.actualExit===e.takeProfit||h.actualExit===e.stopLoss;(!h.actualExit&&!h.manualPL||s||y)&&("win"===t&&e.takeProfit?(p(t=>({...t,actualExit:e.takeProfit,exitType:"price"})),N("win")):"loss"===t&&e.stopLoss&&(p(t=>({...t,actualExit:e.stopLoss,exitType:"price"})),N("loss")))},[b,j]=(0,a.useState)({actualPL:0,pips:0,riskRewardRatio:0,accountImpact:0}),[f,v]=(0,a.useState)({previewPL:0,previewPips:0,previewRiskReward:0,previewAccountImpact:0}),[y,N]=(0,a.useState)(null),w=t.find(t=>t.id===e.accountId||t._id===e.accountId);console.log("Account finding debug:",{tradeAccountId:e.accountId,availableAccounts:t.map(e=>({id:e.id||e._id,name:e.name})),foundAccount:w?{id:w.id||w._id,name:w.name,balance:w.balance}:null});let k=e=>{if(!e)return null;for(let t of tradingPairs.forex||[])if(t.pair===e)return{category:"forex",pair:t.pair,name:t.name};for(let t of tradingPairs.crypto||[])if(t.pair===e)return{category:"crypto",pair:t.pair,name:t.name};for(let t of tradingPairs.commodities||[])if(t.pair===e)return{category:"commodities",pair:t.pair,name:t.name};return null},P=e=>{if(!e)return 10;let{category:t,pair:s}=e;switch(t){case"forex":if(s.includes("JPY"))return 1e3;return 10;case"crypto":return 1;case"commodities":if(s.includes("XAU"))return 100;return 10;default:return 10}},L=(e,t,s)=>{if(!e||!t||!s)return 0;let{category:r,pair:a}=e,l=Math.abs(t-s);switch(r){case"forex":if(a.includes("JPY"))return 100*l;return 1e4*l;case"crypto":return l;case"commodities":if(a.includes("XAU"))return 10*l;return 100*l;default:return 1e4*l}},C=t=>{let s,r=parseFloat(t.actualEntry)||0,a=parseFloat(t.actualExit)||0,l=parseFloat(t.stopLoss)||0,n=parseFloat(t.takeProfit)||0,i=parseFloat(t.manualPL)||0;if("other"===t.exitType){let e=w?.balance||1e4;return{actualPL:i,pips:0,riskRewardRatio:0,accountImpact:parseFloat((i?i/e*100:0).toFixed(2))}}if(!r||!a)return{actualPL:0,pips:0,riskRewardRatio:0,accountImpact:0};let o=k(e.tradingPair);if(!o){let t=1e4*Math.abs(a-r),s=1e4*("long"===e.direction?a-r:r-a)*10*(e.calculatedResults?.lotSize||.1),l=s/(w?.balance||1e4)*100;return{actualPL:parseFloat(s.toFixed(2)),pips:parseFloat(t.toFixed(1)),riskRewardRatio:0,accountImpact:parseFloat(l.toFixed(2))}}let d=L(o,r,a);s="long"===e.direction?a-r:r-a;let c=e.calculatedResults?.lotSize||.1,x=P(o),m=0;Math.abs(s)>0&&(m=(s>0?1:-1)*d*x*c);let u=0;if(l&&n&&r){let e=L(o,r,l),t=L(o,r,n);u=t>0?t/e:0}let h=m/(w?.balance||1e4)*100;return console.log("AM Trade P&L Calculation Debug:",{tradingPair:e.tradingPair,pairDetails:o,direction:e.direction,actualEntry:r,actualExit:a,priceDifference:s,pips:d,pipValue:x,lotSize:c,actualPL:m,accountBalance:w?.balance||1e4,accountImpact:h}),(isNaN(m)||!isFinite(m))&&(console.error("Invalid P&L calculation detected:",{actualPL:m,priceDifference:s,pips:d,pipValue:x,lotSize:c}),m=0),(isNaN(h)||!isFinite(h))&&(console.error("Invalid account impact calculation detected:",{accountImpact:h,actualPL:m,accountBalance:w?.balance}),h=0),{actualPL:parseFloat(m.toFixed(2)),pips:parseFloat(d.toFixed(1)),riskRewardRatio:parseFloat(u.toFixed(2)),accountImpact:parseFloat(h.toFixed(2))}},S=async t=>{t.preventDefault(),c(!0);try{let t=n.A.get("auth-token")||localStorage.getItem("auth-token"),s=localStorage.getItem("user"),r=s?JSON.parse(s):null,a=r?.id||r?._id,o=[];h.closingImage?o.push(h.closingImage):e.closingImages&&e.closingImages.length>0&&o.push(...e.closingImages);let d={status:i,actualEntry:h.actualEntry?parseFloat(h.actualEntry):null,actualExit:"price"===h.exitType&&h.actualExit?parseFloat(h.actualExit):null,stopLoss:h.stopLoss?parseFloat(h.stopLoss):e.stopLoss,takeProfit:h.takeProfit?parseFloat(h.takeProfit):e.takeProfit,exitReason:h.exitReason,notes:h.notes,actualProfit:b.actualPL,exitType:h.exitType,exitDescription:"other"===h.exitType?h.exitDescription:null,closingImages:o,whatWentWell:h.whatWentWell,improvements:h.improvements,lessons:h.lessons,calculatedResults:{...e.calculatedResults,actualPL:b.actualPL,pips:b.pips,riskRewardRatio:b.riskRewardRatio,accountImpact:b.accountImpact}},c=await fetch("/api/am-trades",{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({tradeId:e._id,userId:a,...d})}),x=await c.json();if(c.ok&&x.success){let s=null;if(0!==b.actualPL&&w&&(e.status!==i||!e.actualProfit)){let r=b.actualPL;e.actualProfit&&e.status&&("win"===e.status||"loss"===e.status)&&(r=b.actualPL-(e.actualProfit||0),console.log("Reversing previous P&L impact:",{previousPL:e.actualProfit,newPL:b.actualPL,netAdjustment:r}));let l=w.balance+r;console.log("Updating account balance:",{currentBalance:w.balance,actualPL:b.actualPL,previousPL:e.actualProfit||0,balanceAdjustment:r,newBalance:l,accountId:w.id||w._id,tradeStatus:`${e.status} -> ${i}`});let n=await fetch("/api/accounts",{method:"PUT",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({accountId:w.id||w._id,userId:a,updates:{balance:l}})});if(n.ok)s={...w,balance:l},console.log("Account balance updated successfully:",s);else{let e=await n.json();console.error("Failed to update account balance:",e),alert("Trade updated but failed to update account balance. Please refresh the page.")}}else console.log("No balance update needed:",{actualPL:b.actualPL,hasCurrentAccount:!!w,statusChange:`${e.status} -> ${i}`,alreadyHasPL:!!e.actualProfit});l({...e,...d},s)}else alert("Failed to update AM trade status: "+(x.message||"Unknown error"))}catch(e){console.error("Error updating AM trade status:",e),alert("Error updating AM trade status: "+e.message)}finally{c(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl border border-gray-100",children:[(0,r.jsxs)("div",{className:"relative p-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Update AM Trade Status"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,r.jsx)("span",{className:"text-gray-600 font-semibold",children:e.tradingPair}),(0,r.jsx)("span",{className:"text-gray-400",children:"•"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:["long"===e.direction?(0,r.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}):(0,r.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),(0,r.jsx)("span",{className:"text-gray-600 font-medium",children:e.direction?.toUpperCase()})]}),(0,r.jsx)("span",{className:"text-gray-400",children:"•"}),(0,r.jsx)("div",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium ${"win"===e.status?"bg-green-100 text-green-700":"loss"===e.status?"bg-red-100 text-red-700":"active"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:(0,r.jsxs)("span",{children:["Current: ",e.status?.charAt(0).toUpperCase()+e.status?.slice(1)||"Pending"]})})]})]})]}),(0,r.jsx)("button",{onClick:s,className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-white/80 rounded-2xl transition-all duration-200",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 to-emerald-600"})]}),(0,r.jsx)("div",{className:"px-8 border-b border-gray-200",children:(0,r.jsx)("div",{className:"flex space-x-8",children:[{id:"status",label:"Trade Status",icon:"\uD83D\uDCCA"},{id:"execution",label:"Execution Details",icon:"⚡"},{id:"analysis",label:"Post-Trade Analysis",icon:"\uD83D\uDCC8"}].map(e=>(0,r.jsxs)("button",{onClick:()=>m(e.id),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 ${x===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,r.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})}),(0,r.jsxs)("div",{className:"flex-1 p-8 overflow-y-auto",children:["status"===x&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-2xl p-6 border border-gray-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Select Trade Outcome"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{onClick:()=>{o("win"),g("win")},className:`relative p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 transform hover:scale-105 ${"win"===i?"border-green-500 bg-gradient-to-br from-green-50 to-emerald-50 shadow-lg":"border-gray-200 bg-white hover:border-green-300 hover:shadow-md"}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${"win"===i?"bg-green-500":"bg-gray-300"}`,children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"Winning Trade"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Trade closed in profit"})]})]}),"win"===i&&(0,r.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),e.takeProfit&&(0,r.jsxs)("div",{className:"bg-white/70 rounded-lg p-3 border border-green-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Target Price"}),(0,r.jsx)("p",{className:"text-lg font-bold text-green-600",children:e.takeProfit})]})]}),(0,r.jsxs)("div",{onClick:()=>{o("loss"),g("loss")},className:`relative p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 transform hover:scale-105 ${"loss"===i?"border-red-500 bg-gradient-to-br from-red-50 to-rose-50 shadow-lg":"border-gray-200 bg-white hover:border-red-300 hover:shadow-md"}`,children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${"loss"===i?"bg-red-500":"bg-gray-300"}`,children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"Losing Trade"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Trade closed in loss"})]})]}),"loss"===i&&(0,r.jsx)("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),e.stopLoss&&(0,r.jsxs)("div",{className:"bg-white/70 rounded-lg p-3 border border-red-200",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Stop Loss"}),(0,r.jsx)("p",{className:"text-lg font-bold text-red-600",children:e.stopLoss})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Expected Results Preview"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Expected P&L"}),(0,r.jsx)("p",{className:`text-xl font-bold ${"win"===i?"text-green-600":"text-red-600"}`,children:u("win"===i?e.calculatedResults?.potentialProfit||0:-(e.calculatedResults?.potentialLoss||0))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Expected Pips"}),(0,r.jsx)("p",{className:`text-xl font-bold ${"win"===i?"text-green-600":"text-red-600"}`,children:"win"===i?`+${e.calculatedResults?.profitPips||0}`:`-${e.calculatedResults?.lossPips||0}`})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Risk:Reward"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:["1:",e.calculatedResults?.riskRewardRatio||0]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200 text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Account Impact"}),(0,r.jsxs)("p",{className:`text-xl font-bold ${"win"===i?"text-green-600":"text-red-600"}`,children:["win"===i?"+":"-",((e.calculatedResults?.potentialProfit||e.calculatedResults?.potentialLoss||0)/(w?.balance||1e4)*100).toFixed(2),"%"]})]})]})]})]}),"execution"===x&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-2xl p-6 border border-gray-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"How was the trade executed?"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{onClick:()=>p(e=>({...e,exitType:"price"})),className:`p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 ${"price"===h.exitType?"border-purple-500 bg-gradient-to-br from-purple-50 to-indigo-50 shadow-lg":"border-gray-200 bg-white hover:border-purple-300 hover:shadow-md"}`,children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${"price"===h.exitType?"bg-purple-500":"bg-gray-300"}`,children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"Price-based Exit"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Specify exact exit price"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Use this when you know the exact price at which the trade was closed."})]}),(0,r.jsxs)("div",{onClick:()=>p(e=>({...e,exitType:"other"})),className:`p-6 rounded-2xl border-2 cursor-pointer transition-all duration-300 ${"other"===h.exitType?"border-orange-500 bg-gradient-to-br from-orange-50 to-yellow-50 shadow-lg":"border-gray-200 bg-white hover:border-orange-300 hover:shadow-md"}`,children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${"other"===h.exitType?"bg-orange-500":"bg-gray-300"}`,children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-gray-900",children:"Manual P&L Entry"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Enter profit/loss directly"})]})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Use this for complex exits, partial closes, or when you only know the final P&L."})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Execution Details"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Actual Entry Price",(0,r.jsx)("span",{className:"text-gray-500 ml-1",children:"(Optional)"})]}),(0,r.jsx)("input",{type:"number",step:"any",value:h.actualEntry,onChange:e=>{let t={...h,actualEntry:e.target.value};p(t),j(C(t))},placeholder:`Planned: ${e.entryPrice||"N/A"}`,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to use planned entry price"})]}),"price"===h.exitType?(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Actual Exit Price *",y&&(0,r.jsxs)("span",{className:"text-blue-600 text-xs ml-2",children:["(Auto-filled from ","win"===y?"Take Profit":"Stop Loss",")"]})]}),(0,r.jsx)("input",{type:"number",step:"any",value:h.actualExit,onChange:e=>{let t={...h,actualExit:e.target.value};p(t),j(C(t)),N(null)},placeholder:"win"===i?`Target: ${e.takeProfit||"N/A"}`:`Stop: ${e.stopLoss||"N/A"}`,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Profit/Loss *"}),(0,r.jsx)("input",{type:"number",step:"any",value:h.manualPL,onChange:e=>{let t={...h,manualPL:e.target.value};p(t),j(C(t))},placeholder:"Enter final P&L amount",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",required:!0}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Positive for profit, negative for loss"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exit Reason"}),(0,r.jsxs)("select",{value:h.exitReason,onChange:e=>p(t=>({...t,exitReason:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select reason..."}),(0,r.jsx)("option",{value:"take-profit-hit",children:"Take Profit Hit"}),(0,r.jsx)("option",{value:"stop-loss-hit",children:"Stop Loss Hit"}),(0,r.jsx)("option",{value:"manual-close-profit",children:"Manual Close (Profit)"}),(0,r.jsx)("option",{value:"manual-close-loss",children:"Manual Close (Loss)"}),(0,r.jsx)("option",{value:"break-even",children:"Break Even Close"}),(0,r.jsx)("option",{value:"partial-close",children:"Partial Close"}),(0,r.jsx)("option",{value:"news-event",children:"News Event"}),(0,r.jsx)("option",{value:"time-based",children:"Time-Based Exit"}),(0,r.jsx)("option",{value:"technical-signal",children:"Technical Signal"}),(0,r.jsx)("option",{value:"risk-management",children:"Risk Management"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exit Description"}),(0,r.jsx)("textarea",{value:h.exitDescription,onChange:e=>p(t=>({...t,exitDescription:e.target.value})),placeholder:"Describe what happened during the exit...",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]})]}),(0,r.jsxs)("div",{className:"mt-8 p-6 bg-white rounded-xl border border-blue-200",children:[(0,r.jsxs)("h4",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Live Calculation Results"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Actual P&L"}),(0,r.jsx)("p",{className:`text-xl font-bold ${b.actualPL>0?"text-green-600":b.actualPL<0?"text-red-600":"text-gray-600"}`,children:u(b.actualPL)})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Pips"}),(0,r.jsxs)("p",{className:`text-xl font-bold ${b.actualPL>0?"text-green-600":b.actualPL<0?"text-red-600":"text-gray-600"}`,children:[b.actualPL>0?"+":"",b.pips]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Risk:Reward"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:["1:",b.riskRewardRatio]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Account Impact"}),(0,r.jsxs)("p",{className:`text-xl font-bold ${b.accountImpact>0?"text-green-600":b.accountImpact<0?"text-red-600":"text-gray-600"}`,children:[b.accountImpact>0?"+":"",b.accountImpact,"%"]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Closing Screenshot",(0,r.jsx)("span",{className:"text-sm font-normal text-gray-600 ml-2",children:"(Optional)"})]}),h.closingImage?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:h.closingImage,alt:"Closing screenshot",className:"w-full max-w-md mx-auto rounded-xl border border-green-200"}),(0,r.jsx)("button",{onClick:()=>{p(e=>({...e,closingImage:null}))},className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors duration-200",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,r.jsxs)("div",{className:"border-2 border-dashed border-green-300 rounded-xl p-8 text-center",children:[(0,r.jsx)("svg",{className:"w-12 h-12 mx-auto mb-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Upload a screenshot of your trade closure"}),(0,r.jsxs)("label",{className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-xl cursor-pointer hover:bg-green-700 transition-colors duration-200",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Choose Image",(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];if(t){if(t.size>5242880)return void alert("Image size should be less than 5MB");let e=new FileReader;e.onload=e=>{p(t=>({...t,closingImage:e.target.result}))},e.readAsDataURL(t)}},className:"hidden"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"PNG, JPG up to 5MB"})]})]})]}),"analysis"===x&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 rounded-2xl p-6 border border-gray-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Post-Trade Analysis & Notes"]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trade Notes & Observations"}),(0,r.jsx)("textarea",{value:h.notes,onChange:e=>p(t=>({...t,notes:e.target.value})),placeholder:"What happened during this trade? Market conditions, emotions, key observations...",rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["What Went Well?",(0,r.jsx)("span",{className:"text-green-600 ml-1",children:"✓"})]}),(0,r.jsx)("textarea",{value:h.whatWentWell||"",onChange:e=>p(t=>({...t,whatWentWell:e.target.value})),placeholder:"What aspects of this trade were executed well? Good decisions, proper risk management, etc.",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["What Could Be Improved?",(0,r.jsx)("span",{className:"text-orange-600 ml-1",children:"⚠"})]}),(0,r.jsx)("textarea",{value:h.improvements||"",onChange:e=>p(t=>({...t,improvements:e.target.value})),placeholder:"What could have been done better? Entry timing, exit strategy, risk management, etc.",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200 resize-none"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Key Lessons Learned",(0,r.jsx)("span",{className:"text-blue-600 ml-1",children:"\uD83D\uDCA1"})]}),(0,r.jsx)("textarea",{value:h.lessons||"",onChange:e=>p(t=>({...t,lessons:e.target.value})),placeholder:"What are the key takeaways from this trade? How will this influence future trades?",rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 resize-none"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[(0,r.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,r.jsx)("svg",{className:"w-6 h-6 mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Final Performance Summary"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Planned vs Actual"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Planned P&L:"}),(0,r.jsx)("span",{className:"text-sm font-medium text-green-600",children:u(e.calculatedResults?.potentialProfit||0)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Actual P&L:"}),(0,r.jsx)("span",{className:`text-sm font-medium ${b.actualPL>0?"text-green-600":b.actualPL<0?"text-red-600":"text-gray-600"}`,children:u(b.actualPL)})]}),(0,r.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Difference:"}),(0,r.jsx)("span",{className:`text-sm font-bold ${b.actualPL-(e.calculatedResults?.potentialProfit||0)>0?"text-green-600":b.actualPL-(e.calculatedResults?.potentialProfit||0)<0?"text-red-600":"text-gray-600"}`,children:u(b.actualPL-(e.calculatedResults?.potentialProfit||0))})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Account Impact"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Previous Balance:"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:u(w?.balance||0)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"P&L Impact:"}),(0,r.jsxs)("span",{className:`text-sm font-medium ${b.actualPL>0?"text-green-600":b.actualPL<0?"text-red-600":"text-gray-600"}`,children:[b.actualPL>0?"+":"",u(b.actualPL)]})]}),(0,r.jsxs)("div",{className:"flex justify-between border-t pt-2",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"New Balance:"}),(0,r.jsx)("span",{className:"text-sm font-bold text-blue-600",children:u((w?.balance||0)+b.actualPL)})]})]})]})]})]})]})]}),(0,r.jsx)("div",{className:"px-8 py-6 border-t border-gray-200 bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("span",{children:["Last updated: ",new Date(e.updatedAt||e.createdAt).toLocaleDateString()]})]})}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:s,className:"px-6 py-3 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200 font-medium",disabled:d,children:"Cancel"}),(0,r.jsx)("button",{onClick:S,disabled:d||!i,className:"px-8 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-xl hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 font-medium shadow-lg hover:shadow-xl flex items-center space-x-2",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Updating..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,r.jsx)("span",{children:"Update AM Trade Status"})]})})]})]})})]})})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},5517:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\trading-journal-app\\\\app\\\\am-trade\\\\journal\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\trading-journal-app\\app\\am-trade\\journal\\page.js","default")},5550:(e,t,s)=>{Promise.resolve().then(s.bind(s,5517))},7302:(e,t,s)=>{Promise.resolve().then(s.bind(s,991))},8972:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(5239),a=s(8088),l=s(8170),n=s.n(l),i=s(893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d={children:["",{children:["am-trade",{children:["journal",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5517)),"E:\\trading-journal-app\\app\\am-trade\\journal\\page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2648)),"E:\\trading-journal-app\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["E:\\trading-journal-app\\app\\am-trade\\journal\\page.js"],x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/am-trade/journal/page",pathname:"/am-trade/journal",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,807,156],()=>s(8972));module.exports=r})();