(()=>{var e={};e.id=822,e.ids=[822],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3246:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=t(5239),a=t(8088),l=t(8170),n=t.n(l),i=t(893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let d={children:["",{children:["journal",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9613)),"E:\\trading-journal-app\\app\\journal\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,2648)),"E:\\trading-journal-app\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["E:\\trading-journal-app\\app\\journal\\page.js"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/journal/page",pathname:"/journal",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4271:(e,s,t)=>{Promise.resolve().then(t.bind(t,7683))},6388:(e,s,t)=>{Promise.resolve().then(t.bind(t,9613))},7683:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var r=t(687),a=t(3210),l=t(6189),n=t(5659),i=t(411);function o(){let e=(0,l.useRouter)(),[s,t]=(0,a.useState)(null),[o,m]=(0,a.useState)([]),[h,u]=(0,a.useState)([]),[p,g]=(0,a.useState)(!0),[j,b]=(0,a.useState)("all"),[v,f]=(0,a.useState)(""),[y,N]=(0,a.useState)("newest"),[w,k]=(0,a.useState)("cards"),[L,P]=(0,a.useState)(null),[C,M]=(0,a.useState)(!1),[S,A]=(0,a.useState)(!1),[E,B]=(0,a.useState)(!1),[T,z]=(0,a.useState)(!1),[W,R]=(0,a.useState)(null),[F,I]=(0,a.useState)(null),[D,U]=(0,a.useState)([]),[V,$]=(0,a.useState)(!1),[H,_]=(0,a.useState)([]),[O,G]=(0,a.useState)(null),q=e=>{switch(e){case"planning":return"bg-blue-100 text-blue-800";case"open":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},J=e=>"LONG"===e?"text-green-600":"text-red-600",X=async e=>{if(H.length<=1)return void alert("Cannot delete the last account");if(confirm("Are you sure you want to delete this account?"))try{let s=n.A.get("auth-token")||localStorage.getItem("auth-token");if((await fetch(`/api/accounts?id=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).ok){if(_(s=>s.filter(s=>(s.id||s._id)!==e)),O===e){let s=H.filter(s=>(s.id||s._id)!==e);s.length>0&&G(s[0].id||s[0]._id)}}else alert("Failed to delete account")}catch(e){console.error("Error deleting account:",e),alert("Error deleting account")}},Y=e=>{P(e),M(!0)},Q=async e=>{if(confirm("Are you sure you want to delete this trade?"))try{let s=n.A.get("auth-token")||localStorage.getItem("auth-token"),t=await fetch(`/api/trades?id=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}),r=await t.json();t.ok&&r.success?(m(s=>s.filter(s=>s._id!==e)),console.log("Trade deleted successfully")):(console.error("Failed to delete trade:",r.message),alert("Failed to delete trade: "+r.message))}catch(e){console.error("Error deleting trade:",e),alert("Error deleting trade: "+e.message)}},Z=e=>{R(e),B(!0)},K=e=>{I(e),z(!0)};if(p)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading trades..."})]})});let ee=(()=>{console.log("=== TRADE STATS DEBUG ==="),console.log("Current Account ID:",O),console.log("Total trades in state:",o.length),console.log("All trades:",o.map(e=>({id:e._id,pair:e.tradingPair,accountId:e.accountId,status:e.status})));let e=o.filter(e=>{let s=e.accountId===O||e.accountId===O?.toString();return console.log(`Trade ${e._id} (${e.tradingPair}): accountId=${e.accountId}, currentAccountId=${O}, matches=${s}`),s});console.log("Filtered account trades:",e.length),console.log("Account trades:",e.map(e=>({id:e._id,pair:e.tradingPair,status:e.status,actualProfit:e.actualProfit})));let s=e.length,t=e.filter(e=>"planning"===e.status).length,r=e.filter(e=>"active"===e.status).length,a=e.filter(e=>"win"===e.status).length,l=e.filter(e=>"loss"===e.status).length,n=a+l,i=e.reduce((e,s)=>e+(s.calculations?.riskAmount||0),0),d=e.reduce((e,s)=>e+(s.calculations?.potentialProfit||0),0),c=e.filter(e=>"win"===e.status||"loss"===e.status).reduce((e,s)=>e+(s.actualProfit||s.calculations?.actualPL||0),0),x=n>0?a/n*100:0,m=e.filter(e=>"win"===e.status).reduce((e,s)=>e+(s.actualProfit||s.calculations?.actualPL||0),0),h=e.filter(e=>"loss"===e.status).reduce((e,s)=>e+Math.abs(s.actualProfit||s.calculations?.actualPL||0),0),u=h>0?m/h:999*(m>0),p=H.find(e=>(e.id||e._id)===O);console.log("Current account found:",p),console.log("All accounts:",H.map(e=>({id:e.id||e._id,name:e.name,balance:e.balance})));let g=p?.balance||0,j=p?.initialBalance||p?.balance||1e4;console.log("Account balance:",g),console.log("Initial balance:",j);let b=j>0?(g-j)/j*100:0;return console.log("Calculated stats:",{total:s,planning:t,active:r,wins:a,losses:l,closed:n,actualPL:c,winRate:x.toFixed(1),profitFactor:999===u?"âˆž":u.toFixed(2),accountBalance:g,accountGrowth:b.toFixed(2)}),console.log("=== END TRADE STATS DEBUG ==="),{total:s,planning:t,active:r,wins:a,losses:l,closed:n,totalRisk:i,totalPotentialProfit:d,actualPL:c,winRate:x,avgWin:a>0?m/a:0,avgLoss:l>0?h/l:0,profitFactor:u,accountBalance:g,accountGrowth:b,accountName:p?.name||"Unknown Account"}})();return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,r.jsx)(i.A,{user:s,currentAccountId:O,accounts:H,onAccountSwitch:e=>{console.log("Switching to account:",e),G(e)},onAddAccount:()=>{A(!0)},onEditAccount:(e,s)=>{_(t=>t.map(t=>(t.id||t._id)===e?{...t,...s}:t))},onDeleteAccount:X,onLogout:()=>{n.A.remove("auth-token"),localStorage.removeItem("auth-token"),localStorage.removeItem("user"),e.push("/login")},onUpdateUser:e=>t(e)}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col ml-64",children:[(0,r.jsxs)("header",{className:"relative overflow-hidden bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 border-b border-white/20 backdrop-blur-sm px-8 py-8 sticky top-0 z-40",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 to-indigo-600/5"}),(0,r.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C20.832 18.477 19.246 18 17.5 18c-1.746 0-3.332.477-4.5 1.253"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Trading Journal"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,r.jsx)("p",{className:"text-gray-600 text-base font-medium",children:"Track and analyze your trading performance"}),O&&H.length>0&&(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1.5 bg-white/70 backdrop-blur-sm rounded-xl border border-white/20 shadow-sm",children:[(0,r.jsx)("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full animate-pulse shadow-sm"}),(0,r.jsx)("span",{className:"text-sm text-green-700 font-semibold",children:H.find(e=>(e.id||e._id)===O)?.name||"Unknown Account"})]}),(0,r.jsx)("div",{className:"px-3 py-1.5 bg-white/70 backdrop-blur-sm rounded-xl border border-white/20 shadow-sm",children:(0,r.jsxs)("span",{className:"text-sm text-gray-700 font-semibold",children:["$",H.find(e=>(e.id||e._id)===O)?.balance?.toFixed(2)||"0.00"]})})]})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center bg-white/70 backdrop-blur-sm rounded-2xl p-1 border border-white/20 shadow-sm",children:[(0,r.jsxs)("button",{onClick:()=>k("cards"),className:`px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 flex items-center space-x-2 ${"cards"===w?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),(0,r.jsx)("span",{children:"Cards"})]}),(0,r.jsxs)("button",{onClick:()=>k("list"),className:`px-4 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 flex items-center space-x-2 ${"list"===w?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg":"text-gray-600 hover:text-gray-900 hover:bg-white/50"}`,children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),(0,r.jsx)("span",{children:"List"})]})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/add-trade"),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl font-semibold flex items-center space-x-2 transform hover:scale-105",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,r.jsx)("span",{children:"Add Trade"})]})]})]})]}),(0,r.jsx)("main",{className:"flex-1 p-8 overflow-y-auto bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-8",children:[(0,r.jsxs)("div",{className:"relative bg-white/80 backdrop-blur-xl rounded-3xl border border-white/20 shadow-xl shadow-blue-500/5 overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/50 via-transparent to-indigo-50/30 pointer-events-none"}),(0,r.jsx)("div",{className:"relative p-8 border-b border-gray-100/50 bg-gradient-to-r from-blue-50/50 to-indigo-50/50",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Performance Overview"}),(0,r.jsx)("p",{className:"text-gray-600 font-medium",children:"Your trading statistics and analytics at a glance"})]})]})}),(0,r.jsxs)("div",{className:"relative p-8",children:[(0,r.jsx)("div",{className:"mb-8 p-6 bg-gradient-to-br from-blue-50/80 via-indigo-50/60 to-purple-50/40 rounded-2xl border border-blue-200/30 shadow-lg backdrop-blur-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16l-3-9m3 9l3-9"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-xl font-bold text-gray-900",children:ee.accountName}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 font-medium",children:["Current Balance: ",(0,r.jsxs)("span",{className:"font-bold text-gray-900",children:["$",ee.accountBalance.toFixed(2)]})]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:`text-3xl font-bold ${ee.accountGrowth>=0?"text-green-600":"text-red-600"}`,children:[ee.accountGrowth>=0?"+":"",ee.accountGrowth.toFixed(2),"%"]}),(0,r.jsx)("p",{className:"text-sm text-gray-500 font-medium",children:"Account Growth"})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-2xl p-5 text-center border border-blue-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Total Trades"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:ee.total})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100/50 rounded-2xl p-5 text-center border border-yellow-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v6a2 2 0 002 2h2m0 0h2a2 2 0 002-2V7a2 2 0 00-2-2H9m0 0V3m0 2v2"})})}),(0,r.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Planning"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:ee.planning})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100/50 rounded-2xl p-5 text-center border border-indigo-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,r.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Active"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:ee.active})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100/50 rounded-2xl p-5 text-center border border-green-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Wins"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:ee.wins})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-red-100/50 rounded-2xl p-5 text-center border border-red-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,r.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Losses"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-600",children:ee.losses})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100/50 rounded-2xl p-5 text-center border border-gray-200/30 shadow-sm hover:shadow-md transition-all duration-200 group",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-gray-500 to-gray-600 rounded-xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-200",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h3",{className:"text-xs font-bold text-gray-600 uppercase tracking-wide mb-2",children:"Closed"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-600",children:ee.closed})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,r.jsx)("div",{className:"bg-gradient-to-br from-white via-green-50/30 to-emerald-50/20 rounded-2xl p-6 border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300 group",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Actual P&L"}),(0,r.jsxs)("p",{className:`text-3xl font-bold ${ee.actualPL>=0?"text-green-600":"text-red-600"}`,children:["$",ee.actualPL>=0?"+":"",ee.actualPL.toFixed(2)]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Realized profit/loss"})]}),(0,r.jsx)("div",{className:`w-14 h-14 bg-gradient-to-br from-${ee.actualPL>=0?"green":"red"}-500 to-${ee.actualPL>=0?"emerald":"rose"}-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300`,children:(0,r.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-white via-blue-50/30 to-indigo-50/20 rounded-2xl p-6 border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300 group",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Win Rate"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:[ee.winRate.toFixed(1),"%"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Success percentage"})]}),(0,r.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:(0,r.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-white via-purple-50/30 to-pink-50/20 rounded-2xl p-6 border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300 group",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Profit Factor"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-purple-600",children:999===ee.profitFactor?"âˆž":ee.profitFactor.toFixed(2)}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Profit/loss ratio"})]}),(0,r.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:(0,r.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})]})}),(0,r.jsx)("div",{className:"bg-gradient-to-br from-white via-orange-50/30 to-amber-50/20 rounded-2xl p-6 border border-gray-200/60 shadow-lg hover:shadow-xl transition-all duration-300 group",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-600 mb-1",children:"Total Risk"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-orange-600",children:["$",ee.totalRisk.toFixed(0)]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Risk exposure"})]}),(0,r.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-orange-500 to-amber-600 rounded-2xl flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300",children:(0,r.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),ee.closed>0&&(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Average Performance"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Avg Win:"}),(0,r.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:["$",ee.avgWin.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Avg Loss:"}),(0,r.jsxs)("span",{className:"text-sm font-semibold text-red-600",children:["$",ee.avgLoss.toFixed(2)]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-600 mb-2",children:"Risk Management"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Potential Profit:"}),(0,r.jsxs)("span",{className:"text-sm font-semibold text-green-600",children:["$",ee.totalPotentialProfit.toFixed(0)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-500",children:"Risk/Reward:"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-blue-600",children:ee.totalRisk>0?(ee.totalPotentialProfit/ee.totalRisk).toFixed(2):"0.00"})]})]})]})]})]})]}),(0,r.jsxs)("div",{className:"relative bg-white/80 backdrop-blur-xl rounded-3xl border border-white/20 shadow-xl shadow-blue-500/5 overflow-hidden p-6",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/30 via-transparent to-indigo-50/20 pointer-events-none"}),(0,r.jsxs)("div",{className:"relative flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-6",children:[(0,r.jsx)("div",{className:"flex-1 max-w-md",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,r.jsx)("input",{type:"text",value:v,onChange:e=>f(e.target.value),placeholder:"Search trades by pair, strategy, or notes...",className:"w-full pl-12 pr-4 py-4 border border-gray-200/50 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 bg-white/70 backdrop-blur-sm shadow-sm placeholder-gray-400 text-gray-900 font-medium"})]})}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:j,onChange:e=>b(e.target.value),className:"px-5 py-4 border border-gray-200/50 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white/70 backdrop-blur-sm transition-all duration-200 shadow-sm font-medium text-gray-900 appearance-none pr-10",children:[(0,r.jsx)("option",{value:"all",children:"All Status"}),(0,r.jsx)("option",{value:"planning",children:"Planning"}),(0,r.jsx)("option",{value:"open",children:"Open"}),(0,r.jsx)("option",{value:"closed",children:"Closed"})]}),(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{value:y,onChange:e=>N(e.target.value),className:"px-5 py-4 border border-gray-200/50 rounded-2xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white/70 backdrop-blur-sm transition-all duration-200 shadow-sm font-medium text-gray-900 appearance-none pr-10",children:[(0,r.jsx)("option",{value:"newest",children:"Newest First"}),(0,r.jsx)("option",{value:"oldest",children:"Oldest First"}),(0,r.jsx)("option",{value:"profit",children:"Highest Profit"}),(0,r.jsx)("option",{value:"risk",children:"Highest Risk"})]}),(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 pointer-events-none",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})]})]}),0===h.length?(0,r.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-16 text-center",children:[(0,r.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No trades found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:0===o.length?"Start building your trading journal by adding your first trade.":`${o.length} trades available, but none match your current filters.`}),(0,r.jsx)("button",{onClick:()=>e.push("/add-trade"),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-xl hover:from-purple-700 hover:to-purple-800 transition-all duration-200 shadow-sm font-medium",children:"Add Your First Trade"})]}):"cards"===w?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(e=>(0,r.jsxs)("div",{className:"relative bg-white/80 backdrop-blur-xl rounded-3xl border border-white/20 shadow-xl shadow-blue-500/5 overflow-hidden hover:shadow-2xl hover:shadow-blue-500/10 transition-all duration-300 group",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/30 via-transparent to-indigo-50/20 pointer-events-none"}),(0,r.jsxs)("div",{className:"relative p-6 bg-gradient-to-br from-blue-50/50 via-indigo-50/30 to-purple-50/20 border-b border-gray-100/50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:`w-4 h-4 rounded-full shadow-lg ${"long"===e.direction?"bg-gradient-to-r from-green-400 to-emerald-500":"bg-gradient-to-r from-red-400 to-rose-500"}`}),(0,r.jsx)("h3",{className:"text-xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:e.tradingPair})]}),(0,r.jsx)("span",{className:`px-3 py-1.5 rounded-xl text-sm font-semibold shadow-sm ${q(e.status)}`,children:(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:`w-2 h-2 rounded-full ${"planning"===e.status?"bg-yellow-400":"open"===e.status?"bg-blue-400":"bg-green-400"}`}),(0,r.jsx)("span",{children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center shadow-lg ${"long"===e.direction?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-red-500 to-rose-600"}`,children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"long"===e.direction?"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6":"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Direction"}),(0,r.jsx)("p",{className:`font-bold text-lg ${J(e.direction)}`,children:e.direction?.toUpperCase()})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Entry Price"}),(0,r.jsx)("p",{className:"font-bold text-lg text-gray-900 font-mono",children:parseFloat(e.entryPrice).toFixed(5)})]})]})]}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Take Profit"}),(0,r.jsx)("p",{className:"font-semibold text-green-600",children:parseFloat(e.takeProfit).toFixed(5)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Stop Loss"}),(0,r.jsx)("p",{className:"font-semibold text-red-600",children:parseFloat(e.stopLoss).toFixed(5)})]})]}),e.calculations&&(0,r.jsx)("div",{className:"bg-gray-50 rounded-xl p-4 mb-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Risk Amount"}),(0,r.jsxs)("p",{className:"font-bold text-red-600",children:["$",e.calculations.riskAmount?.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Potential Profit"}),(0,r.jsxs)("p",{className:"font-bold text-green-600",children:["$",e.calculations.potentialProfit?.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Lot Size"}),(0,r.jsx)("p",{className:"font-bold text-blue-600",children:e.calculations.lotSize?.toFixed(3)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"Risk:Reward"}),(0,r.jsxs)("p",{className:"font-bold text-purple-600",children:["1:",e.calculations.riskRewardRatio?.toFixed(2)]})]})]})}),e.tags&&(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.tags.split(",").slice(0,3).map((e,s)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full",children:e.trim()},s)),e.tags.split(",").length>3&&(0,r.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.tags.split(",").length-3," more"]})]})}),e.analysis&&(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Analysis"}),(0,r.jsx)("p",{className:"text-sm text-gray-800 line-clamp-3",children:e.analysis.length>100?e.analysis.substring(0,100)+"...":e.analysis})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[(0,r.jsxs)("span",{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]}),(0,r.jsx)("span",{children:new Date(e.createdAt).toLocaleTimeString()})]}),(0,r.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,r.jsx)("button",{onClick:()=>Y(e),className:"p-2 text-purple-600 hover:bg-purple-100 rounded-lg transition-colors",title:"View Details",children:(0,r.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,r.jsx)("button",{onClick:()=>Z(e),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Edit Trade",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("button",{onClick:()=>K(e),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Update Status",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("button",{onClick:()=>Q(e._id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete Trade",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},e._id))}):(0,r.jsx)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Pair"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Direction"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Entry"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"TP/SL"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Risk"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Profit"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Date"}),(0,r.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-100",children:h.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:`w-2 h-2 rounded-full ${"long"===e.direction?"bg-green-500":"bg-red-500"}`}),(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:e.tradingPair})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:`font-medium ${J(e.direction)}`,children:e.direction?.toUpperCase()})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-mono",children:parseFloat(e.entryPrice).toFixed(5)}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-green-600 font-mono",children:parseFloat(e.takeProfit).toFixed(5)}),(0,r.jsx)("div",{className:"text-red-600 font-mono",children:parseFloat(e.stopLoss).toFixed(5)})]})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-red-600",children:["$",e.calculations?.riskAmount?.toFixed(2)||"0.00"]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-semibold text-green-600",children:["$",e.calculations?.potentialProfit?.toFixed(2)||"0.00"]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${q(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>Y(e),className:"p-2 text-purple-600 hover:bg-purple-100 rounded-lg transition-colors",title:"View Details",children:(0,r.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,r.jsx)("button",{onClick:()=>Z(e),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Edit Trade",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("button",{onClick:()=>K(e),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Update Status",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("button",{onClick:()=>Q(e._id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete Trade",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},e._id))})]})})})]})})]}),C&&L&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden shadow-xl",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-purple-50 to-indigo-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-600 to-purple-700 rounded-2xl flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Trade Details"}),(0,r.jsxs)("p",{className:"text-gray-600",children:[L.tradingPair," - ",L.direction?.toUpperCase()]})]})]}),(0,r.jsx)("button",{onClick:()=>M(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-white rounded-xl transition-all",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Trade Setup"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Trading Pair"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:L.tradingPair})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Direction"}),(0,r.jsx)("p",{className:`font-semibold ${J(L.direction)}`,children:L.direction?.toUpperCase()})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Entry Price"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900 font-mono",children:parseFloat(L.entryPrice).toFixed(5)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Status"}),(0,r.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${q(L.status)}`,children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Take Profit"}),(0,r.jsx)("p",{className:"font-semibold text-green-600 font-mono",children:parseFloat(L.takeProfit).toFixed(5)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Stop Loss"}),(0,r.jsx)("p",{className:"font-semibold text-red-600 font-mono",children:parseFloat(L.stopLoss).toFixed(5)})]}),L.strategy&&(0,r.jsxs)("div",{className:"col-span-2",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Strategy"}),(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:L.strategy})]})]})]}),L.calculations&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Risk Management"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Risk Amount"}),(0,r.jsxs)("p",{className:"font-semibold text-red-600",children:["$",L.calculations.riskAmount?.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Potential Profit"}),(0,r.jsxs)("p",{className:"font-semibold text-green-600",children:["$",L.calculations.potentialProfit?.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Lot Size"}),(0,r.jsx)("p",{className:"font-semibold text-blue-600",children:L.calculations.lotSize?.toFixed(4)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Risk:Reward"}),(0,r.jsxs)("p",{className:"font-semibold text-purple-600",children:["1:",L.calculations.riskRewardRatio?.toFixed(2)]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Profit Pips"}),(0,r.jsx)("p",{className:"font-semibold text-green-600",children:L.calculations.profitPips?.toFixed(1)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Loss Pips"}),(0,r.jsx)("p",{className:"font-semibold text-red-600",children:L.calculations.lossPips?.toFixed(1)})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[L.analysis&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Analysis"}),(0,r.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:L.analysis})]}),L.notes&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Notes"}),(0,r.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:L.notes})]}),L.riskManagementLessons&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Risk Management Lessons"}),(0,r.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:L.riskManagementLessons})]}),L.tags&&(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Tags"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:L.tags.split(",").map((e,s)=>(0,r.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-sm rounded-full",children:e.trim()},s))})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Trade Timeline"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Created:"}),(0,r.jsx)("span",{className:"font-semibold",children:new Date(L.createdAt).toLocaleString()})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Last Updated:"}),(0,r.jsx)("span",{className:"font-semibold",children:new Date(L.updatedAt).toLocaleString()})]})]})]})]})]})})]})}),E&&W&&(0,r.jsx)(d,{trade:W,accounts:H,onClose:()=>{B(!1),R(null)},onTradeUpdated:e=>{m(s=>s.map(s=>s._id===e._id?e:s)),B(!1),R(null)}}),T&&F&&(0,r.jsx)(c,{trade:F,accounts:H,onClose:()=>{z(!1),I(null)},onStatusUpdated:(e,s)=>{m(s=>s.map(s=>s._id===e._id?e:s)),s&&_(e=>e.map(e=>e.id===s.id||e._id===s._id?s:e)),z(!1),I(null)}}),S&&(0,r.jsx)(x,{onClose:()=>A(!1),onAccountAdded:e=>{_(s=>[...s,e]),A(!1)}})]})}function d({trade:e,accounts:s,onClose:t,onTradeUpdated:l}){console.log("EditTradeModal - Trade data:",e),console.log("EditTradeModal - Strategy from trade:",e.strategy);let[i,o]=(0,a.useState)({tradingPair:e.tradingPair||"",entryPrice:e.entryPrice||"",takeProfit:e.takeProfit||"",stopLoss:e.stopLoss||"",direction:e.direction||"long",strategy:e.strategy||"",analysis:e.analysis||"",notes:e.notes||"",riskManagementLessons:e.riskManagementLessons||"",tags:e.tags||"",riskPerTrade:e.riskPerTrade||2,accountSize:e.accountSize||0,status:e.status||"planning",actualEntry:e.actualEntry||"",actualExit:e.actualExit||"",exitReason:e.exitReason||"",actualProfit:e.actualProfit||"",screenshot:null,closingImage:null}),[d,c]=(0,a.useState)(!1),[x,m]=(0,a.useState)(null),[h,u]=(0,a.useState)(null),[p,g]=(0,a.useState)("setup"),[j,b]=(0,a.useState)(!1),[v,f]=(0,a.useState)([]),[y,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)({riskAmount:0,lotSize:0,potentialProfit:0,potentialLoss:0,profitPips:0,lossPips:0,riskRewardRatio:0}),L={forex:[{pair:"EUR/USD",name:"Euro/US Dollar"},{pair:"GBP/USD",name:"British Pound/US Dollar"},{pair:"USD/JPY",name:"US Dollar/Japanese Yen"},{pair:"USD/CHF",name:"US Dollar/Swiss Franc"},{pair:"AUD/USD",name:"Australian Dollar/US Dollar"},{pair:"USD/CAD",name:"US Dollar/Canadian Dollar"},{pair:"NZD/USD",name:"New Zealand Dollar/US Dollar"}],crypto:[{pair:"BTC/USD",name:"Bitcoin/US Dollar"},{pair:"ETH/USD",name:"Ethereum/US Dollar"},{pair:"LTC/USD",name:"Litecoin/US Dollar"},{pair:"XRP/USD",name:"Ripple/US Dollar"}],commodities:[{pair:"XAUUSD",name:"Gold/US Dollar"},{pair:"XAGUSD",name:"Silver/US Dollar"},{pair:"XTIUSD",name:"Oil/US Dollar"}]},P=e=>{let s=i.tags?i.tags.split(",").map(e=>e.trim()):[];if(!s.includes(e)){let t=[...s,e].join(", ");o(e=>({...e,tags:t}))}},C=e=>{let s="string"==typeof e?e:e.name;o(e=>({...e,strategy:s})),b(!1)},M=async s=>{s.preventDefault(),c(!0);try{let s=n.A.get("auth-token")||localStorage.getItem("auth-token"),t=localStorage.getItem("user"),r=t?JSON.parse(t):null,a=r?.id||r?._id,o=[];i.screenshot?o.push(i.screenshot):e.images&&e.images.length>0&&o.push(...e.images);let d=[];i.closingImage&&d.push(i.closingImage);let c={tradingPair:i.tradingPair,entryPrice:parseFloat(i.entryPrice)||0,takeProfit:parseFloat(i.takeProfit)||0,stopLoss:parseFloat(i.stopLoss)||0,direction:i.direction,strategy:i.strategy,analysis:i.analysis,notes:i.notes,riskManagementLessons:i.riskManagementLessons,tags:i.tags,riskPerTrade:parseFloat(i.riskPerTrade)||2,accountSize:parseFloat(i.accountSize)||0,status:i.status,actualEntry:i.actualEntry?parseFloat(i.actualEntry):null,actualExit:i.actualExit?parseFloat(i.actualExit):null,exitReason:i.exitReason,actualProfit:i.actualProfit?parseFloat(i.actualProfit):null,calculations:w,images:o,closingImages:d},x=await fetch("/api/trades",{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({tradeId:e._id,userId:a,...c})}),m=await x.json();x.ok&&m.success?l({...e,...c,updatedAt:new Date}):alert("Failed to update trade: "+(m.message||"Unknown error"))}catch(e){console.error("Error updating trade:",e),alert("Error updating trade: "+e.message)}finally{c(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-7xl h-[95vh] flex flex-col shadow-2xl border border-gray-100",children:[(0,r.jsxs)("div",{className:"relative p-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Edit Trade"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,r.jsx)("span",{className:"text-gray-600",children:e.tradingPair}),(0,r.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:["long"===e.direction?(0,r.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}):(0,r.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),(0,r.jsx)("span",{className:"text-gray-600 font-medium",children:e.direction?.toUpperCase()})]}),(0,r.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,r.jsxs)("div",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium ${"win"===e.status?"bg-green-100 text-green-700":"loss"===e.status?"bg-red-100 text-red-700":"active"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:["win"===e.status&&(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"loss"===e.status&&(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"active"===e.status&&(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"planning"===e.status&&(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,r.jsx)("span",{children:e.status?.charAt(0).toUpperCase()+e.status?.slice(1)})]})]})]})]}),(0,r.jsx)("button",{onClick:t,className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-white/80 rounded-2xl transition-all duration-200",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-indigo-600"})]}),(0,r.jsx)("div",{className:"px-8 pt-6 border-b border-gray-200",children:(0,r.jsx)("nav",{className:"flex space-x-8",children:[{id:"setup",name:"Trade Setup",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"execution",name:"Execution",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},{id:"analysis",name:"Analysis",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{id:"media",name:"Media",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})})}].map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>g(e.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-all duration-200 ${p===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.icon,(0,r.jsx)("span",{children:e.name})]},e.id))})}),(0,r.jsxs)("form",{onSubmit:M,className:"flex-1 flex flex-col min-h-0",children:[(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-8",children:["setup"===p&&(0,r.jsx)("div",{className:"space-y-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Basic Information"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Trading Pair"}),(0,r.jsxs)("select",{value:i.tradingPair,onChange:e=>o(s=>({...s,tradingPair:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select Trading Pair"}),(0,r.jsx)("optgroup",{label:"Forex",children:L.forex.map(e=>(0,r.jsxs)("option",{value:e.pair,children:[e.pair," - ",e.name]},e.pair))}),(0,r.jsx)("optgroup",{label:"Crypto",children:L.crypto.map(e=>(0,r.jsxs)("option",{value:e.pair,children:[e.pair," - ",e.name]},e.pair))}),(0,r.jsx)("optgroup",{label:"Commodities",children:L.commodities.map(e=>(0,r.jsxs)("option",{value:e.pair,children:[e.pair," - ",e.name]},e.pair))})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direction"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>o(e=>({...e,direction:"long"})),className:`px-4 py-3 rounded-xl border-2 font-medium transition-all duration-200 flex items-center justify-center space-x-2 ${"long"===i.direction?"border-green-500 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:border-green-300"}`,children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),(0,r.jsx)("span",{children:"Long"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>o(e=>({...e,direction:"short"})),className:`px-4 py-3 rounded-xl border-2 font-medium transition-all duration-200 flex items-center justify-center space-x-2 ${"short"===i.direction?"border-red-500 bg-red-50 text-red-700":"border-gray-300 text-gray-600 hover:border-red-300"}`,children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),(0,r.jsx)("span",{children:"Short"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,r.jsxs)("select",{value:i.status,onChange:e=>o(s=>({...s,status:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",children:[(0,r.jsx)("option",{value:"planning",children:"Planning"}),(0,r.jsx)("option",{value:"active",children:"Active"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Use the status update button in the trade list to mark trades as win/loss"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Strategy"}),(0,r.jsx)("button",{type:"button",onClick:()=>b(!0),className:"w-full p-4 bg-gray-50 hover:bg-gray-100 border border-gray-300 hover:border-purple-300 rounded-xl text-left transition-all duration-200 group",children:i.strategy?(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-sm",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:i.strategy}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Selected Strategy (Auto-populated)"})]}),(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-purple-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-semibold text-gray-700",children:"Select Strategy"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Choose from your saved strategies"})]}),(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-purple-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Price Levels"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Entry Price"}),(0,r.jsx)("input",{type:"number",step:"0.00001",value:i.entryPrice,onChange:e=>o(s=>({...s,entryPrice:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 font-mono",required:!0,placeholder:"1.23456"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,r.jsx)("span",{children:"Take Profit"})]})}),(0,r.jsx)("input",{type:"number",step:"0.00001",value:i.takeProfit,onChange:e=>o(s=>({...s,takeProfit:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 font-mono",required:!0,placeholder:"1.25000"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,r.jsx)("span",{children:"Stop Loss"})]})}),(0,r.jsx)("input",{type:"number",step:"0.00001",value:i.stopLoss,onChange:e=>o(s=>({...s,stopLoss:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 font-mono",required:!0,placeholder:"1.22000"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Risk Management"})]}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Size"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:i.accountSize,onChange:e=>o(s=>({...s,accountSize:e.target.value})),className:"w-full pl-8 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200",required:!0,placeholder:"10000"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Risk Percentage"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"number",step:"0.1",value:i.riskPerTrade,onChange:e=>o(s=>({...s,riskPerTrade:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200",required:!0,placeholder:"2"}),(0,r.jsx)("span",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]})]})]})})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-2xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Live Calculations"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Risk Amount"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-red-600",children:["$",w.riskAmount]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Potential Profit"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-green-600",children:["$",w.potentialProfit]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Position Size"}),(0,r.jsx)("p",{className:"text-xl font-bold text-blue-600",children:w.lotSize})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-blue-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Risk:Reward"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-purple-600",children:["1:",w.riskRewardRatio]})]})]})]})]})]})}),"execution"===p&&(0,r.jsx)("div",{className:"space-y-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Actual Execution"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Entry"}),(0,r.jsx)("input",{type:"number",step:"0.00001",value:i.actualEntry,onChange:e=>o(s=>({...s,actualEntry:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 font-mono",placeholder:"Actual entry price"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Actual Exit"}),(0,r.jsx)("input",{type:"number",step:"0.00001",value:i.actualExit,onChange:e=>o(s=>({...s,actualExit:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 font-mono",placeholder:"Actual exit price"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"Final P&L"}),(0,r.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:"Auto-calculated"})]})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500",children:"$"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:i.actualProfit,readOnly:!0,className:`w-full pl-8 pr-12 py-3 border rounded-xl transition-all duration-200 font-semibold ${parseFloat(i.actualProfit||0)>=0?"border-green-300 bg-green-50 text-green-700":"border-red-300 bg-red-50 text-red-700"}`,placeholder:"Auto-calculated from actual prices"}),(0,r.jsx)("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})]}),i.actualEntry&&i.actualExit&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Calculated from: ",i.actualEntry," â†’ ",i.actualExit," (",i.direction,")"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exit Reason"}),(0,r.jsxs)("select",{value:i.exitReason,onChange:e=>o(s=>({...s,exitReason:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select reason"}),(0,r.jsx)("option",{value:"take-profit",children:"Take Profit Hit"}),(0,r.jsx)("option",{value:"stop-loss",children:"Stop Loss Hit"}),(0,r.jsx)("option",{value:"manual-close",children:"Manual Close"}),(0,r.jsx)("option",{value:"trailing-stop",children:"Trailing Stop"}),(0,r.jsx)("option",{value:"news-event",children:"News Event"}),(0,r.jsx)("option",{value:"time-based",children:"Time Based"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-2xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Metrics"})]}),(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl p-4 border border-green-200",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Planned vs Actual"}),(0,r.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full",children:"Comparison"})]}),(0,r.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm",children:"Entry:"}),(0,r.jsxs)("span",{className:"text-sm font-mono",children:[i.entryPrice," â†’ ",i.actualEntry||"N/A"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-sm",children:"Exit:"}),(0,r.jsxs)("span",{className:"text-sm font-mono",children:[i.takeProfit," â†’ ",i.actualExit||"N/A"]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"P&L:"}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Planned: $",w.potentialProfit]}),(0,r.jsxs)("div",{className:`text-sm font-bold ${parseFloat(i.actualProfit||0)>=0?"text-green-600":"text-red-600"}`,children:["Actual: $",i.actualProfit||"0.00"]})]})]})]})]})})]})]})}),"analysis"===p&&(0,r.jsx)("div",{className:"space-y-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-yellow-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Trade Analysis"})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Market Analysis"}),(0,r.jsx)("textarea",{value:i.analysis,onChange:e=>o(s=>({...s,analysis:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200 resize-none",rows:5,placeholder:"Describe your market analysis, setup reasoning, confluence factors, technical indicators used..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Trade Notes"}),(0,r.jsx)("textarea",{value:i.notes,onChange:e=>o(s=>({...s,notes:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200 resize-none",rows:4,placeholder:"Additional observations, market conditions, emotions, execution notes..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Risk Management Lessons"}),(0,r.jsx)("textarea",{value:i.riskManagementLessons,onChange:e=>o(s=>({...s,riskManagementLessons:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200 resize-none",rows:3,placeholder:"What did you learn about risk management from this trade? What would you do differently?"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Trade Tags"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Custom Tags"}),(0,r.jsx)("input",{type:"text",value:i.tags,onChange:e=>o(s=>({...s,tags:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Enter comma-separated tags (e.g., breakout, trend-following, scalping)"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Tags"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:["scalping","swing-trade","day-trade","breakout","trend-following","support-resistance","news-trade","technical-analysis","momentum","reversal","continuation","pullback","bounce","channel"].map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>P(e),className:"px-3 py-2 bg-indigo-50 text-indigo-700 text-sm rounded-xl hover:bg-indigo-100 transition-all duration-200 border border-indigo-200 flex items-center space-x-1",children:[(0,r.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),(0,r.jsx)("span",{children:e})]},e))})]})]})]})]})}),"media"===p&&(0,r.jsx)("div",{className:"space-y-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Entry Screenshot"})]}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center hover:border-green-400 hover:bg-green-25 transition-all duration-300 group",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let s=e.target.files[0];if(s){o(e=>({...e,screenshot:s}));let e=new FileReader;e.onload=e=>m(e.target.result),e.readAsDataURL(s)}},className:"hidden",id:"entry-screenshot-upload"}),(0,r.jsx)("label",{htmlFor:"entry-screenshot-upload",className:"cursor-pointer",children:x?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("img",{src:x,alt:"Entry screenshot",className:"max-w-full h-64 object-cover rounded-2xl mx-auto shadow-lg"}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-green-600 font-semibold",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,r.jsx)("span",{children:"Change Entry Image"})]})]}):e.images&&e.images.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"text-gray-500",children:[(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,r.jsx)("p",{className:"text-sm font-medium",children:"Existing entry image"})]}),(0,r.jsxs)("div",{className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Replace Entry Image"]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-6",children:(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-900 mb-2",children:"Upload Entry Screenshot"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"PNG, JPG, GIF up to 10MB"}),(0,r.jsxs)("div",{className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-xl font-semibold hover:bg-green-700 transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Choose File"]})]})})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Closing Screenshot"})]}),(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-8 text-center hover:border-red-400 hover:bg-red-25 transition-all duration-300 group",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let s=e.target.files[0];if(s){o(e=>({...e,closingImage:s}));let e=new FileReader;e.onload=e=>u(e.target.result),e.readAsDataURL(s)}},className:"hidden",id:"closing-screenshot-upload"}),(0,r.jsx)("label",{htmlFor:"closing-screenshot-upload",className:"cursor-pointer",children:h?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("img",{src:h,alt:"Closing screenshot",className:"max-w-full h-64 object-cover rounded-2xl mx-auto shadow-lg"}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-red-600 font-semibold",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,r.jsx)("span",{children:"Change Closing Image"})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-400 mb-6",children:(0,r.jsx)("svg",{className:"w-16 h-16 mx-auto group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-900 mb-2",children:"Upload Closing Screenshot"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"PNG, JPG, GIF up to 10MB"}),(0,r.jsxs)("div",{className:"inline-flex items-center px-6 py-3 bg-red-600 text-white rounded-xl font-semibold hover:bg-red-700 transition-colors",children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Choose File"]})]})})]})]})]})})]})}),(0,r.jsx)("div",{className:"bg-white border-t border-gray-200 p-6 mt-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("span",{children:["Last updated: ",new Date(e.updatedAt||e.createdAt).toLocaleDateString()]})]})}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"px-6 py-3 text-gray-700 bg-gray-100 rounded-xl hover:bg-gray-200 transition-all duration-200 font-medium",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 font-medium shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,r.jsx)("span",{children:"Updating..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,r.jsx)("span",{children:"Update Trade"})]})})]})]})})]}),j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[60] p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden shadow-xl",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Select Strategy"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Choose from your saved trading strategies"})]}),(0,r.jsx)("button",{onClick:()=>b(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:y?(0,r.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),(0,r.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading strategies..."})]}):v.length>0?(0,r.jsx)("div",{className:"space-y-2",children:v.map(e=>(0,r.jsx)("button",{onClick:()=>C(e),className:"w-full p-4 text-left border border-gray-100 rounded-xl hover:border-purple-200 hover:bg-purple-50/50 transition-all duration-200 group",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-purple-600 rounded-xl flex items-center justify-center shadow-sm",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-semibold text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.description||"No description"})]})]}),(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-purple-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},e._id||e.id))}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"No strategies found"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Create strategies in the add-trade page to see them here"})]})})]})})]})})}function c({trade:e,accounts:s,onClose:t,onStatusUpdated:l}){let[i,o]=(0,a.useState)("win"===e.status||"loss"===e.status?e.status:"win"),[d,c]=(0,a.useState)(!1),[x,m]=(0,a.useState)("status"),[h,u]=(0,a.useState)({actualEntry:e.actualEntry||e.entryPrice||"",actualExit:e.actualExit||"",stopLoss:e.stopLoss||"",takeProfit:e.takeProfit||"",exitReason:e.exitReason||"",notes:e.notes||"",actualProfit:e.actualProfit||"",exitType:e.actualExit?"price":"other",manualPL:e.actualProfit||"",exitDescription:e.exitDescription||"",closingImage:null}),p=s=>{let t=h.actualExit===e.takeProfit||h.actualExit===e.stopLoss;(!h.actualExit&&!h.manualPL||t||f)&&("win"===s&&e.takeProfit?(u(s=>({...s,actualExit:e.takeProfit,exitType:"price"})),y("win")):"loss"===s&&e.stopLoss&&(u(s=>({...s,actualExit:e.stopLoss,exitType:"price"})),y("loss")))},[g,j]=(0,a.useState)({actualPL:0,pips:0,riskRewardRatio:0,accountImpact:0}),[b,v]=(0,a.useState)({previewPL:0,previewPips:0,previewRiskReward:0,previewAccountImpact:0}),[f,y]=(0,a.useState)(null),N=s.find(s=>s.id===e.accountId||s._id===e.accountId),w=async s=>{s.preventDefault(),c(!0);try{let s=n.A.get("auth-token")||localStorage.getItem("auth-token"),t=localStorage.getItem("user"),r=t?JSON.parse(t):null,a=r?.id||r?._id,o=[];h.closingImage?o.push(h.closingImage):e.closingImages&&e.closingImages.length>0&&o.push(...e.closingImages);let d={status:i,actualEntry:h.actualEntry?parseFloat(h.actualEntry):null,actualExit:"price"===h.exitType&&h.actualExit?parseFloat(h.actualExit):null,stopLoss:h.stopLoss?parseFloat(h.stopLoss):e.stopLoss,takeProfit:h.takeProfit?parseFloat(h.takeProfit):e.takeProfit,exitReason:h.exitReason,notes:h.notes,actualProfit:g.actualPL,exitType:h.exitType,exitDescription:"other"===h.exitType?h.exitDescription:null,closingImages:o,calculations:{...e.calculations,actualPL:g.actualPL,pips:g.pips,riskRewardRatio:g.riskRewardRatio,accountImpact:g.accountImpact}},c=await fetch("/api/trades",{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({tradeId:e._id,userId:a,...d})}),x=await c.json();if(c.ok&&x.success){let t=null;if(0!==g.actualPL&&N){let e=N.balance+g.actualPL;(await fetch("/api/accounts",{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({accountId:N.id||N._id,userId:a,updates:{balance:e}})})).ok&&(t={...N,balance:e})}l({...e,...d},t)}else alert("Failed to update trade status: "+(x.message||"Unknown error"))}catch(e){console.error("Error updating trade status:",e),alert("Error updating trade status: "+e.message)}finally{c(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-3xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl border border-gray-100",children:[(0,r.jsxs)("div",{className:"relative p-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 border-b border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Update Trade Status"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,r.jsx)("span",{className:"text-gray-600 font-semibold",children:e.tradingPair}),(0,r.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:["long"===e.direction?(0,r.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}):(0,r.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),(0,r.jsx)("span",{className:"text-gray-600 font-medium",children:e.direction?.toUpperCase()})]}),(0,r.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,r.jsx)("div",{className:`flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-medium ${"win"===e.status?"bg-green-100 text-green-700":"loss"===e.status?"bg-red-100 text-red-700":"active"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:(0,r.jsxs)("span",{children:["Current: ",e.status?.charAt(0).toUpperCase()+e.status?.slice(1)]})})]})]})]}),(0,r.jsx)("button",{onClick:t,className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-white/80 rounded-2xl transition-all duration-200",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 to-emerald-600"})]}),(0,r.jsx)("div",{className:"px-8 pt-6 border-b border-gray-200",children:(0,r.jsx)("nav",{className:"flex space-x-8",children:[{id:"status",name:"Status & Outcome",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"execution",name:"Execution Details",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},{id:"analysis",name:"Analysis & Notes",icon:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}].map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>m(e.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-all duration-200 ${x===e.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.icon,(0,r.jsx)("span",{children:e.name})]},e.id))})}),(0,r.jsxs)("form",{onSubmit:w,className:"flex-1 flex flex-col min-h-0",children:[(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsxs)("div",{className:"p-8",children:["status"===x&&(0,r.jsx)("div",{className:"space-y-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Trade Outcome"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>{o("win"),p("win")},className:`p-6 rounded-2xl border-2 font-medium transition-all duration-200 flex flex-col items-center space-y-3 ${"win"===i?"border-green-500 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:border-green-300 hover:bg-green-50"}`,children:[(0,r.jsx)("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${"win"===i?"bg-green-500":"bg-gray-300"}`,children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsx)("span",{className:"text-lg font-semibold",children:"Win"}),(0,r.jsx)("span",{className:"text-sm text-center",children:"Trade was profitable"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>{o("loss"),p("loss")},className:`p-6 rounded-2xl border-2 font-medium transition-all duration-200 flex flex-col items-center space-y-3 ${"loss"===i?"border-red-500 bg-red-50 text-red-700":"border-gray-300 text-gray-600 hover:border-red-300 hover:bg-red-50"}`,children:[(0,r.jsx)("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${"loss"===i?"bg-red-500":"bg-gray-300"}`,children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,r.jsx)("span",{className:"text-lg font-semibold",children:"Loss"}),(0,r.jsx)("span",{className:"text-sm text-center",children:"Trade was not profitable"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exit Reason"}),(0,r.jsxs)("select",{value:h.exitReason,onChange:e=>u(s=>({...s,exitReason:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",children:[(0,r.jsx)("option",{value:"",children:"Select exit reason"}),(0,r.jsx)("option",{value:"take-profit-hit",children:"Take Profit Hit"}),(0,r.jsx)("option",{value:"stop-loss-hit",children:"Stop Loss Hit"}),(0,r.jsx)("option",{value:"manual-close",children:"Manual Close"}),(0,r.jsx)("option",{value:"trailing-stop",children:"Trailing Stop"}),(0,r.jsx)("option",{value:"market-close",children:"Market Close"}),(0,r.jsx)("option",{value:"risk-management",children:"Risk Management"}),(0,r.jsx)("option",{value:"strategy-signal",children:"Strategy Signal"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Performance Metrics"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["P&L",0===g.actualPL&&0!==b.previewPL&&(0,r.jsx)("span",{className:"ml-1 text-xs text-blue-600",children:"(Preview)"})]}),(0,r.jsxs)("div",{className:`text-2xl font-bold ${(0!==g.actualPL?g.actualPL:b.previewPL)>=0?"text-green-600":"text-red-600"}`,children:["$",(0!==g.actualPL?g.actualPL:b.previewPL)>=0?"+":"","$",0!==g.actualPL?g.actualPL:b.previewPL]}),0===g.actualPL&&0!==b.previewPL&&(0,r.jsxs)("div",{className:"text-xs text-blue-500 mt-1",children:["Based on ","win"===i?"take profit":"stop loss"]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Pips",0===g.pips&&0!==b.previewPips&&(0,r.jsx)("span",{className:"ml-1 text-xs text-blue-600",children:"(Preview)"})]}),(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:"price"===h.exitType?g.pips:0===g.pips&&0!==b.previewPips?b.previewPips:"N/A"}),"other"===h.exitType&&0===g.pips&&0===b.previewPips&&(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Requires exit price"}),0===g.pips&&0!==b.previewPips&&"other"!==h.exitType&&(0,r.jsxs)("div",{className:"text-xs text-blue-500 mt-1",children:["Based on ","win"===i?"TP":"SL"]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["R:R Ratio",0===g.riskRewardRatio&&0!==b.previewRiskReward&&(0,r.jsx)("span",{className:"ml-1 text-xs text-blue-600",children:"(Preview)"})]}),(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:"price"===h.exitType&&g.riskRewardRatio>0?`1:${g.riskRewardRatio}`:0===g.riskRewardRatio&&b.previewRiskReward>0?`1:${b.previewRiskReward}`:"N/A"}),"other"===h.exitType&&0===g.riskRewardRatio&&0===b.previewRiskReward&&(0,r.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Requires exit price"}),0===g.riskRewardRatio&&0!==b.previewRiskReward&&"other"!==h.exitType&&(0,r.jsx)("div",{className:"text-xs text-blue-500 mt-1",children:"Based on planned levels"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600 mb-1",children:["Account Impact",0===g.accountImpact&&0!==b.previewAccountImpact&&(0,r.jsx)("span",{className:"ml-1 text-xs text-blue-600",children:"(Preview)"})]}),(0,r.jsxs)("div",{className:`text-2xl font-bold ${(0!==g.accountImpact?g.accountImpact:b.previewAccountImpact)>=0?"text-green-600":"text-red-600"}`,children:[(0!==g.accountImpact?g.accountImpact:b.previewAccountImpact)>=0?"+":"",0!==g.accountImpact?g.accountImpact:b.previewAccountImpact,"%"]}),0===g.accountImpact&&0!==b.previewAccountImpact&&(0,r.jsxs)("div",{className:"text-xs text-blue-500 mt-1",children:["Based on ","win"===i?"take profit":"stop loss"]})]})]}),N&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-xl",children:[(0,r.jsxs)("div",{className:"text-sm text-blue-700 mb-1",children:["Account: ",N.name,0===g.actualPL&&0!==b.previewPL&&(0,r.jsx)("span",{className:"ml-1 text-xs",children:"(Preview)"})]}),(0,r.jsxs)("div",{className:"text-lg font-semibold text-blue-900",children:["New Balance: $",(N.balance+(0!==g.actualPL?g.actualPL:b.previewPL)).toFixed(2)]}),0===g.actualPL&&0!==b.previewPL&&(0,r.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:["Expected if ","win"===i?"take profit hits":"stop loss hits"]})]})]})]})}),"execution"===x&&(0,r.jsx)("div",{className:"space-y-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Execution Prices"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Exit Information Type"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>u(e=>({...e,exitType:"price"})),className:`p-4 rounded-xl border-2 font-medium transition-all duration-200 flex flex-col items-center space-y-2 ${"price"===h.exitType?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 text-gray-600 hover:border-blue-300 hover:bg-blue-50"}`,children:[(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})}),(0,r.jsx)("span",{className:"text-sm font-semibold",children:"Use Exit Price"}),(0,r.jsx)("span",{className:"text-xs text-center",children:"Enter actual exit price for automatic P&L calculation"})]}),(0,r.jsxs)("button",{type:"button",onClick:()=>u(e=>({...e,exitType:"other"})),className:`p-4 rounded-xl border-2 font-medium transition-all duration-200 flex flex-col items-center space-y-2 ${"other"===h.exitType?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-300 text-gray-600 hover:border-purple-300 hover:bg-purple-50"}`,children:[(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})}),(0,r.jsx)("span",{className:"text-sm font-semibold",children:"Manual P&L"}),(0,r.jsx)("span",{className:"text-xs text-center",children:"Enter P&L manually without exit price"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,r.jsx)("span",{children:"Actual Entry"}),h.actualEntry===e.entryPrice&&(0,r.jsx)("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded-full",children:"Auto-filled"})]})}),(0,r.jsx)("input",{type:"number",step:"0.00001",value:h.actualEntry,onChange:e=>u(s=>({...s,actualEntry:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 font-mono",placeholder:e.entryPrice||"1.23456"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Planned: ",e.entryPrice]}),h.actualEntry!==e.entryPrice&&e.entryPrice&&(0,r.jsx)("button",{type:"button",onClick:()=>u(s=>({...s,actualEntry:e.entryPrice})),className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Use planned price"})]})]}),"price"===h.exitType?(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"w-3 h-3 bg-orange-500 rounded-full"}),(0,r.jsx)("span",{children:"Actual Exit Price"}),("win"===i&&h.actualExit===e.takeProfit||"loss"===i&&h.actualExit===e.stopLoss)&&(0,r.jsxs)("span",{className:"text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded-full",children:["Auto-filled from ","win"===i?"TP":"SL"]})]})}),(0,r.jsx)("input",{type:"number",step:"0.00001",value:h.actualExit,onChange:s=>{u(e=>({...e,actualExit:s.target.value})),s.target.value!==e.takeProfit&&s.target.value!==e.stopLoss&&y(null)},className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-orange-500 transition-all duration-200 font-mono",placeholder:"1.25000"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,r.jsxs)("div",{className:"flex space-x-4 text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:["TP: ",e.takeProfit]}),(0,r.jsxs)("span",{children:["SL: ",e.stopLoss]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[e.takeProfit&&h.actualExit!==e.takeProfit&&(0,r.jsx)("button",{type:"button",onClick:()=>{u(s=>({...s,actualExit:e.takeProfit})),y("win")},className:"text-xs text-green-600 hover:text-green-800 underline",children:"Use TP"}),e.stopLoss&&h.actualExit!==e.stopLoss&&(0,r.jsx)("button",{type:"button",onClick:()=>{u(s=>({...s,actualExit:e.stopLoss})),y("loss")},className:"text-xs text-red-600 hover:text-red-800 underline",children:"Use SL"})]})]})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,r.jsx)("span",{children:"Manual P&L Amount"})]})}),(0,r.jsx)("input",{type:"number",step:"0.01",value:h.manualPL,onChange:e=>u(s=>({...s,manualPL:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 font-mono",placeholder:"Enter profit/loss amount (e.g., 150.00 or -75.50)"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enter positive for profit, negative for loss"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exit Description"}),(0,r.jsx)("textarea",{value:h.exitDescription,onChange:e=>u(s=>({...s,exitDescription:e.target.value})),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 resize-none",placeholder:"Describe how the trade was closed (e.g., partial close, trailing stop, manual close due to news, etc.)"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,r.jsx)("span",{children:"Stop Loss"}),h.stopLoss===e.stopLoss&&(0,r.jsx)("span",{className:"text-xs text-red-600 bg-red-100 px-2 py-1 rounded-full",children:"Original"})]})}),(0,r.jsx)("input",{type:"number",step:"0.00001",value:h.stopLoss,onChange:e=>u(s=>({...s,stopLoss:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-red-500 transition-all duration-200 font-mono",placeholder:e.stopLoss||"1.22000"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Original: ",e.stopLoss]}),h.stopLoss!==e.stopLoss&&e.stopLoss&&(0,r.jsx)("button",{type:"button",onClick:()=>u(s=>({...s,stopLoss:e.stopLoss})),className:"text-xs text-red-600 hover:text-red-800 underline",children:"Reset to original"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:(0,r.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,r.jsx)("span",{children:"Take Profit"}),h.takeProfit===e.takeProfit&&(0,r.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full",children:"Original"})]})}),(0,r.jsx)("input",{type:"number",step:"0.00001",value:h.takeProfit,onChange:e=>u(s=>({...s,takeProfit:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200 font-mono",placeholder:e.takeProfit||"1.25000"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mt-1",children:[(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Original: ",e.takeProfit]}),h.takeProfit!==e.takeProfit&&e.takeProfit&&(0,r.jsx)("button",{type:"button",onClick:()=>u(s=>({...s,takeProfit:e.takeProfit})),className:"text-xs text-green-600 hover:text-green-800 underline",children:"Reset to original"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"price"===h.exitType?"Actual P&L (Auto-calculated)":"Actual P&L (Manual Entry)"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"number",step:"0.01",value:h.actualProfit,readOnly:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-50 font-mono text-lg font-semibold"}),(0,r.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,r.jsx)("span",{className:`text-sm font-medium ${parseFloat(h.actualProfit||0)>=0?"text-green-600":"text-red-600"}`,children:parseFloat(h.actualProfit||0)>=0?"â†—":"â†˜"})})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"price"===h.exitType?"Automatically calculated based on entry/exit prices":"Based on your manual P&L entry"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Original Trade Setup"})]}),(0,r.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Fill Options:"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{u(s=>({...s,actualEntry:e.entryPrice,actualExit:e.takeProfit,exitType:"price"})),y("win")},className:"px-3 py-2 bg-green-100 text-green-700 rounded-lg text-xs font-medium hover:bg-green-200 transition-colors",children:"Fill Win Scenario (TP Hit)"}),(0,r.jsx)("button",{type:"button",onClick:()=>{u(s=>({...s,actualEntry:e.entryPrice,actualExit:e.stopLoss,exitType:"price"})),y("loss")},className:"px-3 py-2 bg-red-100 text-red-700 rounded-lg text-xs font-medium hover:bg-red-200 transition-colors",children:"Fill Loss Scenario (SL Hit)"}),(0,r.jsx)("button",{type:"button",onClick:()=>{u(s=>({...s,actualEntry:e.entryPrice,stopLoss:e.stopLoss,takeProfit:e.takeProfit})),y(null)},className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-lg text-xs font-medium hover:bg-blue-200 transition-colors",children:"Reset All to Original"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Trading Pair"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:e.tradingPair})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Direction"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:["long"===e.direction?(0,r.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}):(0,r.jsx)("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})}),(0,r.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:e.direction?.toUpperCase()})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Lot Size"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:e.calculations?.lotSize||"N/A"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"Risk Amount"}),(0,r.jsxs)("div",{className:"text-lg font-semibold text-gray-900",children:["$",e.calculations?.riskAmount||"N/A"]})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-xl p-4",children:[(0,r.jsx)("div",{className:"text-sm text-blue-700 mb-1",children:"Strategy"}),(0,r.jsx)("div",{className:"text-lg font-semibold text-blue-900",children:e.strategy||"No strategy specified"})]})]})]})]})}),"analysis"===x&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Trade Notes"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Notes"}),(0,r.jsx)("textarea",{value:h.notes,onChange:e=>u(s=>({...s,notes:e.target.value})),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all duration-200 resize-none",placeholder:"Add any additional notes about the trade execution, market conditions, or lessons learned..."})]}),e.tags&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Trade Tags"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags.split(",").map((e,s)=>(0,r.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:e.trim()},s))})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Closing Chart"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[h.closingImage?(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:h.closingImage,alt:"Closing chart",className:"w-full h-64 object-cover rounded-xl border border-gray-200"}),(0,r.jsx)("button",{type:"button",onClick:()=>{u(e=>({...e,closingImage:null}))},className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,r.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-purple-400 transition-colors",children:[(0,r.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h14a2 2 0 002-2V5a2 2 0 00-2-2H6a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("label",{htmlFor:"closing-image-upload",className:"cursor-pointer",children:[(0,r.jsx)("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Upload closing chart image"}),(0,r.jsx)("span",{className:"mt-1 block text-sm text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]}),(0,r.jsx)("input",{id:"closing-image-upload",type:"file",className:"hidden",accept:"image/*",onChange:e=>{let s=e.target.files[0];if(s){if(s.size>5242880)return void alert("Image size should be less than 5MB");let e=new FileReader;e.onload=e=>{u(s=>({...s,closingImage:e.target.result}))},e.readAsDataURL(s)}}})]}),(0,r.jsx)("button",{type:"button",onClick:()=>document.getElementById("closing-image-upload").click(),className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium",children:"Choose Image"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Upload a screenshot of your chart at the time of closing the trade for future reference and analysis."}),e.closingImages&&e.closingImages.length>0&&!h.closingImage&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Existing Closing Images"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.closingImages.map((e,s)=>(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("img",{src:e,alt:`Existing closing chart ${s+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200"}),(0,r.jsx)("button",{type:"button",onClick:()=>u(s=>({...s,closingImage:e})),className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-20 transition-all duration-200 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-xs font-medium opacity-0 hover:opacity-100 transition-opacity",children:"Use This Image"})})]},s))})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Original Trade Analysis"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Original Analysis"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:e.analysis||"No original analysis provided"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Risk Management Lessons"}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:e.riskManagementLessons||"No risk management lessons recorded"})]})]})]})]})]})}),(0,r.jsx)("div",{className:"p-8 bg-gray-50 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,r.jsx)("span",{className:"font-medium",children:"Account:"})," ",N?.name||"Unknown Account",0!==g.actualPL&&(0,r.jsxs)("span",{className:"ml-4",children:[(0,r.jsx)("span",{className:"font-medium",children:"Balance Change:"}),(0,r.jsxs)("span",{className:`ml-1 font-semibold ${g.actualPL>=0?"text-green-600":"text-red-600"}`,children:[g.actualPL>=0?"+":"","$",g.actualPL]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"px-6 py-3 text-gray-700 bg-white border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200 font-medium",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:d||!h.actualEntry||"price"===h.exitType&&!h.actualExit||"other"===h.exitType&&!h.manualPL,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 font-medium shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,r.jsx)("span",{children:"Updating..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,r.jsx)("span",{children:"Update Trade Status"})]})})]})]})})]})]})})}function x({onClose:e,onAccountAdded:s}){let[t,l]=(0,a.useState)({name:"",balance:"",tag:"personal"}),[i,o]=(0,a.useState)(!1),d=async e=>{e.preventDefault(),o(!0);try{let e=n.A.get("auth-token")||localStorage.getItem("auth-token"),r=localStorage.getItem("user"),a=r?JSON.parse(r):null,l=a?.id||a?._id,i=await fetch("/api/accounts",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({userId:l,name:t.name,balance:parseFloat(t.balance)||0,tag:t.tag})}),o=await i.json();i.ok&&o.success?s(o.account):alert("Failed to create account: "+(o.message||"Unknown error"))}catch(e){console.error("Error creating account:",e),alert("Error creating account: "+e.message)}finally{o(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-xl",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Account"}),(0,r.jsx)("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsxs)("form",{onSubmit:d,className:"p-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Name"}),(0,r.jsx)("input",{type:"text",value:t.name,onChange:e=>l(s=>({...s,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"e.g., Main Trading Account",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Initial Balance"}),(0,r.jsx)("input",{type:"number",value:t.balance,onChange:e=>l(s=>({...s,balance:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",placeholder:"10000",step:"0.01"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account Type"}),(0,r.jsxs)("select",{value:t.tag,onChange:e=>l(s=>({...s,tag:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[(0,r.jsx)("option",{value:"personal",children:"Personal"}),(0,r.jsx)("option",{value:"funded",children:"Funded"}),(0,r.jsx)("option",{value:"demo",children:"Demo"}),(0,r.jsx)("option",{value:"forex",children:"Forex"}),(0,r.jsx)("option",{value:"crypto",children:"Crypto"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:e,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:i,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:i?"Creating...":"Create Account"})]})]})]})})}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9613:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\trading-journal-app\\\\app\\\\journal\\\\page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\trading-journal-app\\app\\journal\\page.js","default")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[447,807,156],()=>t(3246));module.exports=r})();